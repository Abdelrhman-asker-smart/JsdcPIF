{
    "sourceFile": "create.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 24,
            "patches": [
                {
                    "date": 1741542126345,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1741542373447,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -210,23 +210,23 @@\n             <div class=\"error-message\" id=\"assignedToError\">This field is required.</div>\r\n           </div>\r\n         </div>\r\n \r\n-        <!-- Competitors Section (Dynamic Array) -->\r\n-        <div id=\"competitorsSection\">\r\n-          <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n-          <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n-            <!-- Competitor entries will be added here dynamically -->\r\n-          </div>\r\n-          <button\r\n-            type=\"button\"\r\n-            class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n-            onclick=\"addCompetitor()\"\r\n-          >\r\n-            Add Competitor\r\n-          </button>\r\n-        </div>\r\n-\r\n+      <!-- Competitors Section (Dynamic Array) -->\r\n+<div id=\"competitorsSection\">\r\n+    <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n+    <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n+      <!-- One competitor is added by default -->\r\n+    </div>\r\n+    <button\r\n+      type=\"button\"\r\n+      class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n+      onclick=\"addCompetitor()\"\r\n+    >\r\n+      Add Competitor\r\n+    </button>\r\n+  </div>\r\n+  \r\n         <!-- File Upload: Drag & Drop -->\r\n         <div>\r\n           <div\r\n             id=\"fileDropAreaOpportunity\"\r\n"
                },
                {
                    "date": 1741542493819,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n     <title>Opportunity Form - Update</title>\r\n     <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n     <script src=\"https://cdn.tailwindcss.com\"></script>\r\n     <style>\r\n-      /* Floating label & error styles (adapted from your code) */\r\n+      /* Floating label & error styles */\r\n       .floating-input {\r\n         display: block;\r\n         border: 1px solid #cae0f0;\r\n         border-radius: 12px;\r\n@@ -64,9 +64,9 @@\n       }\r\n       button[disabled] {\r\n         opacity: 0.6;\r\n       }\r\n-      /* Drag & drop file area style */\r\n+      /* Drag & Drop file area style */\r\n       .file-drop-area {\r\n         margin-top: 1rem;\r\n         border: 2px dashed #3b82f6;\r\n         border-radius: 8px;\r\n@@ -85,9 +85,9 @@\n     <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n       <h1 class=\"text-2xl font-semibold text-[#0D0D0C]\">Create Opportunity</h1>\r\n       <hr class=\"my-4\" />\r\n       <form id=\"opportunityForm\" class=\"space-y-6\">\r\n-        <!-- Grid of select, number, text, date, etc. fields -->\r\n+        <!-- Fields Grid -->\r\n         <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n           <!-- Lead (Select) -->\r\n           <div class=\"relative\">\r\n             <select\r\n@@ -209,24 +209,22 @@\n             <label for=\"assignedTo\" class=\"floating-label-select\">Assigned To</label>\r\n             <div class=\"error-message\" id=\"assignedToError\">This field is required.</div>\r\n           </div>\r\n         </div>\r\n-\r\n-      <!-- Competitors Section (Dynamic Array) -->\r\n-<div id=\"competitorsSection\">\r\n-    <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n-    <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n-      <!-- One competitor is added by default -->\r\n-    </div>\r\n-    <button\r\n-      type=\"button\"\r\n-      class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n-      onclick=\"addCompetitor()\"\r\n-    >\r\n-      Add Competitor\r\n-    </button>\r\n-  </div>\r\n-  \r\n+        <!-- Competitors Section (Dynamic Array) -->\r\n+        <div id=\"competitorsSection\">\r\n+          <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n+          <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n+            <!-- At least one competitor entry is added automatically -->\r\n+          </div>\r\n+          <button\r\n+            type=\"button\"\r\n+            class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n+            onclick=\"addCompetitor()\"\r\n+          >\r\n+            Add Competitor\r\n+          </button>\r\n+        </div>\r\n         <!-- File Upload: Drag & Drop -->\r\n         <div>\r\n           <div\r\n             id=\"fileDropAreaOpportunity\"\r\n@@ -240,9 +238,8 @@\n               >\r\n                 Drag & Drop your file or Browse\r\n               </span>\r\n               <div id=\"fileDropAreaImageOpportunity\">\r\n-                <!-- Insert your default SVG icon here if desired -->\r\n                 <svg width=\"103\" height=\"102\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                   <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\"/>\r\n                 </svg>\r\n               </div>\r\n@@ -250,9 +247,8 @@\n           </div>\r\n           <span id=\"currentFileNameSpanOpportunity\" class=\"mt-2 block text-sm text-gray-700\"></span>\r\n           <div class=\"error-message\" id=\"fileOpportunityError\">This field is required.</div>\r\n         </div>\r\n-\r\n         <!-- Notes (Textarea) -->\r\n         <div class=\"relative\">\r\n           <textarea\r\n             id=\"notes\"\r\n@@ -261,9 +257,8 @@\n           ></textarea>\r\n           <label for=\"notes\" class=\"floating-label\">Notes</label>\r\n           <div class=\"error-message\" id=\"notesError\">This field is required.</div>\r\n         </div>\r\n-\r\n         <!-- Details (Textarea) -->\r\n         <div class=\"relative\">\r\n           <textarea\r\n             id=\"details\"\r\n@@ -272,9 +267,8 @@\n           ></textarea>\r\n           <label for=\"details\" class=\"floating-label\">Details</label>\r\n           <div class=\"error-message\" id=\"detailsError\">This field is required.</div>\r\n         </div>\r\n-\r\n         <!-- Submit Buttons -->\r\n         <div class=\"flex gap-3 flex-wrap\">\r\n           <button\r\n             type=\"submit\"\r\n@@ -291,15 +285,14 @@\n           </a>\r\n         </div>\r\n       </form>\r\n     </div>\r\n-\r\n     <script>\r\n-      // Global variables for file name and competitor counter\r\n+      // Global variables for file upload and competitor counter\r\n       let currentFileNameOpportunity = \"\";\r\n       let competitorCounter = 1;\r\n-\r\n-      // Validate a given field (supports select, file, and text/number inputs)\r\n+      \r\n+      // Validate a given field\r\n       function validateField(field) {\r\n         const errorDiv = document.getElementById(field.id + \"Error\");\r\n         let valid = true;\r\n         if (field.tagName.toLowerCase() === \"select\") {\r\n@@ -309,14 +302,11 @@\n             const file = field.files[0];\r\n             if (file.size > 2 * 1024 * 1024) {\r\n               valid = false;\r\n               if (errorDiv) errorDiv.innerText = \"File must be less than 2MB.\";\r\n-            } else if (\r\n-              ![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)\r\n-            ) {\r\n+            } else if (![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)) {\r\n               valid = false;\r\n-              if (errorDiv)\r\n-                errorDiv.innerText = \"File must be a PDF or JPG/PNG.\";\r\n+              if (errorDiv) errorDiv.innerText = \"File must be a PDF or JPG/PNG.\";\r\n             } else {\r\n               valid = true;\r\n               if (errorDiv) errorDiv.innerText = \"\";\r\n             }\r\n@@ -333,10 +323,10 @@\n           if (errorDiv) errorDiv.style.display = \"none\";\r\n         }\r\n         return valid;\r\n       }\r\n-\r\n-      // Attach validation event listener to a field\r\n+      \r\n+      // Attach validation listener\r\n       function addValidationListener(field) {\r\n         if (\r\n           field.tagName.toLowerCase() === \"select\" ||\r\n           field.type === \"file\" ||\r\n@@ -346,9 +336,9 @@\n         } else {\r\n           field.addEventListener(\"input\", () => validateField(field));\r\n         }\r\n       }\r\n-\r\n+      \r\n       // Attach validation to standard fields\r\n       [\r\n         \"lead\",\r\n         \"stage\",\r\n@@ -366,14 +356,14 @@\n       ].forEach((id) => {\r\n         const field = document.getElementById(id);\r\n         if (field) addValidationListener(field);\r\n       });\r\n-\r\n+      \r\n       // Drag & Drop File Upload Logic for Opportunity File\r\n       const opportunityFileInput = document.getElementById(\"opportunityFile\");\r\n       const fileDropAreaOpportunity = document.getElementById(\"fileDropAreaOpportunity\");\r\n       const fileInputLabelOpportunity = document.getElementById(\"fileInputLabelOpportunity\");\r\n-\r\n+      \r\n       fileDropAreaOpportunity.addEventListener(\"click\", () => opportunityFileInput.click());\r\n       fileDropAreaOpportunity.addEventListener(\"dragover\", (e) => {\r\n         e.preventDefault();\r\n         fileDropAreaOpportunity.classList.add(\"bg-blue-100\");\r\n@@ -389,11 +379,11 @@\n           opportunityFileInput.files = e.dataTransfer.files;\r\n           handleOpportunityFileChange();\r\n         }\r\n       });\r\n-\r\n+      \r\n       opportunityFileInput.addEventListener(\"change\", handleOpportunityFileChange);\r\n-\r\n+      \r\n       function handleOpportunityFileChange() {\r\n         if (opportunityFileInput.files && opportunityFileInput.files.length > 0) {\r\n           const file = opportunityFileInput.files[0];\r\n           currentFileNameOpportunity = file.name;\r\n@@ -426,16 +416,16 @@\n             </svg>`;\r\n         }\r\n         validateField(opportunityFileInput);\r\n       }\r\n-\r\n+      \r\n       // Competitors dynamic field logic\r\n       function addCompetitor() {\r\n         const container = document.getElementById(\"competitorsContainer\");\r\n         const competitorDiv = document.createElement(\"div\");\r\n         competitorDiv.className = \"competitor-entry border p-4 rounded relative\";\r\n         competitorDiv.id = \"competitor_\" + competitorCounter;\r\n-\r\n+      \r\n         // Competitor Name Input\r\n         const nameDiv = document.createElement(\"div\");\r\n         nameDiv.className = \"relative mb-4\";\r\n         const nameInput = document.createElement(\"input\");\r\n@@ -453,9 +443,9 @@\n         nameError.innerText = \"This field is required.\";\r\n         nameDiv.appendChild(nameInput);\r\n         nameDiv.appendChild(nameLabel);\r\n         nameDiv.appendChild(nameError);\r\n-\r\n+      \r\n         // Competitor Attachment Input\r\n         const fileDiv = document.createElement(\"div\");\r\n         fileDiv.className = \"relative\";\r\n         const fileInput = document.createElement(\"input\");\r\n@@ -467,102 +457,120 @@\n         fileError.id = fileInput.id + \"Error\";\r\n         fileError.innerText = \"File is required.\";\r\n         fileDiv.appendChild(fileInput);\r\n         fileDiv.appendChild(fileError);\r\n-\r\n-        // Delete Button for competitor\r\n-        const deleteBtn = document.createElement(\"button\");\r\n-        deleteBtn.type = \"button\";\r\n-        deleteBtn.className = \"absolute top-0 right-0 bg-red-500 text-white px-2 py-1 rounded\";\r\n-        deleteBtn.innerText = \"Delete\";\r\n-        deleteBtn.onclick = function () {\r\n-          competitorDiv.remove();\r\n-        };\r\n-\r\n-        competitorDiv.appendChild(deleteBtn);\r\n+      \r\n+        // Append delete button only if this is not the first competitor entry.\r\n+        if (document.getElementById(\"competitorsContainer\").children.length > 0) {\r\n+          const deleteDiv = document.createElement(\"div\");\r\n+          deleteDiv.className = \"deleteBtn cursor-pointer absolute top-0 right-0\";\r\n+          deleteDiv.innerHTML = `\r\n+            <svg width=\"16\" height=\"17\" viewBox=\"0 0 16 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+              <g clip-path=\"url(#clip0_723_4826)\">\r\n+                <path d=\"M13.9987 2.84928H11.932C11.7773 2.09689 11.3679 1.42085 10.7729 0.935096C10.1778 0.449344 9.4335 0.183587 8.66536 0.182617L7.33203 0.182617C6.56389 0.183587 5.81958 0.449344 5.22453 0.935096C4.62948 1.42085 4.2201 2.09689 4.06536 2.84928H1.9987C1.82189 2.84928 1.65232 2.91952 1.52729 3.04455C1.40227 3.16957 1.33203 3.33914 1.33203 3.51595C1.33203 3.69276 1.40227 3.86233 1.52729 3.98735C1.65232 4.11238 1.82189 4.18262 1.9987 4.18262H2.66536V12.8493C2.66642 13.733 3.01795 14.5802 3.64284 15.2051C4.26774 15.83 5.11497 16.1816 5.9987 16.1826H9.9987C10.8824 16.1816 11.7297 15.83 12.3546 15.2051C12.9794 14.5802 13.331 13.733 13.332 12.8493V4.18262H13.9987C14.1755 4.18262 14.3451 4.11238 14.4701 3.98735C14.5951 3.86233 14.6654 3.69276 14.6654 3.51595C14.6654 3.33914 14.5951 3.16957 14.4701 3.04455C14.3451 2.91952 14.1755 2.84928 13.9987 2.84928ZM7.33203 1.51595H8.66536C9.07888 1.51646 9.48212 1.64487 9.81977 1.88358C10.1574 2.12229 10.413 2.45961 10.5514 2.84928H5.44603C5.58442 2.45961 5.83996 2.12229 6.17762 1.88358C6.51528 1.64487 6.91851 1.51646 7.33203 1.51595ZM11.9987 12.8493C11.9987 13.3797 11.788 13.8884 11.4129 14.2635C11.0378 14.6386 10.5291 14.8493 9.9987 14.8493H5.9987C5.46826 14.8493 4.95956 14.6386 4.58448 14.2635C4.20941 13.8884 3.9987 13.3797 3.9987 12.8493V4.18262H11.9987V12.8493Z\" fill=\"#E4899C\"/>\r\n+                <path d=\"M6.66667 12.1822C6.84348 12.1822 7.01304 12.112 7.13807 11.9869C7.26309 11.8619 7.33333 11.6923 7.33333 11.5155V7.51554C7.33333 7.33873 7.26309 7.16916 7.13807 7.04414C7.01304 6.91911 6.84348 6.84888 6.66667 6.84888C6.48985 6.84888 6.32029 6.91911 6.19526 7.04414C6.07024 7.16916 6 7.33873 6 7.51554V11.5155C6 11.6923 6.07024 11.8619 6.19526 11.9869C6.32029 12.112 6.48985 12.1822 6.66667 12.1822Z\" fill=\"#E4899C\"/>\r\n+                <path d=\"M9.33464 12.1822C9.51145 12.1822 9.68102 12.112 9.80605 11.9869C9.93107 11.8619 10.0013 11.6923 10.0013 11.5155V7.51554C10.0013 7.33873 9.93107 7.16916 9.80605 7.04414C9.68102 6.91911 9.51145 6.84888 9.33464 6.84888C9.15783 6.84888 8.98826 6.91911 8.86323 7.04414C8.73821 7.16916 8.66797 7.33873 8.66797 7.51554V11.5155C8.66797 11.6923 8.73821 11.8619 8.86323 11.9869C8.98826 12.112 9.15783 12.1822 9.33464 12.1822Z\" fill=\"#E4899C\"/>\r\n+              </g>\r\n+              <defs>\r\n+                <clipPath id=\"clip0_723_4826\">\r\n+                  <rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(0 0.182617)\"/>\r\n+                </clipPath>\r\n+              </defs>\r\n+            </svg>\r\n+            <p class='text-[12px] text-[#BBB6B0] font-[600]'>Delete</p>\r\n+          `;\r\n+          deleteDiv.onclick = function () {\r\n+            competitorDiv.remove();\r\n+          };\r\n+          competitorDiv.appendChild(deleteDiv);\r\n+        }\r\n+      \r\n         competitorDiv.appendChild(nameDiv);\r\n         competitorDiv.appendChild(fileDiv);\r\n         container.appendChild(competitorDiv);\r\n-\r\n+      \r\n         competitorCounter++;\r\n-        addValidationListener(nameInput);\r\n-        addValidationListener(fileInput);\r\n+        // Optionally attach validation listeners for nameInput and fileInput here.\r\n       }\r\n-\r\n-      // Form submission simulation with validations\r\n-      document\r\n-        .getElementById(\"opportunityForm\")\r\n-        .addEventListener(\"submit\", function (event) {\r\n-          event.preventDefault();\r\n-          let firstError = null;\r\n-          const fieldIds = [\r\n-            \"lead\",\r\n-            \"stage\",\r\n-            \"expectedValueNumber\",\r\n-            \"expectedValueText\",\r\n-            \"status\",\r\n-            \"priority\",\r\n-            \"closureDate\",\r\n-            \"actualValue\",\r\n-            \"lossReason\",\r\n-            \"assignedTo\",\r\n-            \"opportunityFile\",\r\n-            \"notes\",\r\n-            \"details\"\r\n-          ];\r\n-          fieldIds.forEach((id) => {\r\n-            const field = document.getElementById(id);\r\n-            if (field && !validateField(field)) {\r\n-              field.classList.add(\"error\");\r\n-              const errorDiv = document.getElementById(id + \"Error\");\r\n-              if (errorDiv) errorDiv.style.display = \"block\";\r\n-              if (!firstError) firstError = field;\r\n-            }\r\n-          });\r\n-\r\n-          // Validate each competitor entry\r\n-          document.querySelectorAll(\".competitor-entry\").forEach((entry) => {\r\n+      \r\n+      // Ensure at least one competitor entry is present on page load.\r\n+      document.addEventListener(\"DOMContentLoaded\", function () {\r\n+        if (document.getElementById(\"competitorsContainer\").children.length === 0) {\r\n+          addCompetitor();\r\n+        }\r\n+      });\r\n+      \r\n+      // Form submission simulation with validations.\r\n+      document.getElementById(\"opportunityForm\").addEventListener(\"submit\", function (event) {\r\n+        event.preventDefault();\r\n+        let firstError = null;\r\n+        const fieldIds = [\r\n+          \"lead\",\r\n+          \"stage\",\r\n+          \"expectedValueNumber\",\r\n+          \"expectedValueText\",\r\n+          \"status\",\r\n+          \"priority\",\r\n+          \"closureDate\",\r\n+          \"actualValue\",\r\n+          \"lossReason\",\r\n+          \"assignedTo\",\r\n+          \"opportunityFile\",\r\n+          \"notes\",\r\n+          \"details\"\r\n+        ];\r\n+        fieldIds.forEach((id) => {\r\n+          const field = document.getElementById(id);\r\n+          if (field && !validateField(field)) {\r\n+            field.classList.add(\"error\");\r\n+            const errorDiv = document.getElementById(id + \"Error\");\r\n+            if (errorDiv) errorDiv.style.display = \"block\";\r\n+            if (!firstError) firstError = field;\r\n+          }\r\n+        });\r\n+      \r\n+        // Validate each competitor entry.\r\n+        document.querySelectorAll(\".competitor-entry\").forEach((entry) => {\r\n+          const nameInput = entry.querySelector(\"input[type='text']\");\r\n+          const fileInput = entry.querySelector(\"input[type='file']\");\r\n+          if (nameInput && nameInput.value.trim() === \"\") {\r\n+            nameInput.classList.add(\"error\");\r\n+            const err = document.getElementById(nameInput.id + \"Error\");\r\n+            if (err) err.style.display = \"block\";\r\n+            if (!firstError) firstError = nameInput;\r\n+          }\r\n+          if (fileInput && fileInput.files.length === 0) {\r\n+            fileInput.classList.add(\"error\");\r\n+            const err = document.getElementById(fileInput.id + \"Error\");\r\n+            if (err) err.style.display = \"block\";\r\n+            if (!firstError) firstError = fileInput;\r\n+          }\r\n+        });\r\n+      \r\n+        if (firstError) {\r\n+          firstError.focus();\r\n+        } else {\r\n+          const submitButton = document.getElementById(\"submitButton\");\r\n+          submitButton.disabled = true;\r\n+          submitButton.innerText = \"Creating...\";\r\n+          // Simulate form submission and collecting FormData.\r\n+          const formData = new FormData(document.getElementById(\"opportunityForm\"));\r\n+          // Append competitor data.\r\n+          document.querySelectorAll(\".competitor-entry\").forEach((entry, index) => {\r\n             const nameInput = entry.querySelector(\"input[type='text']\");\r\n             const fileInput = entry.querySelector(\"input[type='file']\");\r\n-            if (nameInput && nameInput.value.trim() === \"\") {\r\n-              nameInput.classList.add(\"error\");\r\n-              const err = document.getElementById(nameInput.id + \"Error\");\r\n-              if (err) err.style.display = \"block\";\r\n-              if (!firstError) firstError = nameInput;\r\n+            formData.append(`competitors[${index}][name]`, nameInput.value);\r\n+            if (fileInput.files.length > 0) {\r\n+              formData.append(`competitors[${index}][file]`, fileInput.files[0]);\r\n             }\r\n-            if (fileInput && fileInput.files.length === 0) {\r\n-              fileInput.classList.add(\"error\");\r\n-              const err = document.getElementById(fileInput.id + \"Error\");\r\n-              if (err) err.style.display = \"block\";\r\n-              if (!firstError) firstError = fileInput;\r\n-            }\r\n           });\r\n-\r\n-          if (firstError) {\r\n-            firstError.focus();\r\n-          } else {\r\n-            const submitButton = document.getElementById(\"submitButton\");\r\n-            submitButton.disabled = true;\r\n-            submitButton.innerText = \"Creating...\";\r\n-            // Here you can collect the form data and send it to your API.\r\n-            // For example:\r\n-            const formData = new FormData(document.getElementById(\"opportunityForm\"));\r\n-            // Append competitor data\r\n-            document.querySelectorAll(\".competitor-entry\").forEach((entry, index) => {\r\n-              const nameInput = entry.querySelector(\"input[type='text']\");\r\n-              const fileInput = entry.querySelector(\"input[type='file']\");\r\n-              formData.append(`competitors[${index}][name]`, nameInput.value);\r\n-              if (fileInput.files.length > 0) {\r\n-                formData.append(`competitors[${index}][file]`, fileInput.files[0]);\r\n-              }\r\n-            });\r\n-            console.log(\"Form Data Submitted\");\r\n-            setTimeout(() => {\r\n-              submitButton.disabled = false;\r\n-              submitButton.innerText = \"Create Opportunity\";\r\n-              alert(\"Opportunity Created Successfully!\");\r\n-            }, 2000);\r\n-          }\r\n-        });\r\n+          console.log(\"Form Data Submitted\");\r\n+          setTimeout(() => {\r\n+            submitButton.disabled = false;\r\n+            submitButton.innerText = \"Create Opportunity\";\r\n+            alert(\"Opportunity Created Successfully!\");\r\n+          }, 2000);\r\n+        }\r\n+      });\r\n     </script>\r\n   </body>\r\n </html>\r\n"
                },
                {
                    "date": 1741542932612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -297,8 +297,9 @@\n         let valid = true;\r\n         if (field.tagName.toLowerCase() === \"select\") {\r\n           valid = field.value !== \"\";\r\n         } else if (field.type === \"file\") {\r\n+            console.log(field.files);\r\n           if (field.files && field.files.length > 0) {\r\n             const file = field.files[0];\r\n             if (file.size > 2 * 1024 * 1024) {\r\n               valid = false;\r\n"
                },
                {
                    "date": 1741542952185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -296,10 +296,11 @@\n         const errorDiv = document.getElementById(field.id + \"Error\");\r\n         let valid = true;\r\n         if (field.tagName.toLowerCase() === \"select\") {\r\n           valid = field.value !== \"\";\r\n+          console.log(field);\r\n+\r\n         } else if (field.type === \"file\") {\r\n-            console.log(field.files);\r\n           if (field.files && field.files.length > 0) {\r\n             const file = field.files[0];\r\n             if (file.size > 2 * 1024 * 1024) {\r\n               valid = false;\r\n"
                },
                {
                    "date": 1741542973566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -292,13 +292,14 @@\n       let competitorCounter = 1;\r\n       \r\n       // Validate a given field\r\n       function validateField(field) {\r\n+        console.log(field);\r\n+\r\n         const errorDiv = document.getElementById(field.id + \"Error\");\r\n         let valid = true;\r\n         if (field.tagName.toLowerCase() === \"select\") {\r\n           valid = field.value !== \"\";\r\n-          console.log(field);\r\n \r\n         } else if (field.type === \"file\") {\r\n           if (field.files && field.files.length > 0) {\r\n             const file = field.files[0];\r\n"
                },
                {
                    "date": 1741543184048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,582 @@\n+<!DOCTYPE html>\r\n+<html lang=\"en\">\r\n+  <head>\r\n+    <meta charset=\"UTF-8\" />\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n+    <title>Opportunity Form - Update</title>\r\n+    <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n+    <script src=\"https://cdn.tailwindcss.com\"></script>\r\n+    <style>\r\n+      /* Floating label & error styles */\r\n+      .floating-input {\r\n+        display: block;\r\n+        border: 1px solid #cae0f0;\r\n+        border-radius: 12px;\r\n+        padding: 1rem 0.625rem 0.2rem;\r\n+        width: 100%;\r\n+        font-size: 16px;\r\n+        color: #000;\r\n+        font-weight: 400;\r\n+        appearance: none;\r\n+        outline: none;\r\n+        transition: border-color 0.3s;\r\n+      }\r\n+      .floating-input:focus {\r\n+        border-color: #2563eb;\r\n+      }\r\n+      .floating-input::placeholder {\r\n+        color: transparent;\r\n+      }\r\n+      .floating-label,\r\n+      .floating-label-select {\r\n+        position: absolute;\r\n+        left: 0.625rem;\r\n+        top: 1rem;\r\n+        font-size: 12px;\r\n+        color: #bbb6b0;\r\n+        pointer-events: none;\r\n+        transition: transform 0.3s, color 0.3s;\r\n+        transform-origin: 0;\r\n+      }\r\n+      .floating-input:focus ~ .floating-label,\r\n+      .floating-input:not(:placeholder-shown) ~ .floating-label {\r\n+        transform: translateY(-1rem) scale(0.75);\r\n+        color: #bbb6b0;\r\n+        font-weight: 600;\r\n+      }\r\n+      select:focus ~ .floating-label-select,\r\n+      select.float ~ .floating-label-select {\r\n+        top: 2px;\r\n+        font-size: 10px !important;\r\n+        font-weight: 600;\r\n+        color: #bbb6b0;\r\n+      }\r\n+      select:focus ~ .floating-label-select {\r\n+        color: #2563eb;\r\n+      }\r\n+      .error {\r\n+        border: 1px solid red !important;\r\n+      }\r\n+      .error-message {\r\n+        color: red;\r\n+        font-size: 12px;\r\n+        display: none;\r\n+      }\r\n+      button[disabled] {\r\n+        opacity: 0.6;\r\n+      }\r\n+      /* Drag & Drop file area style */\r\n+      .file-drop-area {\r\n+        margin-top: 1rem;\r\n+        border: 2px dashed #3b82f6;\r\n+        border-radius: 8px;\r\n+        padding: 2rem;\r\n+        text-align: center;\r\n+        background: #eef5fa;\r\n+        cursor: pointer;\r\n+        transition: background 0.3s;\r\n+      }\r\n+      .file-drop-area:hover {\r\n+        background: #dbeafe;\r\n+      }\r\n+    </style>\r\n+  </head>\r\n+  <body class=\"bg-[#EEF5FA]\">\r\n+    <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n+      <h1 class=\"text-2xl font-semibold text-[#0D0D0C]\">Create Opportunity</h1>\r\n+      <hr class=\"my-4\" />\r\n+      <form id=\"opportunityForm\" class=\"space-y-6\">\r\n+        <!-- Fields Grid -->\r\n+        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n+          <!-- Lead (Select) -->\r\n+          <div class=\"relative\">\r\n+            <select\r\n+              id=\"lead\"\r\n+              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+            >\r\n+              <option value=\"\" selected disabled hidden></option>\r\n+              <option value=\"lead1\">Lead 1</option>\r\n+              <option value=\"lead2\">Lead 2</option>\r\n+            </select>\r\n+            <label for=\"lead\" class=\"floating-label-select\">Lead</label>\r\n+            <div class=\"error-message\" id=\"leadError\">This field is required.</div>\r\n+          </div>\r\n+          <!-- Stage (Select) -->\r\n+          <div class=\"relative\">\r\n+            <select\r\n+              id=\"stage\"\r\n+              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+            >\r\n+              <option value=\"\" selected disabled hidden></option>\r\n+              <option value=\"stage1\">Stage 1</option>\r\n+              <option value=\"stage2\">Stage 2</option>\r\n+            </select>\r\n+            <label for=\"stage\" class=\"floating-label-select\">Stage</label>\r\n+            <div class=\"error-message\" id=\"stageError\">This field is required.</div>\r\n+          </div>\r\n+          <!-- Expected Value (Number) -->\r\n+          <div class=\"relative\">\r\n+            <input\r\n+              type=\"number\"\r\n+              id=\"expectedValueNumber\"\r\n+              placeholder=\" \"\r\n+              class=\"floating-input peer\"\r\n+            />\r\n+            <label for=\"expectedValueNumber\" class=\"floating-label\"\r\n+              >Expected Value (Number)</label\r\n+            >\r\n+            <div class=\"error-message\" id=\"expectedValueNumberError\"\r\n+              >This field is required.</div\r\n+            >\r\n+          </div>\r\n+          <!-- Expected Value (Text) -->\r\n+          <div class=\"relative\">\r\n+            <input\r\n+              type=\"text\"\r\n+              id=\"expectedValueText\"\r\n+              placeholder=\" \"\r\n+              class=\"floating-input peer\"\r\n+            />\r\n+            <label for=\"expectedValueText\" class=\"floating-label\"\r\n+              >Expected Value (Text)</label\r\n+            >\r\n+            <div class=\"error-message\" id=\"expectedValueTextError\"\r\n+              >This field is required.</div\r\n+            >\r\n+          </div>\r\n+          <!-- Status (Select) -->\r\n+          <div class=\"relative\">\r\n+            <select\r\n+              id=\"status\"\r\n+              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+            >\r\n+              <option value=\"\" selected disabled hidden></option>\r\n+              <option value=\"open\">Open</option>\r\n+              <option value=\"closed\">Closed</option>\r\n+            </select>\r\n+            <label for=\"status\" class=\"floating-label-select\">Status</label>\r\n+            <div class=\"error-message\" id=\"statusError\">This field is required.</div>\r\n+          </div>\r\n+          <!-- Priority (Select) -->\r\n+          <div class=\"relative\">\r\n+            <select\r\n+              id=\"priority\"\r\n+              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+            >\r\n+              <option value=\"\" selected disabled hidden></option>\r\n+              <option value=\"low\">Low</option>\r\n+              <option value=\"medium\">Medium</option>\r\n+              <option value=\"high\">High</option>\r\n+            </select>\r\n+            <label for=\"priority\" class=\"floating-label-select\">Priority</label>\r\n+            <div class=\"error-message\" id=\"priorityError\">This field is required.</div>\r\n+          </div>\r\n+          <!-- Closure Date (Date) -->\r\n+          <div class=\"relative\">\r\n+            <input\r\n+              type=\"date\"\r\n+              id=\"closureDate\"\r\n+              placeholder=\" \"\r\n+              class=\"floating-input peer\"\r\n+            />\r\n+            <label for=\"closureDate\" class=\"floating-label\">Closure Date</label>\r\n+            <div class=\"error-message\" id=\"closureDateError\">This field is required.</div>\r\n+          </div>\r\n+          <!-- Actual Value (Number) -->\r\n+          <div class=\"relative\">\r\n+            <input\r\n+              type=\"number\"\r\n+              id=\"actualValue\"\r\n+              placeholder=\" \"\r\n+              class=\"floating-input peer\"\r\n+            />\r\n+            <label for=\"actualValue\" class=\"floating-label\">Actual Value</label>\r\n+            <div class=\"error-message\" id=\"actualValueError\">This field is required.</div>\r\n+          </div>\r\n+          <!-- Loss Reason (Text) -->\r\n+          <div class=\"relative\">\r\n+            <input\r\n+              type=\"text\"\r\n+              id=\"lossReason\"\r\n+              placeholder=\" \"\r\n+              class=\"floating-input peer\"\r\n+            />\r\n+            <label for=\"lossReason\" class=\"floating-label\">Loss Reason</label>\r\n+            <div class=\"error-message\" id=\"lossReasonError\">This field is required.</div>\r\n+          </div>\r\n+          <!-- Assigned To (Select) -->\r\n+          <div class=\"relative\">\r\n+            <select\r\n+              id=\"assignedTo\"\r\n+              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+            >\r\n+              <option value=\"\" selected disabled hidden></option>\r\n+              <option value=\"user1\">User 1</option>\r\n+              <option value=\"user2\">User 2</option>\r\n+            </select>\r\n+            <label for=\"assignedTo\" class=\"floating-label-select\">Assigned To</label>\r\n+            <div class=\"error-message\" id=\"assignedToError\">This field is required.</div>\r\n+          </div>\r\n+        </div>\r\n+        <!-- Competitors Section (Dynamic Array) -->\r\n+        <div id=\"competitorsSection\">\r\n+          <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n+          <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n+            <!-- At least one competitor entry is added automatically -->\r\n+          </div>\r\n+          <button\r\n+            type=\"button\"\r\n+            class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n+            onclick=\"addCompetitor()\"\r\n+          >\r\n+            Add Competitor\r\n+          </button>\r\n+        </div>\r\n+        <!-- File Upload: Drag & Drop -->\r\n+        <div>\r\n+          <div id=\"fileDropAreaOpportunity\" class=\"file-drop-area\">\r\n+            <input type=\"file\" id=\"opportunityFile\" class=\"hidden\" />\r\n+            <div class=\"flex flex-col justify-center items-center gap-4\">\r\n+              <span\r\n+                class=\"text-[#559BD0] font-bold text-xl\"\r\n+                id=\"fileInputLabelOpportunity\"\r\n+              >\r\n+                Drag & Drop your file or Browse\r\n+              </span>\r\n+              <div id=\"fileDropAreaImageOpportunity\">\r\n+                <svg width=\"103\" height=\"102\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                  <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\"/>\r\n+                </svg>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+          <span id=\"currentFileNameSpanOpportunity\" class=\"mt-2 block text-sm text-gray-700\"></span>\r\n+          <div class=\"error-message\" id=\"fileOpportunityError\">This field is required.</div>\r\n+        </div>\r\n+        <!-- Notes (Textarea) -->\r\n+        <div class=\"relative\">\r\n+          <textarea\r\n+            id=\"notes\"\r\n+            placeholder=\" \"\r\n+            class=\"block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black border border-[#CAE0F0] peer h-32\"\r\n+          ></textarea>\r\n+          <label for=\"notes\" class=\"floating-label\">Notes</label>\r\n+          <div class=\"error-message\" id=\"notesError\">This field is required.</div>\r\n+        </div>\r\n+        <!-- Details (Textarea) -->\r\n+        <div class=\"relative\">\r\n+          <textarea\r\n+            id=\"details\"\r\n+            placeholder=\" \"\r\n+            class=\"block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black border border-[#CAE0F0] peer h-36\"\r\n+          ></textarea>\r\n+          <label for=\"details\" class=\"floating-label\">Details</label>\r\n+          <div class=\"error-message\" id=\"detailsError\">This field is required.</div>\r\n+        </div>\r\n+        <!-- Submit Buttons -->\r\n+        <div class=\"flex gap-3 flex-wrap\">\r\n+          <button\r\n+            type=\"submit\"\r\n+            id=\"submitButton\"\r\n+            class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\"\r\n+          >\r\n+            Create Opportunity\r\n+          </button>\r\n+          <a\r\n+            href=\"dashboard.html\"\r\n+            class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\"\r\n+          >\r\n+            Cancel\r\n+          </a>\r\n+        </div>\r\n+      </form>\r\n+    </div>\r\n+    <script>\r\n+      // Global variables for file upload and competitor counter\r\n+      let currentFileNameOpportunity = \"\";\r\n+      let competitorCounter = 1;\r\n+      \r\n+      // Validate a given field\r\n+      function validateField(field) {\r\n+        console.log(field);\r\n+        const errorDiv = document.getElementById(field.id + \"Error\");\r\n+        let valid = true;\r\n+        if (field.tagName.toLowerCase() === \"select\") {\r\n+          valid = field.value !== \"\";\r\n+        } else if (field.type === \"file\") {\r\n+          if (field.files && field.files.length > 0) {\r\n+            const file = field.files[0];\r\n+            if (file.size > 2 * 1024 * 1024) {\r\n+              valid = false;\r\n+              if (errorDiv) errorDiv.innerText = \"File must be less than 2MB.\";\r\n+            } else if (\r\n+              ![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)\r\n+            ) {\r\n+              valid = false;\r\n+              if (errorDiv)\r\n+                errorDiv.innerText = \"File must be a PDF or JPG/PNG.\";\r\n+            } else {\r\n+              valid = true;\r\n+              if (errorDiv) errorDiv.innerText = \"\";\r\n+            }\r\n+          } else {\r\n+            valid = currentFileNameOpportunity !== \"\";\r\n+            if (!valid && errorDiv)\r\n+              errorDiv.innerText = \"This field is required.\";\r\n+          }\r\n+        } else {\r\n+          valid = field.value.trim() !== \"\";\r\n+        }\r\n+        if (valid) {\r\n+          field.classList.remove(\"error\");\r\n+          if (errorDiv) errorDiv.style.display = \"none\";\r\n+        }\r\n+        return valid;\r\n+      }\r\n+      \r\n+      // Attach validation listener\r\n+      function addValidationListener(field) {\r\n+        if (\r\n+          field.tagName.toLowerCase() === \"select\" ||\r\n+          field.type === \"file\" ||\r\n+          field.type === \"date\"\r\n+        ) {\r\n+          field.addEventListener(\"change\", () => validateField(field));\r\n+        } else {\r\n+          field.addEventListener(\"input\", () => validateField(field));\r\n+        }\r\n+      }\r\n+      \r\n+      // Attach validation to standard fields\r\n+      [\r\n+        \"lead\",\r\n+        \"stage\",\r\n+        \"expectedValueNumber\",\r\n+        \"expectedValueText\",\r\n+        \"status\",\r\n+        \"priority\",\r\n+        \"closureDate\",\r\n+        \"actualValue\",\r\n+        \"lossReason\",\r\n+        \"assignedTo\",\r\n+        \"opportunityFile\",\r\n+        \"notes\",\r\n+        \"details\"\r\n+      ].forEach((id) => {\r\n+        const field = document.getElementById(id);\r\n+        if (field) addValidationListener(field);\r\n+      });\r\n+      \r\n+      // Drag & Drop File Upload Logic for Opportunity File\r\n+      const opportunityFileInput = document.getElementById(\"opportunityFile\");\r\n+      const fileDropAreaOpportunity = document.getElementById(\"fileDropAreaOpportunity\");\r\n+      const fileInputLabelOpportunity = document.getElementById(\"fileInputLabelOpportunity\");\r\n+      \r\n+      fileDropAreaOpportunity.addEventListener(\"click\", () => opportunityFileInput.click());\r\n+      fileDropAreaOpportunity.addEventListener(\"dragover\", (e) => {\r\n+        e.preventDefault();\r\n+        fileDropAreaOpportunity.classList.add(\"bg-blue-100\");\r\n+      });\r\n+      fileDropAreaOpportunity.addEventListener(\"dragleave\", (e) => {\r\n+        e.preventDefault();\r\n+        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n+      });\r\n+      fileDropAreaOpportunity.addEventListener(\"drop\", (e) => {\r\n+        e.preventDefault();\r\n+        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n+        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n+          opportunityFileInput.files = e.dataTransfer.files;\r\n+          handleOpportunityFileChange();\r\n+        }\r\n+      });\r\n+      \r\n+      opportunityFileInput.addEventListener(\"change\", handleOpportunityFileChange);\r\n+      \r\n+      function handleOpportunityFileChange() {\r\n+        if (opportunityFileInput.files && opportunityFileInput.files.length > 0) {\r\n+          const file = opportunityFileInput.files[0];\r\n+          currentFileNameOpportunity = file.name;\r\n+          fileInputLabelOpportunity.textContent = \"Selected File: \" + currentFileNameOpportunity;\r\n+          if (file.type.startsWith(\"image/\")) {\r\n+            const reader = new FileReader();\r\n+            reader.onload = function (e) {\r\n+              document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n+                `<img src=\"${e.target.result}\" alt=\"Image Preview\" class=\"max-w-full max-h-48\" />`;\r\n+            };\r\n+            reader.readAsDataURL(file);\r\n+          } else if (file.type === \"application/pdf\") {\r\n+            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n+              `<svg width=\"100\" height=\"100\">\r\n+                <rect width=\"100\" height=\"100\" rx=\"15\" fill=\"#E53E3E\"/>\r\n+                <text x=\"50\" y=\"60\" text-anchor=\"middle\" fill=\"white\" font-size=\"40\" font-family=\"Arial\" font-weight=\"bold\">PDF</text>\r\n+              </svg>`;\r\n+          } else {\r\n+            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n+              `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n+                <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n+              </svg>`;\r\n+          }\r\n+        } else {\r\n+          currentFileNameOpportunity = \"\";\r\n+          fileInputLabelOpportunity.textContent = \"Drag & Drop your file or Browse\";\r\n+          document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n+            `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n+              <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n+            </svg>`;\r\n+        }\r\n+        validateField(opportunityFileInput);\r\n+      }\r\n+      \r\n+      // Competitors dynamic field logic\r\n+      function addCompetitor() {\r\n+        const container = document.getElementById(\"competitorsContainer\");\r\n+        const competitorDiv = document.createElement(\"div\");\r\n+        competitorDiv.className = \"competitor-entry border p-4 rounded relative\";\r\n+        competitorDiv.id = \"competitor_\" + competitorCounter;\r\n+      \r\n+        // Competitor Name Input\r\n+        const nameDiv = document.createElement(\"div\");\r\n+        nameDiv.className = \"relative mb-4\";\r\n+        const nameInput = document.createElement(\"input\");\r\n+        nameInput.type = \"text\";\r\n+        nameInput.id = \"competitorName_\" + competitorCounter;\r\n+        nameInput.placeholder = \" \";\r\n+        nameInput.className = \"floating-input peer\";\r\n+        // Set name attribute so the value is included on form submission\r\n+        nameInput.setAttribute(\"name\", \"competitors[\" + competitorCounter + \"][name]\");\r\n+        const nameLabel = document.createElement(\"label\");\r\n+        nameLabel.htmlFor = nameInput.id;\r\n+        nameLabel.className = \"floating-label\";\r\n+        nameLabel.innerText = \"Competitor Name\";\r\n+        const nameError = document.createElement(\"div\");\r\n+        nameError.className = \"error-message\";\r\n+        nameError.id = nameInput.id + \"Error\";\r\n+        nameError.innerText = \"This field is required.\";\r\n+        nameDiv.appendChild(nameInput);\r\n+        nameDiv.appendChild(nameLabel);\r\n+        nameDiv.appendChild(nameError);\r\n+      \r\n+        // Competitor Attachment Input\r\n+        const fileDiv = document.createElement(\"div\");\r\n+        fileDiv.className = \"relative\";\r\n+        const fileInput = document.createElement(\"input\");\r\n+        fileInput.type = \"file\";\r\n+        fileInput.id = \"competitorFile_\" + competitorCounter;\r\n+        fileInput.className = \"block\";\r\n+        // Set name attribute so the file is included on form submission\r\n+        fileInput.setAttribute(\"name\", \"competitors[\" + competitorCounter + \"][file]\");\r\n+        const fileError = document.createElement(\"div\");\r\n+        fileError.className = \"error-message\";\r\n+        fileError.id = fileInput.id + \"Error\";\r\n+        fileError.innerText = \"File is required.\";\r\n+        fileDiv.appendChild(fileInput);\r\n+        fileDiv.appendChild(fileError);\r\n+      \r\n+        // Append delete button only if this is not the first competitor entry.\r\n+        if (document.getElementById(\"competitorsContainer\").children.length > 0) {\r\n+          const deleteDiv = document.createElement(\"div\");\r\n+          deleteDiv.className = \"deleteBtn cursor-pointer absolute top-0 right-0\";\r\n+          deleteDiv.innerHTML = `\r\n+            <svg width=\"16\" height=\"17\" viewBox=\"0 0 16 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+              <g clip-path=\"url(#clip0_723_4826)\">\r\n+                <path d=\"M13.9987 2.84928H11.932C11.7773 2.09689 11.3679 1.42085 10.7729 0.935096C10.1778 0.449344 9.4335 0.183587 8.66536 0.182617L7.33203 0.182617C6.56389 0.183587 5.81958 0.449344 5.22453 0.935096C4.62948 1.42085 4.2201 2.09689 4.06536 2.84928H1.9987C1.82189 2.84928 1.65232 2.91952 1.52729 3.04455C1.40227 3.16957 1.33203 3.33914 1.33203 3.51595C1.33203 3.69276 1.40227 3.86233 1.52729 3.98735C1.65232 4.11238 1.82189 4.18262 1.9987 4.18262H2.66536V12.8493C2.66642 13.733 3.01795 14.5802 3.64284 15.2051C4.26774 15.83 5.11497 16.1816 5.9987 16.1826H9.9987C10.8824 16.1816 11.7297 15.83 12.3546 15.2051C12.9794 14.5802 13.331 13.733 13.332 12.8493V4.18262H13.9987C14.1755 4.18262 14.3451 4.11238 14.4701 3.98735C14.5951 3.86233 14.6654 3.69276 14.6654 3.51595C14.6654 3.33914 14.5951 3.16957 14.4701 3.04455C14.3451 2.91952 14.1755 2.84928 13.9987 2.84928ZM7.33203 1.51595H8.66536C9.07888 1.51646 9.48212 1.64487 9.81977 1.88358C10.1574 2.12229 10.413 2.45961 10.5514 2.84928H5.44603C5.58442 2.45961 5.83996 2.12229 6.17762 1.88358C6.51528 1.64487 6.91851 1.51646 7.33203 1.51595ZM11.9987 12.8493C11.9987 13.3797 11.788 13.8884 11.4129 14.2635C11.0378 14.6386 10.5291 14.8493 9.9987 14.8493H5.9987C5.46826 14.8493 4.95956 14.6386 4.58448 14.2635C4.20941 13.8884 3.9987 13.3797 3.9987 12.8493V4.18262H11.9987V12.8493Z\" fill=\"#E4899C\"/>\r\n+                <path d=\"M6.66667 12.1822C6.84348 12.1822 7.01304 12.112 7.13807 11.9869C7.26309 11.8619 7.33333 11.6923 7.33333 11.5155V7.51554C7.33333 7.33873 7.26309 7.16916 7.13807 7.04414C7.01304 6.91911 6.84348 6.84888 6.66667 6.84888C6.48985 6.84888 6.32029 6.91911 6.19526 7.04414C6.07024 7.16916 6 7.33873 6 7.51554V11.5155C6 11.6923 6.07024 11.8619 6.19526 11.9869C6.32029 12.112 6.48985 12.1822 6.66667 12.1822Z\" fill=\"#E4899C\"/>\r\n+                <path d=\"M9.33464 12.1822C9.51145 12.1822 9.68102 12.112 9.80605 11.9869C9.93107 11.8619 10.0013 11.6923 10.0013 11.5155V7.51554C10.0013 7.33873 9.93107 7.16916 9.80605 7.04414C9.68102 6.91911 9.51145 6.84888 9.33464 6.84888C9.15783 6.84888 8.98826 6.91911 8.86323 7.04414C8.73821 7.16916 8.66797 7.33873 8.66797 7.51554V11.5155C8.66797 11.6923 8.73821 11.8619 8.86323 11.9869C8.98826 12.112 9.15783 12.1822 9.33464 12.1822Z\" fill=\"#E4899C\"/>\r\n+              </g>\r\n+              <defs>\r\n+                <clipPath id=\"clip0_723_4826\">\r\n+                  <rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(0 0.182617)\"/>\r\n+                </clipPath>\r\n+              </defs>\r\n+            </svg>\r\n+            <p class='text-[12px] text-[#BBB6B0] font-[600]'>Delete</p>\r\n+          `;\r\n+          deleteDiv.onclick = function () {\r\n+            competitorDiv.remove();\r\n+          };\r\n+          competitorDiv.appendChild(deleteDiv);\r\n+        }\r\n+      \r\n+        competitorDiv.appendChild(nameDiv);\r\n+        competitorDiv.appendChild(fileDiv);\r\n+        container.appendChild(competitorDiv);\r\n+      \r\n+        competitorCounter++;\r\n+      }\r\n+      \r\n+      // Ensure at least one competitor entry is present on page load.\r\n+      document.addEventListener(\"DOMContentLoaded\", function () {\r\n+        if (document.getElementById(\"competitorsContainer\").children.length === 0) {\r\n+          addCompetitor();\r\n+        }\r\n+      });\r\n+      \r\n+      // Form submission simulation with validations.\r\n+      document.getElementById(\"opportunityForm\").addEventListener(\"submit\", function (event) {\r\n+        event.preventDefault();\r\n+        let firstError = null;\r\n+        const fieldIds = [\r\n+          \"lead\",\r\n+          \"stage\",\r\n+          \"expectedValueNumber\",\r\n+          \"expectedValueText\",\r\n+          \"status\",\r\n+          \"priority\",\r\n+          \"closureDate\",\r\n+          \"actualValue\",\r\n+          \"lossReason\",\r\n+          \"assignedTo\",\r\n+          \"opportunityFile\",\r\n+          \"notes\",\r\n+          \"details\"\r\n+        ];\r\n+        fieldIds.forEach((id) => {\r\n+          const field = document.getElementById(id);\r\n+          if (field && !validateField(field)) {\r\n+            field.classList.add(\"error\");\r\n+            const errorDiv = document.getElementById(id + \"Error\");\r\n+            if (errorDiv) errorDiv.style.display = \"block\";\r\n+            if (!firstError) firstError = field;\r\n+          }\r\n+        });\r\n+      \r\n+        // Validate each competitor entry.\r\n+        document.querySelectorAll(\".competitor-entry\").forEach((entry) => {\r\n+          const nameInput = entry.querySelector(\"input[type='text']\");\r\n+          const fileInput = entry.querySelector(\"input[type='file']\");\r\n+          if (nameInput && nameInput.value.trim() === \"\") {\r\n+            nameInput.classList.add(\"error\");\r\n+            const err = document.getElementById(nameInput.id + \"Error\");\r\n+            if (err) err.style.display = \"block\";\r\n+            if (!firstError) firstError = nameInput;\r\n+          }\r\n+          if (fileInput && fileInput.files.length === 0) {\r\n+            fileInput.classList.add(\"error\");\r\n+            const err = document.getElementById(fileInput.id + \"Error\");\r\n+            if (err) err.style.display = \"block\";\r\n+            if (!firstError) firstError = fileInput;\r\n+          }\r\n+        });\r\n+      \r\n+        if (firstError) {\r\n+          firstError.focus();\r\n+        } else {\r\n+          const submitButton = document.getElementById(\"submitButton\");\r\n+          submitButton.disabled = true;\r\n+          submitButton.innerText = \"Creating...\";\r\n+          // Create a FormData object from the form.\r\n+          const formData = new FormData(document.getElementById(\"opportunityForm\"));\r\n+          // Log all formData entries to check competitor values.\r\n+          for (let [key, value] of formData.entries()) {\r\n+            console.log(key, value);\r\n+          }\r\n+          setTimeout(() => {\r\n+            submitButton.disabled = false;\r\n+            submitButton.innerText = \"Create Opportunity\";\r\n+            alert(\"Opportunity Created Successfully!\");\r\n+          }, 2000);\r\n+        }\r\n+      });\r\n+    </script>\r\n+  </body>\r\n+</html>\r\n"
                },
                {
                    "date": 1741543449191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,8 +78,19 @@\n       }\r\n       .file-drop-area:hover {\r\n         background: #dbeafe;\r\n       }\r\n+      /* Competitor specific classes */\r\n+      .competitor-entry {\r\n+        position: relative;\r\n+        border: 1px solid #cae0f0;\r\n+        padding: 1rem;\r\n+        border-radius: 8px;\r\n+      }\r\n+      .competitor-name,\r\n+      .competitor-file {\r\n+        width: 100%;\r\n+      }\r\n     </style>\r\n   </head>\r\n   <body class=\"bg-[#EEF5FA]\">\r\n     <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n@@ -121,14 +132,14 @@\n               id=\"expectedValueNumber\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n-            <label for=\"expectedValueNumber\" class=\"floating-label\"\r\n-              >Expected Value (Number)</label\r\n-            >\r\n-            <div class=\"error-message\" id=\"expectedValueNumberError\"\r\n-              >This field is required.</div\r\n-            >\r\n+            <label for=\"expectedValueNumber\" class=\"floating-label\">\r\n+              Expected Value (Number)\r\n+            </label>\r\n+            <div class=\"error-message\" id=\"expectedValueNumberError\">\r\n+              This field is required.\r\n+            </div>\r\n           </div>\r\n           <!-- Expected Value (Text) -->\r\n           <div class=\"relative\">\r\n             <input\r\n@@ -136,14 +147,14 @@\n               id=\"expectedValueText\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n-            <label for=\"expectedValueText\" class=\"floating-label\"\r\n-              >Expected Value (Text)</label\r\n-            >\r\n-            <div class=\"error-message\" id=\"expectedValueTextError\"\r\n-              >This field is required.</div\r\n-            >\r\n+            <label for=\"expectedValueText\" class=\"floating-label\">\r\n+              Expected Value (Text)\r\n+            </label>\r\n+            <div class=\"error-message\" id=\"expectedValueTextError\">\r\n+              This field is required.\r\n+            </div>\r\n           </div>\r\n           <!-- Status (Select) -->\r\n           <div class=\"relative\">\r\n             <select\r\n@@ -154,9 +165,11 @@\n               <option value=\"open\">Open</option>\r\n               <option value=\"closed\">Closed</option>\r\n             </select>\r\n             <label for=\"status\" class=\"floating-label-select\">Status</label>\r\n-            <div class=\"error-message\" id=\"statusError\">This field is required.</div>\r\n+            <div class=\"error-message\" id=\"statusError\">\r\n+              This field is required.\r\n+            </div>\r\n           </div>\r\n           <!-- Priority (Select) -->\r\n           <div class=\"relative\">\r\n             <select\r\n@@ -168,9 +181,11 @@\n               <option value=\"medium\">Medium</option>\r\n               <option value=\"high\">High</option>\r\n             </select>\r\n             <label for=\"priority\" class=\"floating-label-select\">Priority</label>\r\n-            <div class=\"error-message\" id=\"priorityError\">This field is required.</div>\r\n+            <div class=\"error-message\" id=\"priorityError\">\r\n+              This field is required.\r\n+            </div>\r\n           </div>\r\n           <!-- Closure Date (Date) -->\r\n           <div class=\"relative\">\r\n             <input\r\n@@ -178,10 +193,14 @@\n               id=\"closureDate\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n-            <label for=\"closureDate\" class=\"floating-label\">Closure Date</label>\r\n-            <div class=\"error-message\" id=\"closureDateError\">This field is required.</div>\r\n+            <label for=\"closureDate\" class=\"floating-label\">\r\n+              Closure Date\r\n+            </label>\r\n+            <div class=\"error-message\" id=\"closureDateError\">\r\n+              This field is required.\r\n+            </div>\r\n           </div>\r\n           <!-- Actual Value (Number) -->\r\n           <div class=\"relative\">\r\n             <input\r\n@@ -189,10 +208,14 @@\n               id=\"actualValue\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n-            <label for=\"actualValue\" class=\"floating-label\">Actual Value</label>\r\n-            <div class=\"error-message\" id=\"actualValueError\">This field is required.</div>\r\n+            <label for=\"actualValue\" class=\"floating-label\">\r\n+              Actual Value\r\n+            </label>\r\n+            <div class=\"error-message\" id=\"actualValueError\">\r\n+              This field is required.\r\n+            </div>\r\n           </div>\r\n           <!-- Loss Reason (Text) -->\r\n           <div class=\"relative\">\r\n             <input\r\n@@ -200,10 +223,14 @@\n               id=\"lossReason\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n-            <label for=\"lossReason\" class=\"floating-label\">Loss Reason</label>\r\n-            <div class=\"error-message\" id=\"lossReasonError\">This field is required.</div>\r\n+            <label for=\"lossReason\" class=\"floating-label\">\r\n+              Loss Reason\r\n+            </label>\r\n+            <div class=\"error-message\" id=\"lossReasonError\">\r\n+              This field is required.\r\n+            </div>\r\n           </div>\r\n           <!-- Assigned To (Select) -->\r\n           <div class=\"relative\">\r\n             <select\r\n@@ -213,17 +240,21 @@\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"user1\">User 1</option>\r\n               <option value=\"user2\">User 2</option>\r\n             </select>\r\n-            <label for=\"assignedTo\" class=\"floating-label-select\">Assigned To</label>\r\n-            <div class=\"error-message\" id=\"assignedToError\">This field is required.</div>\r\n+            <label for=\"assignedTo\" class=\"floating-label-select\">\r\n+              Assigned To\r\n+            </label>\r\n+            <div class=\"error-message\" id=\"assignedToError\">\r\n+              This field is required.\r\n+            </div>\r\n           </div>\r\n         </div>\r\n         <!-- Competitors Section (Dynamic Array) -->\r\n         <div id=\"competitorsSection\">\r\n           <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n           <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n-            <!-- At least one competitor entry is added automatically -->\r\n+            <!-- One competitor entry will be added on page load -->\r\n           </div>\r\n           <button\r\n             type=\"button\"\r\n             class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n@@ -243,16 +274,26 @@\n               >\r\n                 Drag & Drop your file or Browse\r\n               </span>\r\n               <div id=\"fileDropAreaImageOpportunity\">\r\n-                <svg width=\"103\" height=\"102\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n-                  <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\"/>\r\n+                <svg\r\n+                  width=\"103\"\r\n+                  height=\"102\"\r\n+                  fill=\"none\"\r\n+                  xmlns=\"http://www.w3.org/2000/svg\"\r\n+                >\r\n+                  <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\" />\r\n                 </svg>\r\n               </div>\r\n             </div>\r\n           </div>\r\n-          <span id=\"currentFileNameSpanOpportunity\" class=\"mt-2 block text-sm text-gray-700\"></span>\r\n-          <div class=\"error-message\" id=\"fileOpportunityError\">This field is required.</div>\r\n+          <span\r\n+            id=\"currentFileNameSpanOpportunity\"\r\n+            class=\"mt-2 block text-sm text-gray-700\"\r\n+          ></span>\r\n+          <div class=\"error-message\" id=\"fileOpportunityError\">\r\n+            This field is required.\r\n+          </div>\r\n         </div>\r\n         <!-- Notes (Textarea) -->\r\n         <div class=\"relative\">\r\n           <textarea\r\n@@ -260,9 +301,11 @@\n             placeholder=\" \"\r\n             class=\"block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black border border-[#CAE0F0] peer h-32\"\r\n           ></textarea>\r\n           <label for=\"notes\" class=\"floating-label\">Notes</label>\r\n-          <div class=\"error-message\" id=\"notesError\">This field is required.</div>\r\n+          <div class=\"error-message\" id=\"notesError\">\r\n+            This field is required.\r\n+          </div>\r\n         </div>\r\n         <!-- Details (Textarea) -->\r\n         <div class=\"relative\">\r\n           <textarea\r\n@@ -270,9 +313,11 @@\n             placeholder=\" \"\r\n             class=\"block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black border border-[#CAE0F0] peer h-36\"\r\n           ></textarea>\r\n           <label for=\"details\" class=\"floating-label\">Details</label>\r\n-          <div class=\"error-message\" id=\"detailsError\">This field is required.</div>\r\n+          <div class=\"error-message\" id=\"detailsError\">\r\n+            This field is required.\r\n+          </div>\r\n         </div>\r\n         <!-- Submit Buttons -->\r\n         <div class=\"flex gap-3 flex-wrap\">\r\n           <button\r\n@@ -291,15 +336,14 @@\n         </div>\r\n       </form>\r\n     </div>\r\n     <script>\r\n-      // Global variables for file upload and competitor counter\r\n+      // Global variables for opportunity file and competitor counter\r\n       let currentFileNameOpportunity = \"\";\r\n       let competitorCounter = 1;\r\n       \r\n-      // Validate a given field\r\n+      // Standard field validation (similar to your phone logic)\r\n       function validateField(field) {\r\n-        console.log(field);\r\n         const errorDiv = document.getElementById(field.id + \"Error\");\r\n         let valid = true;\r\n         if (field.tagName.toLowerCase() === \"select\") {\r\n           valid = field.value !== \"\";\r\n@@ -333,9 +377,8 @@\n         }\r\n         return valid;\r\n       }\r\n       \r\n-      // Attach validation listener\r\n       function addValidationListener(field) {\r\n         if (\r\n           field.tagName.toLowerCase() === \"select\" ||\r\n           field.type === \"file\" ||\r\n@@ -426,61 +469,54 @@\n         }\r\n         validateField(opportunityFileInput);\r\n       }\r\n       \r\n-      // Competitors dynamic field logic\r\n+      // Competitors dynamic field logic – similar to phone fields\r\n       function addCompetitor() {\r\n         const container = document.getElementById(\"competitorsContainer\");\r\n         const competitorDiv = document.createElement(\"div\");\r\n-        competitorDiv.className = \"competitor-entry border p-4 rounded relative\";\r\n-        competitorDiv.id = \"competitor_\" + competitorCounter;\r\n+        competitorDiv.className = \"competitor-entry\";\r\n       \r\n         // Competitor Name Input\r\n         const nameDiv = document.createElement(\"div\");\r\n         nameDiv.className = \"relative mb-4\";\r\n         const nameInput = document.createElement(\"input\");\r\n         nameInput.type = \"text\";\r\n-        nameInput.id = \"competitorName_\" + competitorCounter;\r\n         nameInput.placeholder = \" \";\r\n-        nameInput.className = \"floating-input peer\";\r\n-        // Set name attribute so the value is included on form submission\r\n-        nameInput.setAttribute(\"name\", \"competitors[\" + competitorCounter + \"][name]\");\r\n+        nameInput.className = \"floating-input peer competitor-name\";\r\n         const nameLabel = document.createElement(\"label\");\r\n-        nameLabel.htmlFor = nameInput.id;\r\n+        nameLabel.innerText = \"Competitor Name\";\r\n         nameLabel.className = \"floating-label\";\r\n-        nameLabel.innerText = \"Competitor Name\";\r\n+        nameDiv.appendChild(nameInput);\r\n+        nameDiv.appendChild(nameLabel);\r\n         const nameError = document.createElement(\"div\");\r\n         nameError.className = \"error-message\";\r\n-        nameError.id = nameInput.id + \"Error\";\r\n         nameError.innerText = \"This field is required.\";\r\n-        nameDiv.appendChild(nameInput);\r\n-        nameDiv.appendChild(nameLabel);\r\n         nameDiv.appendChild(nameError);\r\n       \r\n         // Competitor Attachment Input\r\n         const fileDiv = document.createElement(\"div\");\r\n         fileDiv.className = \"relative\";\r\n         const fileInput = document.createElement(\"input\");\r\n         fileInput.type = \"file\";\r\n-        fileInput.id = \"competitorFile_\" + competitorCounter;\r\n-        fileInput.className = \"block\";\r\n-        // Set name attribute so the file is included on form submission\r\n-        fileInput.setAttribute(\"name\", \"competitors[\" + competitorCounter + \"][file]\");\r\n+        fileInput.className = \"competitor-file\";\r\n+        fileDiv.appendChild(fileInput);\r\n         const fileError = document.createElement(\"div\");\r\n         fileError.className = \"error-message\";\r\n-        fileError.id = fileInput.id + \"Error\";\r\n         fileError.innerText = \"File is required.\";\r\n-        fileDiv.appendChild(fileInput);\r\n         fileDiv.appendChild(fileError);\r\n       \r\n-        // Append delete button only if this is not the first competitor entry.\r\n-        if (document.getElementById(\"competitorsContainer\").children.length > 0) {\r\n+        competitorDiv.appendChild(nameDiv);\r\n+        competitorDiv.appendChild(fileDiv);\r\n+      \r\n+        // Append delete button only if there is at least one competitor already.\r\n+        if (container.children.length > 0) {\r\n           const deleteDiv = document.createElement(\"div\");\r\n           deleteDiv.className = \"deleteBtn cursor-pointer absolute top-0 right-0\";\r\n           deleteDiv.innerHTML = `\r\n             <svg width=\"16\" height=\"17\" viewBox=\"0 0 16 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n               <g clip-path=\"url(#clip0_723_4826)\">\r\n-                <path d=\"M13.9987 2.84928H11.932C11.7773 2.09689 11.3679 1.42085 10.7729 0.935096C10.1778 0.449344 9.4335 0.183587 8.66536 0.182617L7.33203 0.182617C6.56389 0.183587 5.81958 0.449344 5.22453 0.935096C4.62948 1.42085 4.2201 2.09689 4.06536 2.84928H1.9987C1.82189 2.84928 1.65232 2.91952 1.52729 3.04455C1.40227 3.16957 1.33203 3.33914 1.33203 3.51595C1.33203 3.69276 1.40227 3.86233 1.52729 3.98735C1.65232 4.11238 1.82189 4.18262 1.9987 4.18262H2.66536V12.8493C2.66642 13.733 3.01795 14.5802 3.64284 15.2051C4.26774 15.83 5.11497 16.1816 5.9987 16.1826H9.9987C10.8824 16.1816 11.7297 15.83 12.3546 15.2051C12.9794 14.5802 13.331 13.733 13.332 12.8493V4.18262H13.9987C14.1755 4.18262 14.3451 4.11238 14.4701 3.98735C14.5951 3.86233 14.6654 3.69276 14.6654 3.51595C14.6654 3.33914 14.5951 3.16957 14.4701 3.04455C14.3451 2.91952 14.1755 2.84928 13.9987 2.84928ZM7.33203 1.51595H8.66536C9.07888 1.51646 9.48212 1.64487 9.81977 1.88358C10.1574 2.12229 10.413 2.45961 10.5514 2.84928H5.44603C5.58442 2.45961 5.83996 2.12229 6.17762 1.88358C6.51528 1.64487 6.91851 1.51646 7.33203 1.51595ZM11.9987 12.8493C11.9987 13.3797 11.788 13.8884 11.4129 14.2635C11.0378 14.6386 10.5291 14.8493 9.9987 14.8493H5.9987C5.46826 14.8493 4.95956 14.6386 4.58448 14.2635C4.20941 13.8884 3.9987 13.3797 3.9987 12.8493V4.18262H11.9987V12.8493Z\" fill=\"#E4899C\"/>\r\n+                <path d=\"M13.9987 2.84928H11.932C11.7773 2.09689 11.3679 1.42085 10.7729 0.935096C10.1778 0.449344 9.4335 0.183587 8.66536 0.182617L7.33203 0.182617C6.56389 0.183587 5.81958 0.449344 5.22453 0.935096C4.62948 1.42085 4.2201 2.09689 4.06536 2.84928H1.9987C1.82189 2.84928 1.65232 2.91952 1.52729 3.04455C1.40227 3.16957 1.33203 3.33914 1.33203 3.51595C1.33203 3.69276 1.40227 3.86233 1.52729 3.98735C1.65232 4.11238 1.82189 4.18262 1.9987 4.18262H2.66536V12.8493C2.66642 13.733 3.01795 14.5802 3.64284 15.2051C4.26774 15.83 5.11497 16.1816 5.9987 16.1826H9.9987C10.8824 16.1816 11.7297 15.83 12.3546 15.2051C12.9794 14.5802 13.331 13.733 13.332 12.8493V4.18262H13.9987C14.1755 4.18262 14.3451 4.11238 14.4701 3.98735C14.5951 3.86233 14.6654 3.69276 14.6654 3.51595C14.6654 3.33914 14.5951 3.16957 14.4701 3.04455C14.3451 2.91952 14.1755 2.84928 13.9987 2.84928ZM7.33203 1.51595H8.66536C9.07888 1.51646 9.48212 1.64487 9.81977 1.88358C10.1574 2.12229 10.413 2.45961 10.5514 2.84928H5.44603C5.58442 2.45961 5.83996 2.12229 6.17762 1.88358C6.51528 1.64487 6.91851 1.51646 7.33203 1.51595Z\" fill=\"#E4899C\"/>\r\n                 <path d=\"M6.66667 12.1822C6.84348 12.1822 7.01304 12.112 7.13807 11.9869C7.26309 11.8619 7.33333 11.6923 7.33333 11.5155V7.51554C7.33333 7.33873 7.26309 7.16916 7.13807 7.04414C7.01304 6.91911 6.84348 6.84888 6.66667 6.84888C6.48985 6.84888 6.32029 6.91911 6.19526 7.04414C6.07024 7.16916 6 7.33873 6 7.51554V11.5155C6 11.6923 6.07024 11.8619 6.19526 11.9869C6.32029 12.112 6.48985 12.1822 6.66667 12.1822Z\" fill=\"#E4899C\"/>\r\n                 <path d=\"M9.33464 12.1822C9.51145 12.1822 9.68102 12.112 9.80605 11.9869C9.93107 11.8619 10.0013 11.6923 10.0013 11.5155V7.51554C10.0013 7.33873 9.93107 7.16916 9.80605 7.04414C9.68102 6.91911 9.51145 6.84888 9.33464 6.84888C9.15783 6.84888 8.98826 6.91911 8.86323 7.04414C8.73821 7.16916 8.66797 7.33873 8.66797 7.51554V11.5155C8.66797 11.6923 8.73821 11.8619 8.86323 11.9869C8.98826 12.112 9.15783 12.1822 9.33464 12.1822Z\" fill=\"#E4899C\"/>\r\n               </g>\r\n               <defs>\r\n@@ -496,12 +532,9 @@\n           };\r\n           competitorDiv.appendChild(deleteDiv);\r\n         }\r\n       \r\n-        competitorDiv.appendChild(nameDiv);\r\n-        competitorDiv.appendChild(fileDiv);\r\n         container.appendChild(competitorDiv);\r\n-      \r\n         competitorCounter++;\r\n       }\r\n       \r\n       // Ensure at least one competitor entry is present on page load.\r\n@@ -510,9 +543,9 @@\n           addCompetitor();\r\n         }\r\n       });\r\n       \r\n-      // Form submission simulation with validations.\r\n+      // Form submission with re-indexing competitor entries.\r\n       document.getElementById(\"opportunityForm\").addEventListener(\"submit\", function (event) {\r\n         event.preventDefault();\r\n         let firstError = null;\r\n         const fieldIds = [\r\n@@ -539,623 +572,58 @@\n             if (!firstError) firstError = field;\r\n           }\r\n         });\r\n       \r\n-        // Validate each competitor entry.\r\n-        document.querySelectorAll(\".competitor-entry\").forEach((entry) => {\r\n-          const nameInput = entry.querySelector(\"input[type='text']\");\r\n-          const fileInput = entry.querySelector(\"input[type='file']\");\r\n+        // Validate competitor entries.\r\n+        const competitorEntries = document.querySelectorAll(\".competitor-entry\");\r\n+        competitorEntries.forEach((entry) => {\r\n+          const nameInput = entry.querySelector(\".competitor-name\");\r\n+          const fileInput = entry.querySelector(\".competitor-file\");\r\n           if (nameInput && nameInput.value.trim() === \"\") {\r\n             nameInput.classList.add(\"error\");\r\n-            const err = document.getElementById(nameInput.id + \"Error\");\r\n+            const err = nameInput.nextElementSibling;\r\n             if (err) err.style.display = \"block\";\r\n             if (!firstError) firstError = nameInput;\r\n           }\r\n           if (fileInput && fileInput.files.length === 0) {\r\n             fileInput.classList.add(\"error\");\r\n-            const err = document.getElementById(fileInput.id + \"Error\");\r\n+            const err = fileInput.nextElementSibling;\r\n             if (err) err.style.display = \"block\";\r\n             if (!firstError) firstError = fileInput;\r\n           }\r\n         });\r\n       \r\n         if (firstError) {\r\n           firstError.focus();\r\n-        } else {\r\n-          const submitButton = document.getElementById(\"submitButton\");\r\n-          submitButton.disabled = true;\r\n-          submitButton.innerText = \"Creating...\";\r\n-          // Create a FormData object from the form.\r\n-          const formData = new FormData(document.getElementById(\"opportunityForm\"));\r\n-          // Log all formData entries to check competitor values.\r\n-          for (let [key, value] of formData.entries()) {\r\n-            console.log(key, value);\r\n-          }\r\n-          setTimeout(() => {\r\n-            submitButton.disabled = false;\r\n-            submitButton.innerText = \"Create Opportunity\";\r\n-            alert(\"Opportunity Created Successfully!\");\r\n-          }, 2000);\r\n+          return;\r\n         }\r\n-      });\r\n-    </script>\r\n-  </body>\r\n-</html>\r\n-<!DOCTYPE html>\r\n-<html lang=\"en\">\r\n-  <head>\r\n-    <meta charset=\"UTF-8\" />\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n-    <title>Opportunity Form - Update</title>\r\n-    <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n-    <script src=\"https://cdn.tailwindcss.com\"></script>\r\n-    <style>\r\n-      /* Floating label & error styles */\r\n-      .floating-input {\r\n-        display: block;\r\n-        border: 1px solid #cae0f0;\r\n-        border-radius: 12px;\r\n-        padding: 1rem 0.625rem 0.2rem;\r\n-        width: 100%;\r\n-        font-size: 16px;\r\n-        color: #000;\r\n-        font-weight: 400;\r\n-        appearance: none;\r\n-        outline: none;\r\n-        transition: border-color 0.3s;\r\n-      }\r\n-      .floating-input:focus {\r\n-        border-color: #2563eb;\r\n-      }\r\n-      .floating-input::placeholder {\r\n-        color: transparent;\r\n-      }\r\n-      .floating-label,\r\n-      .floating-label-select {\r\n-        position: absolute;\r\n-        left: 0.625rem;\r\n-        top: 1rem;\r\n-        font-size: 12px;\r\n-        color: #bbb6b0;\r\n-        pointer-events: none;\r\n-        transition: transform 0.3s, color 0.3s;\r\n-        transform-origin: 0;\r\n-      }\r\n-      .floating-input:focus ~ .floating-label,\r\n-      .floating-input:not(:placeholder-shown) ~ .floating-label {\r\n-        transform: translateY(-1rem) scale(0.75);\r\n-        color: #bbb6b0;\r\n-        font-weight: 600;\r\n-      }\r\n-      select:focus ~ .floating-label-select,\r\n-      select.float ~ .floating-label-select {\r\n-        top: 2px;\r\n-        font-size: 10px !important;\r\n-        font-weight: 600;\r\n-        color: #bbb6b0;\r\n-      }\r\n-      select:focus ~ .floating-label-select {\r\n-        color: #2563eb;\r\n-      }\r\n-      .error {\r\n-        border: 1px solid red !important;\r\n-      }\r\n-      .error-message {\r\n-        color: red;\r\n-        font-size: 12px;\r\n-        display: none;\r\n-      }\r\n-      button[disabled] {\r\n-        opacity: 0.6;\r\n-      }\r\n-      /* Drag & Drop file area style */\r\n-      .file-drop-area {\r\n-        margin-top: 1rem;\r\n-        border: 2px dashed #3b82f6;\r\n-        border-radius: 8px;\r\n-        padding: 2rem;\r\n-        text-align: center;\r\n-        background: #eef5fa;\r\n-        cursor: pointer;\r\n-        transition: background 0.3s;\r\n-      }\r\n-      .file-drop-area:hover {\r\n-        background: #dbeafe;\r\n-      }\r\n-    </style>\r\n-  </head>\r\n-  <body class=\"bg-[#EEF5FA]\">\r\n-    <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n-      <h1 class=\"text-2xl font-semibold text-[#0D0D0C]\">Create Opportunity</h1>\r\n-      <hr class=\"my-4\" />\r\n-      <form id=\"opportunityForm\" class=\"space-y-6\">\r\n-        <!-- Fields Grid -->\r\n-        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n-          <!-- Lead (Select) -->\r\n-          <div class=\"relative\">\r\n-            <select\r\n-              id=\"lead\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n-            >\r\n-              <option value=\"\" selected disabled hidden></option>\r\n-              <option value=\"lead1\">Lead 1</option>\r\n-              <option value=\"lead2\">Lead 2</option>\r\n-            </select>\r\n-            <label for=\"lead\" class=\"floating-label-select\">Lead</label>\r\n-            <div class=\"error-message\" id=\"leadError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Stage (Select) -->\r\n-          <div class=\"relative\">\r\n-            <select\r\n-              id=\"stage\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n-            >\r\n-              <option value=\"\" selected disabled hidden></option>\r\n-              <option value=\"stage1\">Stage 1</option>\r\n-              <option value=\"stage2\">Stage 2</option>\r\n-            </select>\r\n-            <label for=\"stage\" class=\"floating-label-select\">Stage</label>\r\n-            <div class=\"error-message\" id=\"stageError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Expected Value (Number) -->\r\n-          <div class=\"relative\">\r\n-            <input\r\n-              type=\"number\"\r\n-              id=\"expectedValueNumber\"\r\n-              placeholder=\" \"\r\n-              class=\"floating-input peer\"\r\n-            />\r\n-            <label for=\"expectedValueNumber\" class=\"floating-label\">Expected Value (Number)</label>\r\n-            <div class=\"error-message\" id=\"expectedValueNumberError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Expected Value (Text) -->\r\n-          <div class=\"relative\">\r\n-            <input\r\n-              type=\"text\"\r\n-              id=\"expectedValueText\"\r\n-              placeholder=\" \"\r\n-              class=\"floating-input peer\"\r\n-            />\r\n-            <label for=\"expectedValueText\" class=\"floating-label\">Expected Value (Text)</label>\r\n-            <div class=\"error-message\" id=\"expectedValueTextError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Status (Select) -->\r\n-          <div class=\"relative\">\r\n-            <select\r\n-              id=\"status\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n-            >\r\n-              <option value=\"\" selected disabled hidden></option>\r\n-              <option value=\"open\">Open</option>\r\n-              <option value=\"closed\">Closed</option>\r\n-            </select>\r\n-            <label for=\"status\" class=\"floating-label-select\">Status</label>\r\n-            <div class=\"error-message\" id=\"statusError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Priority (Select) -->\r\n-          <div class=\"relative\">\r\n-            <select\r\n-              id=\"priority\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n-            >\r\n-              <option value=\"\" selected disabled hidden></option>\r\n-              <option value=\"low\">Low</option>\r\n-              <option value=\"medium\">Medium</option>\r\n-              <option value=\"high\">High</option>\r\n-            </select>\r\n-            <label for=\"priority\" class=\"floating-label-select\">Priority</label>\r\n-            <div class=\"error-message\" id=\"priorityError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Closure Date (Date) -->\r\n-          <div class=\"relative\">\r\n-            <input\r\n-              type=\"date\"\r\n-              id=\"closureDate\"\r\n-              placeholder=\" \"\r\n-              class=\"floating-input peer\"\r\n-            />\r\n-            <label for=\"closureDate\" class=\"floating-label\">Closure Date</label>\r\n-            <div class=\"error-message\" id=\"closureDateError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Actual Value (Number) -->\r\n-          <div class=\"relative\">\r\n-            <input\r\n-              type=\"number\"\r\n-              id=\"actualValue\"\r\n-              placeholder=\" \"\r\n-              class=\"floating-input peer\"\r\n-            />\r\n-            <label for=\"actualValue\" class=\"floating-label\">Actual Value</label>\r\n-            <div class=\"error-message\" id=\"actualValueError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Loss Reason (Text) -->\r\n-          <div class=\"relative\">\r\n-            <input\r\n-              type=\"text\"\r\n-              id=\"lossReason\"\r\n-              placeholder=\" \"\r\n-              class=\"floating-input peer\"\r\n-            />\r\n-            <label for=\"lossReason\" class=\"floating-label\">Loss Reason</label>\r\n-            <div class=\"error-message\" id=\"lossReasonError\">This field is required.</div>\r\n-          </div>\r\n-          <!-- Assigned To (Select) -->\r\n-          <div class=\"relative\">\r\n-            <select\r\n-              id=\"assignedTo\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n-            >\r\n-              <option value=\"\" selected disabled hidden></option>\r\n-              <option value=\"user1\">User 1</option>\r\n-              <option value=\"user2\">User 2</option>\r\n-            </select>\r\n-            <label for=\"assignedTo\" class=\"floating-label-select\">Assigned To</label>\r\n-            <div class=\"error-message\" id=\"assignedToError\">This field is required.</div>\r\n-          </div>\r\n-        </div>\r\n-        <!-- Competitors Section (Dynamic Array) -->\r\n-        <div id=\"competitorsSection\">\r\n-          <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n-          <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n-            <!-- At least one competitor entry is added automatically -->\r\n-          </div>\r\n-          <button\r\n-            type=\"button\"\r\n-            class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n-            onclick=\"addCompetitor()\"\r\n-          >\r\n-            Add Competitor\r\n-          </button>\r\n-        </div>\r\n-        <!-- File Upload: Drag & Drop -->\r\n-        <div>\r\n-          <div\r\n-            id=\"fileDropAreaOpportunity\"\r\n-            class=\"file-drop-area\"\r\n-          >\r\n-            <input type=\"file\" id=\"opportunityFile\" class=\"hidden\" />\r\n-            <div class=\"flex flex-col justify-center items-center gap-4\">\r\n-              <span\r\n-                class=\"text-[#559BD0] font-bold text-xl\"\r\n-                id=\"fileInputLabelOpportunity\"\r\n-              >\r\n-                Drag & Drop your file or Browse\r\n-              </span>\r\n-              <div id=\"fileDropAreaImageOpportunity\">\r\n-                <svg width=\"103\" height=\"102\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n-                  <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\"/>\r\n-                </svg>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-          <span id=\"currentFileNameSpanOpportunity\" class=\"mt-2 block text-sm text-gray-700\"></span>\r\n-          <div class=\"error-message\" id=\"fileOpportunityError\">This field is required.</div>\r\n-        </div>\r\n-        <!-- Notes (Textarea) -->\r\n-        <div class=\"relative\">\r\n-          <textarea\r\n-            id=\"notes\"\r\n-            placeholder=\" \"\r\n-            class=\"block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black border border-[#CAE0F0] peer h-32\"\r\n-          ></textarea>\r\n-          <label for=\"notes\" class=\"floating-label\">Notes</label>\r\n-          <div class=\"error-message\" id=\"notesError\">This field is required.</div>\r\n-        </div>\r\n-        <!-- Details (Textarea) -->\r\n-        <div class=\"relative\">\r\n-          <textarea\r\n-            id=\"details\"\r\n-            placeholder=\" \"\r\n-            class=\"block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black border border-[#CAE0F0] peer h-36\"\r\n-          ></textarea>\r\n-          <label for=\"details\" class=\"floating-label\">Details</label>\r\n-          <div class=\"error-message\" id=\"detailsError\">This field is required.</div>\r\n-        </div>\r\n-        <!-- Submit Buttons -->\r\n-        <div class=\"flex gap-3 flex-wrap\">\r\n-          <button\r\n-            type=\"submit\"\r\n-            id=\"submitButton\"\r\n-            class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\"\r\n-          >\r\n-            Create Opportunity\r\n-          </button>\r\n-          <a\r\n-            href=\"dashboard.html\"\r\n-            class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\"\r\n-          >\r\n-            Cancel\r\n-          </a>\r\n-        </div>\r\n-      </form>\r\n-    </div>\r\n-    <script>\r\n-      // Global variables for file upload and competitor counter\r\n-      let currentFileNameOpportunity = \"\";\r\n-      let competitorCounter = 1;\r\n       \r\n-      // Validate a given field\r\n-      function validateField(field) {\r\n-        console.log(field);\r\n-\r\n-        const errorDiv = document.getElementById(field.id + \"Error\");\r\n-        let valid = true;\r\n-        if (field.tagName.toLowerCase() === \"select\") {\r\n-          valid = field.value !== \"\";\r\n-\r\n-        } else if (field.type === \"file\") {\r\n-          if (field.files && field.files.length > 0) {\r\n-            const file = field.files[0];\r\n-            if (file.size > 2 * 1024 * 1024) {\r\n-              valid = false;\r\n-              if (errorDiv) errorDiv.innerText = \"File must be less than 2MB.\";\r\n-            } else if (![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)) {\r\n-              valid = false;\r\n-              if (errorDiv) errorDiv.innerText = \"File must be a PDF or JPG/PNG.\";\r\n-            } else {\r\n-              valid = true;\r\n-              if (errorDiv) errorDiv.innerText = \"\";\r\n-            }\r\n-          } else {\r\n-            valid = currentFileNameOpportunity !== \"\";\r\n-            if (!valid && errorDiv)\r\n-              errorDiv.innerText = \"This field is required.\";\r\n-          }\r\n-        } else {\r\n-          valid = field.value.trim() !== \"\";\r\n-        }\r\n-        if (valid) {\r\n-          field.classList.remove(\"error\");\r\n-          if (errorDiv) errorDiv.style.display = \"none\";\r\n-        }\r\n-        return valid;\r\n-      }\r\n+        const formData = new FormData(document.getElementById(\"opportunityForm\"));\r\n       \r\n-      // Attach validation listener\r\n-      function addValidationListener(field) {\r\n-        if (\r\n-          field.tagName.toLowerCase() === \"select\" ||\r\n-          field.type === \"file\" ||\r\n-          field.type === \"date\"\r\n-        ) {\r\n-          field.addEventListener(\"change\", () => validateField(field));\r\n-        } else {\r\n-          field.addEventListener(\"input\", () => validateField(field));\r\n-        }\r\n-      }\r\n-      \r\n-      // Attach validation to standard fields\r\n-      [\r\n-        \"lead\",\r\n-        \"stage\",\r\n-        \"expectedValueNumber\",\r\n-        \"expectedValueText\",\r\n-        \"status\",\r\n-        \"priority\",\r\n-        \"closureDate\",\r\n-        \"actualValue\",\r\n-        \"lossReason\",\r\n-        \"assignedTo\",\r\n-        \"opportunityFile\",\r\n-        \"notes\",\r\n-        \"details\"\r\n-      ].forEach((id) => {\r\n-        const field = document.getElementById(id);\r\n-        if (field) addValidationListener(field);\r\n-      });\r\n-      \r\n-      // Drag & Drop File Upload Logic for Opportunity File\r\n-      const opportunityFileInput = document.getElementById(\"opportunityFile\");\r\n-      const fileDropAreaOpportunity = document.getElementById(\"fileDropAreaOpportunity\");\r\n-      const fileInputLabelOpportunity = document.getElementById(\"fileInputLabelOpportunity\");\r\n-      \r\n-      fileDropAreaOpportunity.addEventListener(\"click\", () => opportunityFileInput.click());\r\n-      fileDropAreaOpportunity.addEventListener(\"dragover\", (e) => {\r\n-        e.preventDefault();\r\n-        fileDropAreaOpportunity.classList.add(\"bg-blue-100\");\r\n-      });\r\n-      fileDropAreaOpportunity.addEventListener(\"dragleave\", (e) => {\r\n-        e.preventDefault();\r\n-        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n-      });\r\n-      fileDropAreaOpportunity.addEventListener(\"drop\", (e) => {\r\n-        e.preventDefault();\r\n-        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n-        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n-          opportunityFileInput.files = e.dataTransfer.files;\r\n-          handleOpportunityFileChange();\r\n-        }\r\n-      });\r\n-      \r\n-      opportunityFileInput.addEventListener(\"change\", handleOpportunityFileChange);\r\n-      \r\n-      function handleOpportunityFileChange() {\r\n-        if (opportunityFileInput.files && opportunityFileInput.files.length > 0) {\r\n-          const file = opportunityFileInput.files[0];\r\n-          currentFileNameOpportunity = file.name;\r\n-          fileInputLabelOpportunity.textContent = \"Selected File: \" + currentFileNameOpportunity;\r\n-          if (file.type.startsWith(\"image/\")) {\r\n-            const reader = new FileReader();\r\n-            reader.onload = function (e) {\r\n-              document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n-                `<img src=\"${e.target.result}\" alt=\"Image Preview\" class=\"max-w-full max-h-48\" />`;\r\n-            };\r\n-            reader.readAsDataURL(file);\r\n-          } else if (file.type === \"application/pdf\") {\r\n-            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n-              `<svg width=\"100\" height=\"100\">\r\n-                <rect width=\"100\" height=\"100\" rx=\"15\" fill=\"#E53E3E\"/>\r\n-                <text x=\"50\" y=\"60\" text-anchor=\"middle\" fill=\"white\" font-size=\"40\" font-family=\"Arial\" font-weight=\"bold\">PDF</text>\r\n-              </svg>`;\r\n-          } else {\r\n-            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n-              `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n-                <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n-              </svg>`;\r\n+        // Re-index competitor entries so their keys are sequential.\r\n+        competitorEntries.forEach((entry, index) => {\r\n+          const nameInput = entry.querySelector(\".competitor-name\");\r\n+          const fileInput = entry.querySelector(\".competitor-file\");\r\n+          formData.append(`competitors[${index}][name]`, nameInput.value);\r\n+          if (fileInput.files.length > 0) {\r\n+            formData.append(`competitors[${index}][file]`, fileInput.files[0]);\r\n           }\r\n-        } else {\r\n-          currentFileNameOpportunity = \"\";\r\n-          fileInputLabelOpportunity.textContent = \"Drag & Drop your file or Browse\";\r\n-          document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n-            `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n-              <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n-            </svg>`;\r\n-        }\r\n-        validateField(opportunityFileInput);\r\n-      }\r\n+        });\r\n       \r\n-      // Competitors dynamic field logic\r\n-      function addCompetitor() {\r\n-        const container = document.getElementById(\"competitorsContainer\");\r\n-        const competitorDiv = document.createElement(\"div\");\r\n-        competitorDiv.className = \"competitor-entry border p-4 rounded relative\";\r\n-        competitorDiv.id = \"competitor_\" + competitorCounter;\r\n-      \r\n-        // Competitor Name Input\r\n-        const nameDiv = document.createElement(\"div\");\r\n-        nameDiv.className = \"relative mb-4\";\r\n-        const nameInput = document.createElement(\"input\");\r\n-        nameInput.type = \"text\";\r\n-        nameInput.id = \"competitorName_\" + competitorCounter;\r\n-        nameInput.placeholder = \" \";\r\n-        nameInput.className = \"floating-input peer\";\r\n-        const nameLabel = document.createElement(\"label\");\r\n-        nameLabel.htmlFor = nameInput.id;\r\n-        nameLabel.className = \"floating-label\";\r\n-        nameLabel.innerText = \"Competitor Name\";\r\n-        const nameError = document.createElement(\"div\");\r\n-        nameError.className = \"error-message\";\r\n-        nameError.id = nameInput.id + \"Error\";\r\n-        nameError.innerText = \"This field is required.\";\r\n-        nameDiv.appendChild(nameInput);\r\n-        nameDiv.appendChild(nameLabel);\r\n-        nameDiv.appendChild(nameError);\r\n-      \r\n-        // Competitor Attachment Input\r\n-        const fileDiv = document.createElement(\"div\");\r\n-        fileDiv.className = \"relative\";\r\n-        const fileInput = document.createElement(\"input\");\r\n-        fileInput.type = \"file\";\r\n-        fileInput.id = \"competitorFile_\" + competitorCounter;\r\n-        fileInput.className = \"block\";\r\n-        const fileError = document.createElement(\"div\");\r\n-        fileError.className = \"error-message\";\r\n-        fileError.id = fileInput.id + \"Error\";\r\n-        fileError.innerText = \"File is required.\";\r\n-        fileDiv.appendChild(fileInput);\r\n-        fileDiv.appendChild(fileError);\r\n-      \r\n-        // Append delete button only if this is not the first competitor entry.\r\n-        if (document.getElementById(\"competitorsContainer\").children.length > 0) {\r\n-          const deleteDiv = document.createElement(\"div\");\r\n-          deleteDiv.className = \"deleteBtn cursor-pointer absolute top-0 right-0\";\r\n-          deleteDiv.innerHTML = `\r\n-            <svg width=\"16\" height=\"17\" viewBox=\"0 0 16 17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n-              <g clip-path=\"url(#clip0_723_4826)\">\r\n-                <path d=\"M13.9987 2.84928H11.932C11.7773 2.09689 11.3679 1.42085 10.7729 0.935096C10.1778 0.449344 9.4335 0.183587 8.66536 0.182617L7.33203 0.182617C6.56389 0.183587 5.81958 0.449344 5.22453 0.935096C4.62948 1.42085 4.2201 2.09689 4.06536 2.84928H1.9987C1.82189 2.84928 1.65232 2.91952 1.52729 3.04455C1.40227 3.16957 1.33203 3.33914 1.33203 3.51595C1.33203 3.69276 1.40227 3.86233 1.52729 3.98735C1.65232 4.11238 1.82189 4.18262 1.9987 4.18262H2.66536V12.8493C2.66642 13.733 3.01795 14.5802 3.64284 15.2051C4.26774 15.83 5.11497 16.1816 5.9987 16.1826H9.9987C10.8824 16.1816 11.7297 15.83 12.3546 15.2051C12.9794 14.5802 13.331 13.733 13.332 12.8493V4.18262H13.9987C14.1755 4.18262 14.3451 4.11238 14.4701 3.98735C14.5951 3.86233 14.6654 3.69276 14.6654 3.51595C14.6654 3.33914 14.5951 3.16957 14.4701 3.04455C14.3451 2.91952 14.1755 2.84928 13.9987 2.84928ZM7.33203 1.51595H8.66536C9.07888 1.51646 9.48212 1.64487 9.81977 1.88358C10.1574 2.12229 10.413 2.45961 10.5514 2.84928H5.44603C5.58442 2.45961 5.83996 2.12229 6.17762 1.88358C6.51528 1.64487 6.91851 1.51646 7.33203 1.51595ZM11.9987 12.8493C11.9987 13.3797 11.788 13.8884 11.4129 14.2635C11.0378 14.6386 10.5291 14.8493 9.9987 14.8493H5.9987C5.46826 14.8493 4.95956 14.6386 4.58448 14.2635C4.20941 13.8884 3.9987 13.3797 3.9987 12.8493V4.18262H11.9987V12.8493Z\" fill=\"#E4899C\"/>\r\n-                <path d=\"M6.66667 12.1822C6.84348 12.1822 7.01304 12.112 7.13807 11.9869C7.26309 11.8619 7.33333 11.6923 7.33333 11.5155V7.51554C7.33333 7.33873 7.26309 7.16916 7.13807 7.04414C7.01304 6.91911 6.84348 6.84888 6.66667 6.84888C6.48985 6.84888 6.32029 6.91911 6.19526 7.04414C6.07024 7.16916 6 7.33873 6 7.51554V11.5155C6 11.6923 6.07024 11.8619 6.19526 11.9869C6.32029 12.112 6.48985 12.1822 6.66667 12.1822Z\" fill=\"#E4899C\"/>\r\n-                <path d=\"M9.33464 12.1822C9.51145 12.1822 9.68102 12.112 9.80605 11.9869C9.93107 11.8619 10.0013 11.6923 10.0013 11.5155V7.51554C10.0013 7.33873 9.93107 7.16916 9.80605 7.04414C9.68102 6.91911 9.51145 6.84888 9.33464 6.84888C9.15783 6.84888 8.98826 6.91911 8.86323 7.04414C8.73821 7.16916 8.66797 7.33873 8.66797 7.51554V11.5155C8.66797 11.6923 8.73821 11.8619 8.86323 11.9869C8.98826 12.112 9.15783 12.1822 9.33464 12.1822Z\" fill=\"#E4899C\"/>\r\n-              </g>\r\n-              <defs>\r\n-                <clipPath id=\"clip0_723_4826\">\r\n-                  <rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(0 0.182617)\"/>\r\n-                </clipPath>\r\n-              </defs>\r\n-            </svg>\r\n-            <p class='text-[12px] text-[#BBB6B0] font-[600]'>Delete</p>\r\n-          `;\r\n-          deleteDiv.onclick = function () {\r\n-            competitorDiv.remove();\r\n-          };\r\n-          competitorDiv.appendChild(deleteDiv);\r\n+        // For debugging: log all formData entries.\r\n+        for (let [key, value] of formData.entries()) {\r\n+          console.log(key, value);\r\n         }\r\n       \r\n-        competitorDiv.appendChild(nameDiv);\r\n-        competitorDiv.appendChild(fileDiv);\r\n-        container.appendChild(competitorDiv);\r\n-      \r\n-        competitorCounter++;\r\n-        // Optionally attach validation listeners for nameInput and fileInput here.\r\n-      }\r\n-      \r\n-      // Ensure at least one competitor entry is present on page load.\r\n-      document.addEventListener(\"DOMContentLoaded\", function () {\r\n-        if (document.getElementById(\"competitorsContainer\").children.length === 0) {\r\n-          addCompetitor();\r\n-        }\r\n+        // Simulate form submission.\r\n+        const submitButton = document.getElementById(\"submitButton\");\r\n+        submitButton.disabled = true;\r\n+        submitButton.innerText = \"Creating...\";\r\n+        setTimeout(() => {\r\n+          submitButton.disabled = false;\r\n+          submitButton.innerText = \"Create Opportunity\";\r\n+          alert(\"Opportunity Created Successfully!\");\r\n+        }, 2000);\r\n       });\r\n-      \r\n-      // Form submission simulation with validations.\r\n-      document.getElementById(\"opportunityForm\").addEventListener(\"submit\", function (event) {\r\n-        event.preventDefault();\r\n-        let firstError = null;\r\n-        const fieldIds = [\r\n-          \"lead\",\r\n-          \"stage\",\r\n-          \"expectedValueNumber\",\r\n-          \"expectedValueText\",\r\n-          \"status\",\r\n-          \"priority\",\r\n-          \"closureDate\",\r\n-          \"actualValue\",\r\n-          \"lossReason\",\r\n-          \"assignedTo\",\r\n-          \"opportunityFile\",\r\n-          \"notes\",\r\n-          \"details\"\r\n-        ];\r\n-        fieldIds.forEach((id) => {\r\n-          const field = document.getElementById(id);\r\n-          if (field && !validateField(field)) {\r\n-            field.classList.add(\"error\");\r\n-            const errorDiv = document.getElementById(id + \"Error\");\r\n-            if (errorDiv) errorDiv.style.display = \"block\";\r\n-            if (!firstError) firstError = field;\r\n-          }\r\n-        });\r\n-      \r\n-        // Validate each competitor entry.\r\n-        document.querySelectorAll(\".competitor-entry\").forEach((entry) => {\r\n-          const nameInput = entry.querySelector(\"input[type='text']\");\r\n-          const fileInput = entry.querySelector(\"input[type='file']\");\r\n-          if (nameInput && nameInput.value.trim() === \"\") {\r\n-            nameInput.classList.add(\"error\");\r\n-            const err = document.getElementById(nameInput.id + \"Error\");\r\n-            if (err) err.style.display = \"block\";\r\n-            if (!firstError) firstError = nameInput;\r\n-          }\r\n-          if (fileInput && fileInput.files.length === 0) {\r\n-            fileInput.classList.add(\"error\");\r\n-            const err = document.getElementById(fileInput.id + \"Error\");\r\n-            if (err) err.style.display = \"block\";\r\n-            if (!firstError) firstError = fileInput;\r\n-          }\r\n-        });\r\n-      \r\n-        if (firstError) {\r\n-          firstError.focus();\r\n-        } else {\r\n-          const submitButton = document.getElementById(\"submitButton\");\r\n-          submitButton.disabled = true;\r\n-          submitButton.innerText = \"Creating...\";\r\n-          // Simulate form submission and collecting FormData.\r\n-          const formData = new FormData(document.getElementById(\"opportunityForm\"));\r\n-          // Append competitor data.\r\n-          document.querySelectorAll(\".competitor-entry\").forEach((entry, index) => {\r\n-            const nameInput = entry.querySelector(\"input[type='text']\");\r\n-            const fileInput = entry.querySelector(\"input[type='file']\");\r\n-            formData.append(`competitors[${index}][name]`, nameInput.value);\r\n-            if (fileInput.files.length > 0) {\r\n-              formData.append(`competitors[${index}][file]`, fileInput.files[0]);\r\n-            }\r\n-          });\r\n-          console.log(\"Form Data Submitted\");\r\n-          setTimeout(() => {\r\n-            submitButton.disabled = false;\r\n-            submitButton.innerText = \"Create Opportunity\";\r\n-            alert(\"Opportunity Created Successfully!\");\r\n-          }, 2000);\r\n-        }\r\n-      });\r\n     </script>\r\n   </body>\r\n </html>\r\n"
                },
                {
                    "date": 1741576566850,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -542,9 +542,42 @@\n         if (document.getElementById(\"competitorsContainer\").children.length === 0) {\r\n           addCompetitor();\r\n         }\r\n       });\r\n-      \r\n+      // Function to log current competitor entries\r\n+function logCompetitors() {\r\n+  const competitorEntries = document.querySelectorAll(\".competitor-entry\");\r\n+  const competitors = [];\r\n+  competitorEntries.forEach((entry) => {\r\n+    const nameInput = entry.querySelector(\".competitor-name\");\r\n+    const fileInput = entry.querySelector(\".competitor-file\");\r\n+    const competitor = {\r\n+      name: nameInput ? nameInput.value : \"\",\r\n+      // Log the file name if a file is selected\r\n+      file: fileInput && fileInput.files.length > 0 ? fileInput.files[0].name : \"\"\r\n+    };\r\n+    competitors.push(competitor);\r\n+  });\r\n+  console.log(\"Competitors:\", competitors);\r\n+}\r\n+\r\n+// Using event delegation to catch changes on any competitor field within the container\r\n+const competitorsContainer = document.getElementById(\"competitorsContainer\");\r\n+\r\n+// Listen for text changes on competitor name inputs\r\n+competitorsContainer.addEventListener(\"input\", (event) => {\r\n+  if (event.target.classList.contains(\"competitor-name\")) {\r\n+    logCompetitors();\r\n+  }\r\n+});\r\n+\r\n+// Listen for file changes on competitor file inputs\r\n+competitorsContainer.addEventListener(\"change\", (event) => {\r\n+  if (event.target.classList.contains(\"competitor-file\")) {\r\n+    logCompetitors();\r\n+  }\r\n+});\r\n+\r\n       // Form submission with re-indexing competitor entries.\r\n       document.getElementById(\"opportunityForm\").addEventListener(\"submit\", function (event) {\r\n         event.preventDefault();\r\n         let firstError = null;\r\n"
                },
                {
                    "date": 1741576627076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -542,42 +542,9 @@\n         if (document.getElementById(\"competitorsContainer\").children.length === 0) {\r\n           addCompetitor();\r\n         }\r\n       });\r\n-      // Function to log current competitor entries\r\n-function logCompetitors() {\r\n-  const competitorEntries = document.querySelectorAll(\".competitor-entry\");\r\n-  const competitors = [];\r\n-  competitorEntries.forEach((entry) => {\r\n-    const nameInput = entry.querySelector(\".competitor-name\");\r\n-    const fileInput = entry.querySelector(\".competitor-file\");\r\n-    const competitor = {\r\n-      name: nameInput ? nameInput.value : \"\",\r\n-      // Log the file name if a file is selected\r\n-      file: fileInput && fileInput.files.length > 0 ? fileInput.files[0].name : \"\"\r\n-    };\r\n-    competitors.push(competitor);\r\n-  });\r\n-  console.log(\"Competitors:\", competitors);\r\n-}\r\n-\r\n-// Using event delegation to catch changes on any competitor field within the container\r\n-const competitorsContainer = document.getElementById(\"competitorsContainer\");\r\n-\r\n-// Listen for text changes on competitor name inputs\r\n-competitorsContainer.addEventListener(\"input\", (event) => {\r\n-  if (event.target.classList.contains(\"competitor-name\")) {\r\n-    logCompetitors();\r\n-  }\r\n-});\r\n-\r\n-// Listen for file changes on competitor file inputs\r\n-competitorsContainer.addEventListener(\"change\", (event) => {\r\n-  if (event.target.classList.contains(\"competitor-file\")) {\r\n-    logCompetitors();\r\n-  }\r\n-});\r\n-\r\n+      \r\n       // Form submission with re-indexing competitor entries.\r\n       document.getElementById(\"opportunityForm\").addEventListener(\"submit\", function (event) {\r\n         event.preventDefault();\r\n         let firstError = null;\r\n"
                },
                {
                    "date": 1741576970921,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -289,9 +289,9 @@\n           <span\r\n             id=\"currentFileNameSpanOpportunity\"\r\n             class=\"mt-2 block text-sm text-gray-700\"\r\n           ></span>\r\n-          <div class=\"error-message\" id=\"fileOpportunityError\">\r\n+          <div class=\"error-message\" id=\"opportunityFileError\">\r\n             This field is required.\r\n           </div>\r\n         </div>\r\n         <!-- Notes (Textarea) -->\r\n"
                },
                {
                    "date": 1741577052501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,8 +75,11 @@\n         background: #eef5fa;\r\n         cursor: pointer;\r\n         transition: background 0.3s;\r\n       }\r\n+      .file-drop-area ~ .error{\r\n+        border-color: red;\r\n+      }\r\n       .file-drop-area:hover {\r\n         background: #dbeafe;\r\n       }\r\n       /* Competitor specific classes */\r\n"
                },
                {
                    "date": 1741577072696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,9 +76,9 @@\n         cursor: pointer;\r\n         transition: background 0.3s;\r\n       }\r\n       .file-drop-area ~ .error{\r\n-        border-color: red;\r\n+        border:1px solid red;\r\n       }\r\n       .file-drop-area:hover {\r\n         background: #dbeafe;\r\n       }\r\n"
                },
                {
                    "date": 1741577304568,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -267,18 +267,73 @@\n           </button>\r\n         </div>\r\n         <!-- File Upload: Drag & Drop -->\r\n         <div>\r\n-          <div id=\"fileDropAreaOpportunity\" class=\"file-drop-area\">\r\n+          <div\r\n+            id=\"fileDropArea\"\r\n+            class=\"mt-1 border-2 border-dashed border-blue-500 rounded-md p-[35px] text-center bg-[#EEF5FA] cursor-pointer hover:bg-blue-100\"\r\n+          >\r\n+            <input type=\"file\" id=\"file\" class=\"hidden\" />\r\n+            <div class=\"flex flex-col justify-center items-center gap-[20px]\">\r\n+              <span\r\n+                class=\"text-[#559BD0] font-[700] text-[20px]\"\r\n+                id=\"fileInputLabel\"\r\n+                >Drag&Drop your file or Browse</span\r\n+              >\r\n+              <div id=\"fileDropAreaImage\">\r\n+                <svg\r\n+                  width=\"103\"\r\n+                  height=\"102\"\r\n+                  viewBox=\"0 0 103 102\"\r\n+                  fill=\"none\"\r\n+                  xmlns=\"http://www.w3.org/2000/svg\"\r\n+                >\r\n+                  <g opacity=\"0.2\">\r\n+                    <g clip-path=\"url(#clip0_318_2422)\">\r\n+                      <path\r\n+                        d=\"M81.0829 0.182739H21.4211C15.772 0.189455 10.3562 2.41947 6.36167 6.38363C2.36714 10.3478 0.120048 15.7224 0.113281 21.3286L0.113281 80.5369C0.120048 86.1431 2.36714 91.5177 6.36167 95.4818C10.3562 99.446 15.772 101.676 21.4211 101.683H81.0829C86.732 101.676 92.1478 99.446 96.1423 95.4818C100.137 91.5177 102.384 86.1431 102.391 80.5369V21.3286C102.384 15.7224 100.137 10.3478 96.1423 6.38363C92.1478 2.41947 86.732 0.189455 81.0829 0.182739V0.182739ZM21.4211 8.64107H81.0829C84.4736 8.64107 87.7255 9.97779 90.1231 12.3572C92.5207 14.7365 93.8676 17.9636 93.8676 21.3286V80.5369C93.8603 82.4209 93.4232 84.2789 92.5891 85.9714L53.5405 47.2195C51.5618 45.2554 49.2126 43.6973 46.627 42.6343C44.0415 41.5712 41.2702 41.0241 38.4716 41.0241C35.6729 41.0241 32.9017 41.5712 30.3161 42.6343C27.7306 43.6973 25.3814 45.2554 23.4027 47.2195L8.6364 61.8694V21.3286C8.6364 17.9636 9.98336 14.7365 12.3809 12.3572C14.7785 9.97779 18.0304 8.64107 21.4211 8.64107ZM21.4211 93.2244C18.0304 93.2244 14.7785 91.8877 12.3809 89.5083C9.98336 87.129 8.6364 83.9018 8.6364 80.5369V73.8294L29.4243 53.1996C30.6116 52.0206 32.0213 51.0853 33.5729 50.4472C35.1246 49.8091 36.7877 49.4806 38.4673 49.4806C40.1469 49.4806 41.8101 49.8091 43.3617 50.4472C44.9133 51.0853 46.3231 52.0206 47.5104 53.1996L86.559 91.9557C84.8536 92.7834 82.9814 93.2171 81.0829 93.2244H21.4211Z\"\r\n+                        fill=\"#374957\"\r\n+                      />\r\n+                      <path\r\n+                        d=\"M68.2983 44.5875C71.2483 44.5875 74.132 43.7193 76.5849 42.0929C79.0377 40.4664 80.9494 38.1546 82.0784 35.4499C83.2073 32.7452 83.5027 29.7689 82.9271 26.8976C82.3516 24.0263 80.9311 21.3888 78.8451 19.3187C76.7591 17.2486 74.1014 15.8388 71.2081 15.2677C68.3148 14.6966 65.3158 14.9897 62.5904 16.11C59.8649 17.2304 57.5355 19.1276 55.8965 21.5618C54.2576 23.996 53.3828 26.8578 53.3828 29.7854C53.3828 33.7111 54.9543 37.4761 57.7515 40.252C60.5486 43.028 64.3424 44.5875 68.2983 44.5875ZM68.2983 23.4416C69.5626 23.4416 70.7985 23.8137 71.8497 24.5107C72.9009 25.2078 73.7202 26.1986 74.204 27.3577C74.6878 28.5169 74.8144 29.7924 74.5678 31.023C74.3211 32.2535 73.7123 33.3839 72.8183 34.2711C71.9244 35.1583 70.7853 35.7624 69.5454 36.0072C68.3054 36.252 67.0201 36.1264 65.852 35.6462C64.684 35.1661 63.6856 34.353 62.9832 33.3098C62.2808 32.2665 61.9059 31.04 61.9059 29.7854C61.9059 28.1029 62.5794 26.4893 63.7782 25.2997C64.977 24.11 66.6029 23.4416 68.2983 23.4416Z\"\r\n+                        fill=\"#374957\"\r\n+                      />\r\n+                    </g>\r\n+                  </g>\r\n+                  <defs>\r\n+                    <clipPath id=\"clip0_318_2422\">\r\n+                      <rect\r\n+                        width=\"102.277\"\r\n+                        height=\"101.5\"\r\n+                        fill=\"white\"\r\n+                        transform=\"translate(0.113281 0.182739)\"\r\n+                      />\r\n+                    </clipPath>\r\n+                  </defs>\r\n+                </svg>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+          <span\r\n+            id=\"currentFileNameSpan\"\r\n+            class=\"mt-2 block text-sm text-gray-700\"\r\n+          ></span>\r\n+          <div class=\"error-message\" id=\"fileError\">\r\n+            This field is required.\r\n+          </div>\r\n+        </div>\r\n+        <div>\r\n+          <div id=\"fileDropArea\"             class=\"mt-1 border-2 border-dashed border-blue-500 rounded-md p-[35px] text-center bg-[#EEF5FA] cursor-pointer hover:bg-blue-100\"\r\n+          >\r\n             <input type=\"file\" id=\"opportunityFile\" class=\"hidden\" />\r\n             <div class=\"flex flex-col justify-center items-center gap-4\">\r\n               <span\r\n                 class=\"text-[#559BD0] font-bold text-xl\"\r\n-                id=\"fileInputLabelOpportunity\"\r\n+                id=\"fileInputLabel\"\r\n               >\r\n                 Drag & Drop your file or Browse\r\n               </span>\r\n-              <div id=\"fileDropAreaImageOpportunity\">\r\n+              <div id=\"fileDropAreaImage\">\r\n                 <svg\r\n                   width=\"103\"\r\n                   height=\"102\"\r\n                   fill=\"none\"\r\n@@ -414,23 +469,23 @@\n       });\r\n       \r\n       // Drag & Drop File Upload Logic for Opportunity File\r\n       const opportunityFileInput = document.getElementById(\"opportunityFile\");\r\n-      const fileDropAreaOpportunity = document.getElementById(\"fileDropAreaOpportunity\");\r\n-      const fileInputLabelOpportunity = document.getElementById(\"fileInputLabelOpportunity\");\r\n+      const fileDropArea = document.getElementById(\"fileDropArea\");\r\n+      const fileInputLabel = document.getElementById(\"fileInputLabel\");\r\n       \r\n-      fileDropAreaOpportunity.addEventListener(\"click\", () => opportunityFileInput.click());\r\n-      fileDropAreaOpportunity.addEventListener(\"dragover\", (e) => {\r\n+      fileDropArea.addEventListener(\"click\", () => opportunityFileInput.click());\r\n+      fileDropArea.addEventListener(\"dragover\", (e) => {\r\n         e.preventDefault();\r\n-        fileDropAreaOpportunity.classList.add(\"bg-blue-100\");\r\n+        fileDropArea.classList.add(\"bg-blue-100\");\r\n       });\r\n-      fileDropAreaOpportunity.addEventListener(\"dragleave\", (e) => {\r\n+      fileDropArea.addEventListener(\"dragleave\", (e) => {\r\n         e.preventDefault();\r\n-        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n+        fileDropArea.classList.remove(\"bg-blue-100\");\r\n       });\r\n-      fileDropAreaOpportunity.addEventListener(\"drop\", (e) => {\r\n+      fileDropArea.addEventListener(\"drop\", (e) => {\r\n         e.preventDefault();\r\n-        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n+        fileDropArea.classList.remove(\"bg-blue-100\");\r\n         if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n           opportunityFileInput.files = e.dataTransfer.files;\r\n           handleOpportunityFileChange();\r\n         }\r\n@@ -441,32 +496,32 @@\n       function handleOpportunityFileChange() {\r\n         if (opportunityFileInput.files && opportunityFileInput.files.length > 0) {\r\n           const file = opportunityFileInput.files[0];\r\n           currentFileNameOpportunity = file.name;\r\n-          fileInputLabelOpportunity.textContent = \"Selected File: \" + currentFileNameOpportunity;\r\n+          fileInputLabel.textContent = \"Selected File: \" + currentFileNameOpportunity;\r\n           if (file.type.startsWith(\"image/\")) {\r\n             const reader = new FileReader();\r\n             reader.onload = function (e) {\r\n-              document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n+              document.getElementById(\"fileDropAreaImage\").innerHTML =\r\n                 `<img src=\"${e.target.result}\" alt=\"Image Preview\" class=\"max-w-full max-h-48\" />`;\r\n             };\r\n             reader.readAsDataURL(file);\r\n           } else if (file.type === \"application/pdf\") {\r\n-            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n+            document.getElementById(\"fileDropAreaImage\").innerHTML =\r\n               `<svg width=\"100\" height=\"100\">\r\n                 <rect width=\"100\" height=\"100\" rx=\"15\" fill=\"#E53E3E\"/>\r\n                 <text x=\"50\" y=\"60\" text-anchor=\"middle\" fill=\"white\" font-size=\"40\" font-family=\"Arial\" font-weight=\"bold\">PDF</text>\r\n               </svg>`;\r\n           } else {\r\n-            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n+            document.getElementById(\"fileDropAreaImage\").innerHTML =\r\n               `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n                 <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n               </svg>`;\r\n           }\r\n         } else {\r\n           currentFileNameOpportunity = \"\";\r\n-          fileInputLabelOpportunity.textContent = \"Drag & Drop your file or Browse\";\r\n-          document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n+          fileInputLabel.textContent = \"Drag & Drop your file or Browse\";\r\n+          document.getElementById(\"fileDropAreaImage\").innerHTML =\r\n             `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n               <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n             </svg>`;\r\n         }\r\n"
                },
                {
                    "date": 1741577400087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -265,8 +265,9 @@\n           >\r\n             Add Competitor\r\n           </button>\r\n         </div>\r\n+\r\n         <!-- File Upload: Drag & Drop -->\r\n         <div>\r\n           <div\r\n             id=\"fileDropArea\"\r\n@@ -320,39 +321,16 @@\n           <div class=\"error-message\" id=\"fileError\">\r\n             This field is required.\r\n           </div>\r\n         </div>\r\n-        <div>\r\n-          <div id=\"fileDropArea\"             class=\"mt-1 border-2 border-dashed border-blue-500 rounded-md p-[35px] text-center bg-[#EEF5FA] cursor-pointer hover:bg-blue-100\"\r\n-          >\r\n-            <input type=\"file\" id=\"opportunityFile\" class=\"hidden\" />\r\n-            <div class=\"flex flex-col justify-center items-center gap-4\">\r\n-              <span\r\n-                class=\"text-[#559BD0] font-bold text-xl\"\r\n-                id=\"fileInputLabel\"\r\n-              >\r\n-                Drag & Drop your file or Browse\r\n-              </span>\r\n-              <div id=\"fileDropAreaImage\">\r\n-                <svg\r\n-                  width=\"103\"\r\n-                  height=\"102\"\r\n-                  fill=\"none\"\r\n-                  xmlns=\"http://www.w3.org/2000/svg\"\r\n-                >\r\n-                  <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\" />\r\n-                </svg>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-          <span\r\n-            id=\"currentFileNameSpanOpportunity\"\r\n-            class=\"mt-2 block text-sm text-gray-700\"\r\n-          ></span>\r\n-          <div class=\"error-message\" id=\"opportunityFileError\">\r\n-            This field is required.\r\n-          </div>\r\n-        </div>\r\n+        <span\r\n+        id=\"currentFileNameSpan\"\r\n+        class=\"mt-2 block text-sm text-gray-700\"\r\n+      ></span>\r\n+      <div class=\"error-message\" id=\"opportunityFileError\">\r\n+        This field is required.\r\n+      </div>\r\n+   \r\n         <!-- Notes (Textarea) -->\r\n         <div class=\"relative\">\r\n           <textarea\r\n             id=\"notes\"\r\n"
                },
                {
                    "date": 1741577471845,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -265,72 +265,39 @@\n           >\r\n             Add Competitor\r\n           </button>\r\n         </div>\r\n-\r\n         <!-- File Upload: Drag & Drop -->\r\n         <div>\r\n-          <div\r\n-            id=\"fileDropArea\"\r\n-            class=\"mt-1 border-2 border-dashed border-blue-500 rounded-md p-[35px] text-center bg-[#EEF5FA] cursor-pointer hover:bg-blue-100\"\r\n-          >\r\n-            <input type=\"file\" id=\"file\" class=\"hidden\" />\r\n-            <div class=\"flex flex-col justify-center items-center gap-[20px]\">\r\n+          <div id=\"fileDropAreaOpportunity\" class=\"file-drop-area\">\r\n+            <input type=\"file\" id=\"opportunityFile\" class=\"hidden\" />\r\n+            <div class=\"flex flex-col justify-center items-center gap-4\">\r\n               <span\r\n-                class=\"text-[#559BD0] font-[700] text-[20px]\"\r\n-                id=\"fileInputLabel\"\r\n-                >Drag&Drop your file or Browse</span\r\n+                class=\"text-[#559BD0] font-bold text-xl\"\r\n+                id=\"fileInputLabelOpportunity\"\r\n               >\r\n-              <div id=\"fileDropAreaImage\">\r\n+                Drag & Drop your file or Browse\r\n+              </span>\r\n+              <div id=\"fileDropAreaImageOpportunity\">\r\n                 <svg\r\n                   width=\"103\"\r\n                   height=\"102\"\r\n-                  viewBox=\"0 0 103 102\"\r\n                   fill=\"none\"\r\n                   xmlns=\"http://www.w3.org/2000/svg\"\r\n                 >\r\n-                  <g opacity=\"0.2\">\r\n-                    <g clip-path=\"url(#clip0_318_2422)\">\r\n-                      <path\r\n-                        d=\"M81.0829 0.182739H21.4211C15.772 0.189455 10.3562 2.41947 6.36167 6.38363C2.36714 10.3478 0.120048 15.7224 0.113281 21.3286L0.113281 80.5369C0.120048 86.1431 2.36714 91.5177 6.36167 95.4818C10.3562 99.446 15.772 101.676 21.4211 101.683H81.0829C86.732 101.676 92.1478 99.446 96.1423 95.4818C100.137 91.5177 102.384 86.1431 102.391 80.5369V21.3286C102.384 15.7224 100.137 10.3478 96.1423 6.38363C92.1478 2.41947 86.732 0.189455 81.0829 0.182739V0.182739ZM21.4211 8.64107H81.0829C84.4736 8.64107 87.7255 9.97779 90.1231 12.3572C92.5207 14.7365 93.8676 17.9636 93.8676 21.3286V80.5369C93.8603 82.4209 93.4232 84.2789 92.5891 85.9714L53.5405 47.2195C51.5618 45.2554 49.2126 43.6973 46.627 42.6343C44.0415 41.5712 41.2702 41.0241 38.4716 41.0241C35.6729 41.0241 32.9017 41.5712 30.3161 42.6343C27.7306 43.6973 25.3814 45.2554 23.4027 47.2195L8.6364 61.8694V21.3286C8.6364 17.9636 9.98336 14.7365 12.3809 12.3572C14.7785 9.97779 18.0304 8.64107 21.4211 8.64107ZM21.4211 93.2244C18.0304 93.2244 14.7785 91.8877 12.3809 89.5083C9.98336 87.129 8.6364 83.9018 8.6364 80.5369V73.8294L29.4243 53.1996C30.6116 52.0206 32.0213 51.0853 33.5729 50.4472C35.1246 49.8091 36.7877 49.4806 38.4673 49.4806C40.1469 49.4806 41.8101 49.8091 43.3617 50.4472C44.9133 51.0853 46.3231 52.0206 47.5104 53.1996L86.559 91.9557C84.8536 92.7834 82.9814 93.2171 81.0829 93.2244H21.4211Z\"\r\n-                        fill=\"#374957\"\r\n-                      />\r\n-                      <path\r\n-                        d=\"M68.2983 44.5875C71.2483 44.5875 74.132 43.7193 76.5849 42.0929C79.0377 40.4664 80.9494 38.1546 82.0784 35.4499C83.2073 32.7452 83.5027 29.7689 82.9271 26.8976C82.3516 24.0263 80.9311 21.3888 78.8451 19.3187C76.7591 17.2486 74.1014 15.8388 71.2081 15.2677C68.3148 14.6966 65.3158 14.9897 62.5904 16.11C59.8649 17.2304 57.5355 19.1276 55.8965 21.5618C54.2576 23.996 53.3828 26.8578 53.3828 29.7854C53.3828 33.7111 54.9543 37.4761 57.7515 40.252C60.5486 43.028 64.3424 44.5875 68.2983 44.5875ZM68.2983 23.4416C69.5626 23.4416 70.7985 23.8137 71.8497 24.5107C72.9009 25.2078 73.7202 26.1986 74.204 27.3577C74.6878 28.5169 74.8144 29.7924 74.5678 31.023C74.3211 32.2535 73.7123 33.3839 72.8183 34.2711C71.9244 35.1583 70.7853 35.7624 69.5454 36.0072C68.3054 36.252 67.0201 36.1264 65.852 35.6462C64.684 35.1661 63.6856 34.353 62.9832 33.3098C62.2808 32.2665 61.9059 31.04 61.9059 29.7854C61.9059 28.1029 62.5794 26.4893 63.7782 25.2997C64.977 24.11 66.6029 23.4416 68.2983 23.4416Z\"\r\n-                        fill=\"#374957\"\r\n-                      />\r\n-                    </g>\r\n-                  </g>\r\n-                  <defs>\r\n-                    <clipPath id=\"clip0_318_2422\">\r\n-                      <rect\r\n-                        width=\"102.277\"\r\n-                        height=\"101.5\"\r\n-                        fill=\"white\"\r\n-                        transform=\"translate(0.113281 0.182739)\"\r\n-                      />\r\n-                    </clipPath>\r\n-                  </defs>\r\n+                  <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\" />\r\n                 </svg>\r\n               </div>\r\n             </div>\r\n           </div>\r\n           <span\r\n-            id=\"currentFileNameSpan\"\r\n+            id=\"currentFileNameSpanOpportunity\"\r\n             class=\"mt-2 block text-sm text-gray-700\"\r\n           ></span>\r\n-          <div class=\"error-message\" id=\"fileError\">\r\n+          <div class=\"error-message\" id=\"opportunityFileError\">\r\n             This field is required.\r\n           </div>\r\n         </div>\r\n-        <span\r\n-        id=\"currentFileNameSpan\"\r\n-        class=\"mt-2 block text-sm text-gray-700\"\r\n-      ></span>\r\n-      <div class=\"error-message\" id=\"opportunityFileError\">\r\n-        This field is required.\r\n-      </div>\r\n-   \r\n         <!-- Notes (Textarea) -->\r\n         <div class=\"relative\">\r\n           <textarea\r\n             id=\"notes\"\r\n@@ -447,23 +414,23 @@\n       });\r\n       \r\n       // Drag & Drop File Upload Logic for Opportunity File\r\n       const opportunityFileInput = document.getElementById(\"opportunityFile\");\r\n-      const fileDropArea = document.getElementById(\"fileDropArea\");\r\n-      const fileInputLabel = document.getElementById(\"fileInputLabel\");\r\n+      const fileDropAreaOpportunity = document.getElementById(\"fileDropAreaOpportunity\");\r\n+      const fileInputLabelOpportunity = document.getElementById(\"fileInputLabelOpportunity\");\r\n       \r\n-      fileDropArea.addEventListener(\"click\", () => opportunityFileInput.click());\r\n-      fileDropArea.addEventListener(\"dragover\", (e) => {\r\n+      fileDropAreaOpportunity.addEventListener(\"click\", () => opportunityFileInput.click());\r\n+      fileDropAreaOpportunity.addEventListener(\"dragover\", (e) => {\r\n         e.preventDefault();\r\n-        fileDropArea.classList.add(\"bg-blue-100\");\r\n+        fileDropAreaOpportunity.classList.add(\"bg-blue-100\");\r\n       });\r\n-      fileDropArea.addEventListener(\"dragleave\", (e) => {\r\n+      fileDropAreaOpportunity.addEventListener(\"dragleave\", (e) => {\r\n         e.preventDefault();\r\n-        fileDropArea.classList.remove(\"bg-blue-100\");\r\n+        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n       });\r\n-      fileDropArea.addEventListener(\"drop\", (e) => {\r\n+      fileDropAreaOpportunity.addEventListener(\"drop\", (e) => {\r\n         e.preventDefault();\r\n-        fileDropArea.classList.remove(\"bg-blue-100\");\r\n+        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n         if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n           opportunityFileInput.files = e.dataTransfer.files;\r\n           handleOpportunityFileChange();\r\n         }\r\n@@ -474,32 +441,32 @@\n       function handleOpportunityFileChange() {\r\n         if (opportunityFileInput.files && opportunityFileInput.files.length > 0) {\r\n           const file = opportunityFileInput.files[0];\r\n           currentFileNameOpportunity = file.name;\r\n-          fileInputLabel.textContent = \"Selected File: \" + currentFileNameOpportunity;\r\n+          fileInputLabelOpportunity.textContent = \"Selected File: \" + currentFileNameOpportunity;\r\n           if (file.type.startsWith(\"image/\")) {\r\n             const reader = new FileReader();\r\n             reader.onload = function (e) {\r\n-              document.getElementById(\"fileDropAreaImage\").innerHTML =\r\n+              document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n                 `<img src=\"${e.target.result}\" alt=\"Image Preview\" class=\"max-w-full max-h-48\" />`;\r\n             };\r\n             reader.readAsDataURL(file);\r\n           } else if (file.type === \"application/pdf\") {\r\n-            document.getElementById(\"fileDropAreaImage\").innerHTML =\r\n+            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n               `<svg width=\"100\" height=\"100\">\r\n                 <rect width=\"100\" height=\"100\" rx=\"15\" fill=\"#E53E3E\"/>\r\n                 <text x=\"50\" y=\"60\" text-anchor=\"middle\" fill=\"white\" font-size=\"40\" font-family=\"Arial\" font-weight=\"bold\">PDF</text>\r\n               </svg>`;\r\n           } else {\r\n-            document.getElementById(\"fileDropAreaImage\").innerHTML =\r\n+            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n               `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n                 <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n               </svg>`;\r\n           }\r\n         } else {\r\n           currentFileNameOpportunity = \"\";\r\n-          fileInputLabel.textContent = \"Drag & Drop your file or Browse\";\r\n-          document.getElementById(\"fileDropAreaImage\").innerHTML =\r\n+          fileInputLabelOpportunity.textContent = \"Drag & Drop your file or Browse\";\r\n+          document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n             `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n               <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n             </svg>`;\r\n         }\r\n"
                },
                {
                    "date": 1741577610542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -374,8 +374,13 @@\n         } else {\r\n           valid = field.value.trim() !== \"\";\r\n         }\r\n         if (valid) {\r\n+          field.type == \"file\" &&\r\n+          document\r\n+          .getElementById(\"fileDropAreaOpportunity\")&&   document\r\n+              .getElementById(\"fileDropAreaOpportunity\")\r\n+              .classList.remove(\"border-red-500\");\r\n           field.classList.remove(\"error\");\r\n           if (errorDiv) errorDiv.style.display = \"none\";\r\n         }\r\n         return valid;\r\n"
                },
                {
                    "date": 1741577674773,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -574,8 +574,13 @@\n         fieldIds.forEach((id) => {\r\n           const field = document.getElementById(id);\r\n           if (field && !validateField(field)) {\r\n             field.classList.add(\"error\");\r\n+            field.type == \"file\" &&\r\n+          document\r\n+          .getElementById(\"fileDropAreaOpportunity\")&&   document\r\n+              .getElementById(\"fileDropAreaOpportunity\")\r\n+              .classList.add(\"border-red-500\");\r\n             const errorDiv = document.getElementById(id + \"Error\");\r\n             if (errorDiv) errorDiv.style.display = \"block\";\r\n             if (!firstError) firstError = field;\r\n           }\r\n"
                },
                {
                    "date": 1741578064541,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,10 +75,10 @@\n         background: #eef5fa;\r\n         cursor: pointer;\r\n         transition: background 0.3s;\r\n       }\r\n-      .file-drop-area ~ .error{\r\n-        border:1px solid red;\r\n+      .file-drop-area ~ .error {\r\n+        border: 1px solid red;\r\n       }\r\n       .file-drop-area:hover {\r\n         background: #dbeafe;\r\n       }\r\n@@ -255,9 +255,9 @@\n         <!-- Competitors Section (Dynamic Array) -->\r\n         <div id=\"competitorsSection\">\r\n           <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n           <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n-            <!-- One competitor entry will be added on page load -->\r\n+            <!-- ستضاف حقل واحد للمنافس عند تحميل الصفحة -->\r\n           </div>\r\n           <button\r\n             type=\"button\"\r\n             class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n@@ -339,13 +339,13 @@\n         </div>\r\n       </form>\r\n     </div>\r\n     <script>\r\n-      // Global variables for opportunity file and competitor counter\r\n+      // المتغيرات العالمية لملف الـ opportunity وعداد المنافسين\r\n       let currentFileNameOpportunity = \"\";\r\n       let competitorCounter = 1;\r\n       \r\n-      // Standard field validation (similar to your phone logic)\r\n+      // التحقق من الحقول القياسية\r\n       function validateField(field) {\r\n         const errorDiv = document.getElementById(field.id + \"Error\");\r\n         let valid = true;\r\n         if (field.tagName.toLowerCase() === \"select\") {\r\n@@ -374,13 +374,11 @@\n         } else {\r\n           valid = field.value.trim() !== \"\";\r\n         }\r\n         if (valid) {\r\n-          field.type == \"file\" &&\r\n-          document\r\n-          .getElementById(\"fileDropAreaOpportunity\")&&   document\r\n-              .getElementById(\"fileDropAreaOpportunity\")\r\n-              .classList.remove(\"border-red-500\");\r\n+          if(field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")) {\r\n+            document.getElementById(\"fileDropAreaOpportunity\").classList.remove(\"border-red-500\");\r\n+          }\r\n           field.classList.remove(\"error\");\r\n           if (errorDiv) errorDiv.style.display = \"none\";\r\n         }\r\n         return valid;\r\n@@ -397,9 +395,9 @@\n           field.addEventListener(\"input\", () => validateField(field));\r\n         }\r\n       }\r\n       \r\n-      // Attach validation to standard fields\r\n+      // ربط التحقق للحقول القياسية\r\n       [\r\n         \"lead\",\r\n         \"stage\",\r\n         \"expectedValueNumber\",\r\n@@ -417,9 +415,9 @@\n         const field = document.getElementById(id);\r\n         if (field) addValidationListener(field);\r\n       });\r\n       \r\n-      // Drag & Drop File Upload Logic for Opportunity File\r\n+      // منطق رفع الملف عبر السحب والإفلات لملف الـ opportunity\r\n       const opportunityFileInput = document.getElementById(\"opportunityFile\");\r\n       const fileDropAreaOpportunity = document.getElementById(\"fileDropAreaOpportunity\");\r\n       const fileInputLabelOpportunity = document.getElementById(\"fileInputLabelOpportunity\");\r\n       \r\n@@ -477,15 +475,15 @@\n         }\r\n         validateField(opportunityFileInput);\r\n       }\r\n       \r\n-      // Competitors dynamic field logic – similar to phone fields\r\n+      // منطق الحقول الديناميكية للمنافسين\r\n       function addCompetitor() {\r\n         const container = document.getElementById(\"competitorsContainer\");\r\n         const competitorDiv = document.createElement(\"div\");\r\n         competitorDiv.className = \"competitor-entry\";\r\n       \r\n-        // Competitor Name Input\r\n+        // حقل اسم المنافس\r\n         const nameDiv = document.createElement(\"div\");\r\n         nameDiv.className = \"relative mb-4\";\r\n         const nameInput = document.createElement(\"input\");\r\n         nameInput.type = \"text\";\r\n@@ -500,9 +498,17 @@\n         nameError.className = \"error-message\";\r\n         nameError.innerText = \"This field is required.\";\r\n         nameDiv.appendChild(nameError);\r\n       \r\n-        // Competitor Attachment Input\r\n+        // إضافة مستمع لتغيير القيمة على حقل اسم المنافس\r\n+        nameInput.addEventListener(\"input\", function() {\r\n+          if (nameInput.value.trim() !== \"\") {\r\n+            nameInput.classList.remove(\"error\");\r\n+            nameError.style.display = \"none\";\r\n+          }\r\n+        });\r\n+      \r\n+        // حقل مرفق المنافس\r\n         const fileDiv = document.createElement(\"div\");\r\n         fileDiv.className = \"relative\";\r\n         const fileInput = document.createElement(\"input\");\r\n         fileInput.type = \"file\";\r\n@@ -512,12 +518,20 @@\n         fileError.className = \"error-message\";\r\n         fileError.innerText = \"File is required.\";\r\n         fileDiv.appendChild(fileError);\r\n       \r\n+        // إضافة مستمع لتغيير حالة حقل الملف\r\n+        fileInput.addEventListener(\"change\", function() {\r\n+          if (fileInput.files.length > 0) {\r\n+            fileInput.classList.remove(\"error\");\r\n+            fileError.style.display = \"none\";\r\n+          }\r\n+        });\r\n+      \r\n         competitorDiv.appendChild(nameDiv);\r\n         competitorDiv.appendChild(fileDiv);\r\n       \r\n-        // Append delete button only if there is at least one competitor already.\r\n+        // إضافة زر حذف إذا كان هناك أكثر من منافس\r\n         if (container.children.length > 0) {\r\n           const deleteDiv = document.createElement(\"div\");\r\n           deleteDiv.className = \"deleteBtn cursor-pointer absolute top-0 right-0\";\r\n           deleteDiv.innerHTML = `\r\n@@ -544,16 +558,16 @@\n         container.appendChild(competitorDiv);\r\n         competitorCounter++;\r\n       }\r\n       \r\n-      // Ensure at least one competitor entry is present on page load.\r\n+      // التأكد من وجود حقل منافس واحد على الأقل عند تحميل الصفحة\r\n       document.addEventListener(\"DOMContentLoaded\", function () {\r\n         if (document.getElementById(\"competitorsContainer\").children.length === 0) {\r\n           addCompetitor();\r\n         }\r\n       });\r\n       \r\n-      // Form submission with re-indexing competitor entries.\r\n+      // معالجة إرسال النموذج مع إعادة فهرسة بيانات المنافسين\r\n       document.getElementById(\"opportunityForm\").addEventListener(\"submit\", function (event) {\r\n         event.preventDefault();\r\n         let firstError = null;\r\n         const fieldIds = [\r\n@@ -574,27 +588,25 @@\n         fieldIds.forEach((id) => {\r\n           const field = document.getElementById(id);\r\n           if (field && !validateField(field)) {\r\n             field.classList.add(\"error\");\r\n-            field.type == \"file\" &&\r\n-          document\r\n-          .getElementById(\"fileDropAreaOpportunity\")&&   document\r\n-              .getElementById(\"fileDropAreaOpportunity\")\r\n-              .classList.add(\"border-red-500\");\r\n+            if(field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")){\r\n+              document.getElementById(\"fileDropAreaOpportunity\").classList.add(\"border-red-500\");\r\n+            }\r\n             const errorDiv = document.getElementById(id + \"Error\");\r\n             if (errorDiv) errorDiv.style.display = \"block\";\r\n             if (!firstError) firstError = field;\r\n           }\r\n         });\r\n       \r\n-        // Validate competitor entries.\r\n+        // التحقق من صحة بيانات المنافسين\r\n         const competitorEntries = document.querySelectorAll(\".competitor-entry\");\r\n         competitorEntries.forEach((entry) => {\r\n           const nameInput = entry.querySelector(\".competitor-name\");\r\n           const fileInput = entry.querySelector(\".competitor-file\");\r\n           if (nameInput && nameInput.value.trim() === \"\") {\r\n             nameInput.classList.add(\"error\");\r\n-            const err = nameInput.nextElementSibling;\r\n+            const err = nameInput.nextElementSibling.nextElementSibling;\r\n             if (err) err.style.display = \"block\";\r\n             if (!firstError) firstError = nameInput;\r\n           }\r\n           if (fileInput && fileInput.files.length === 0) {\r\n@@ -611,9 +623,9 @@\n         }\r\n       \r\n         const formData = new FormData(document.getElementById(\"opportunityForm\"));\r\n       \r\n-        // Re-index competitor entries so their keys are sequential.\r\n+        // إعادة فهرسة بيانات المنافسين بحيث تكون المفاتيح متسلسلة\r\n         competitorEntries.forEach((entry, index) => {\r\n           const nameInput = entry.querySelector(\".competitor-name\");\r\n           const fileInput = entry.querySelector(\".competitor-file\");\r\n           formData.append(`competitors[${index}][name]`, nameInput.value);\r\n@@ -621,14 +633,14 @@\n             formData.append(`competitors[${index}][file]`, fileInput.files[0]);\r\n           }\r\n         });\r\n       \r\n-        // For debugging: log all formData entries.\r\n+        // للعرض فقط: طباعة جميع بيانات formData في وحدة التحكم\r\n         for (let [key, value] of formData.entries()) {\r\n           console.log(key, value);\r\n         }\r\n       \r\n-        // Simulate form submission.\r\n+        // محاكاة إرسال النموذج\r\n         const submitButton = document.getElementById(\"submitButton\");\r\n         submitButton.disabled = true;\r\n         submitButton.innerText = \"Creating...\";\r\n         setTimeout(() => {\r\n"
                },
                {
                    "date": 1741578369915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -415,8 +415,19 @@\n         const field = document.getElementById(id);\r\n         if (field) addValidationListener(field);\r\n       });\r\n       \r\n+      // استدعاء جميع عناصر select لإضافة الكلاس \"float\" عند وجود قيمة، وحذفه في حالة عدم وجودها\r\n+      document.querySelectorAll(\"select\").forEach((select) => {\r\n+        select.addEventListener(\"change\", function () {\r\n+          if (this.value !== \"\") {\r\n+            this.classList.add(\"float\");\r\n+          } else {\r\n+            this.classList.remove(\"float\");\r\n+          }\r\n+        });\r\n+      });\r\n+      \r\n       // منطق رفع الملف عبر السحب والإفلات لملف الـ opportunity\r\n       const opportunityFileInput = document.getElementById(\"opportunityFile\");\r\n       const fileDropAreaOpportunity = document.getElementById(\"fileDropAreaOpportunity\");\r\n       const fileInputLabelOpportunity = document.getElementById(\"fileInputLabelOpportunity\");\r\n"
                },
                {
                    "date": 1741579453588,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,19 @@\n     <title>Opportunity Form - Update</title>\r\n     <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n     <script src=\"https://cdn.tailwindcss.com\"></script>\r\n     <style>\r\n+      /* إخفاء أيقونة select الافتراضية واستبدالها بالـ SVG المخصص */\r\n+      select {\r\n+        -webkit-appearance: none;\r\n+        -moz-appearance: none;\r\n+        appearance: none;\r\n+        background-image: url(\"data:image/svg+xml,%3Csvg%20width%3D%2216%22%20height%3D%2210%22%20viewBox%3D%220%200%2016%2010%22%20fill%3D%22none%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M0.615384%201.87495L8.30769%209.56726L16%201.87495L14.9038%200.79803L8.30769%207.39418L1.71154%200.79803L0.615384%201.87495Z%22%20fill%3D%22black%22/%3E%3C/svg%3E\");\r\n+        background-repeat: no-repeat;\r\n+        background-position: right 10px center;\r\n+        background-size: 16px 10px;\r\n+      }\r\n+      \r\n       /* Floating label & error styles */\r\n       .floating-input {\r\n         display: block;\r\n         border: 1px solid #cae0f0;\r\n"
                },
                {
                    "date": 1741579673139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n     <title>Opportunity Form - Update</title>\r\n     <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n     <script src=\"https://cdn.tailwindcss.com\"></script>\r\n     <style>\r\n-      /* إخفاء أيقونة select الافتراضية واستبدالها بالـ SVG المخصص */\r\n+      /* استبدال أيقونة select الافتراضية بـ SVG مخصص */\r\n       select {\r\n         -webkit-appearance: none;\r\n         -moz-appearance: none;\r\n         appearance: none;\r\n@@ -17,8 +17,18 @@\n         background-position: right 10px center;\r\n         background-size: 16px 10px;\r\n       }\r\n       \r\n+      /* إخفاء أيقونات الspinner الافتراضية لحقل الأرقام */\r\n+      input[type=\"number\"]::-webkit-inner-spin-button,\r\n+      input[type=\"number\"]::-webkit-outer-spin-button {\r\n+        -webkit-appearance: none;\r\n+        margin: 0;\r\n+      }\r\n+      input[type=\"number\"] {\r\n+        -moz-appearance: textfield;\r\n+      }\r\n+      \r\n       /* Floating label & error styles */\r\n       .floating-input {\r\n         display: block;\r\n         border: 1px solid #cae0f0;\r\n@@ -92,9 +102,9 @@\n       }\r\n       .file-drop-area:hover {\r\n         background: #dbeafe;\r\n       }\r\n-      /* Competitor specific classes */\r\n+      /* تنسيق الحقول الديناميكية للمنافسين */\r\n       .competitor-entry {\r\n         position: relative;\r\n         border: 1px solid #cae0f0;\r\n         padding: 1rem;\r\n@@ -103,8 +113,30 @@\n       .competitor-name,\r\n       .competitor-file {\r\n         width: 100%;\r\n       }\r\n+      /* تنسيق الحقول المخصصة للأرقام مع أزرار التحكم */\r\n+      .custom-number-input {\r\n+        position: relative;\r\n+      }\r\n+      .custom-number-input input[type=\"number\"] {\r\n+        padding-right: 2.5rem;\r\n+      }\r\n+      .number-controls {\r\n+        position: absolute;\r\n+        top: 0;\r\n+        right: 0;\r\n+        height: 100%;\r\n+        display: flex;\r\n+        flex-direction: column;\r\n+        justify-content: center;\r\n+      }\r\n+      .number-controls button {\r\n+        background: transparent;\r\n+        border: none;\r\n+        cursor: pointer;\r\n+        padding: 0.2rem;\r\n+      }\r\n     </style>\r\n   </head>\r\n   <body class=\"bg-[#EEF5FA]\">\r\n     <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n@@ -138,92 +170,56 @@\n             </select>\r\n             <label for=\"stage\" class=\"floating-label-select\">Stage</label>\r\n             <div class=\"error-message\" id=\"stageError\">This field is required.</div>\r\n           </div>\r\n-          <!-- Expected Value (Number) -->\r\n-          <div class=\"relative\">\r\n+          <!-- Expected Value (Number) with custom spinner -->\r\n+          <div class=\"relative custom-number-input\">\r\n             <input\r\n               type=\"number\"\r\n               id=\"expectedValueNumber\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n+            <!-- زر التحكم لزيادة/إنقاص القيمة -->\r\n+            <div class=\"number-controls\">\r\n+              <button type=\"button\" class=\"number-increment\">\r\n+                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                  <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n+                </svg>\r\n+              </button>\r\n+              <button type=\"button\" class=\"number-decrement\">\r\n+                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n+                  <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n+                </svg>\r\n+              </button>\r\n+            </div>\r\n             <label for=\"expectedValueNumber\" class=\"floating-label\">\r\n               Expected Value (Number)\r\n             </label>\r\n             <div class=\"error-message\" id=\"expectedValueNumberError\">\r\n               This field is required.\r\n             </div>\r\n           </div>\r\n-          <!-- Expected Value (Text) -->\r\n-          <div class=\"relative\">\r\n+          <!-- Actual Value (Number) with custom spinner -->\r\n+          <div class=\"relative custom-number-input\">\r\n             <input\r\n-              type=\"text\"\r\n-              id=\"expectedValueText\"\r\n-              placeholder=\" \"\r\n-              class=\"floating-input peer\"\r\n-            />\r\n-            <label for=\"expectedValueText\" class=\"floating-label\">\r\n-              Expected Value (Text)\r\n-            </label>\r\n-            <div class=\"error-message\" id=\"expectedValueTextError\">\r\n-              This field is required.\r\n-            </div>\r\n-          </div>\r\n-          <!-- Status (Select) -->\r\n-          <div class=\"relative\">\r\n-            <select\r\n-              id=\"status\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n-            >\r\n-              <option value=\"\" selected disabled hidden></option>\r\n-              <option value=\"open\">Open</option>\r\n-              <option value=\"closed\">Closed</option>\r\n-            </select>\r\n-            <label for=\"status\" class=\"floating-label-select\">Status</label>\r\n-            <div class=\"error-message\" id=\"statusError\">\r\n-              This field is required.\r\n-            </div>\r\n-          </div>\r\n-          <!-- Priority (Select) -->\r\n-          <div class=\"relative\">\r\n-            <select\r\n-              id=\"priority\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n-            >\r\n-              <option value=\"\" selected disabled hidden></option>\r\n-              <option value=\"low\">Low</option>\r\n-              <option value=\"medium\">Medium</option>\r\n-              <option value=\"high\">High</option>\r\n-            </select>\r\n-            <label for=\"priority\" class=\"floating-label-select\">Priority</label>\r\n-            <div class=\"error-message\" id=\"priorityError\">\r\n-              This field is required.\r\n-            </div>\r\n-          </div>\r\n-          <!-- Closure Date (Date) -->\r\n-          <div class=\"relative\">\r\n-            <input\r\n-              type=\"date\"\r\n-              id=\"closureDate\"\r\n-              placeholder=\" \"\r\n-              class=\"floating-input peer\"\r\n-            />\r\n-            <label for=\"closureDate\" class=\"floating-label\">\r\n-              Closure Date\r\n-            </label>\r\n-            <div class=\"error-message\" id=\"closureDateError\">\r\n-              This field is required.\r\n-            </div>\r\n-          </div>\r\n-          <!-- Actual Value (Number) -->\r\n-          <div class=\"relative\">\r\n-            <input\r\n               type=\"number\"\r\n               id=\"actualValue\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n+            <div class=\"number-controls\">\r\n+              <button type=\"button\" class=\"number-increment\">\r\n+                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                  <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n+                </svg>\r\n+              </button>\r\n+              <button type=\"button\" class=\"number-decrement\">\r\n+                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n+                  <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n+                </svg>\r\n+              </button>\r\n+            </div>\r\n             <label for=\"actualValue\" class=\"floating-label\">\r\n               Actual Value\r\n             </label>\r\n             <div class=\"error-message\" id=\"actualValueError\">\r\n@@ -281,30 +277,19 @@\n         <div>\r\n           <div id=\"fileDropAreaOpportunity\" class=\"file-drop-area\">\r\n             <input type=\"file\" id=\"opportunityFile\" class=\"hidden\" />\r\n             <div class=\"flex flex-col justify-center items-center gap-4\">\r\n-              <span\r\n-                class=\"text-[#559BD0] font-bold text-xl\"\r\n-                id=\"fileInputLabelOpportunity\"\r\n-              >\r\n+              <span class=\"text-[#559BD0] font-bold text-xl\" id=\"fileInputLabelOpportunity\">\r\n                 Drag & Drop your file or Browse\r\n               </span>\r\n               <div id=\"fileDropAreaImageOpportunity\">\r\n-                <svg\r\n-                  width=\"103\"\r\n-                  height=\"102\"\r\n-                  fill=\"none\"\r\n-                  xmlns=\"http://www.w3.org/2000/svg\"\r\n-                >\r\n+                <svg width=\"103\" height=\"102\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                   <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\" />\r\n                 </svg>\r\n               </div>\r\n             </div>\r\n           </div>\r\n-          <span\r\n-            id=\"currentFileNameSpanOpportunity\"\r\n-            class=\"mt-2 block text-sm text-gray-700\"\r\n-          ></span>\r\n+          <span id=\"currentFileNameSpanOpportunity\" class=\"mt-2 block text-sm text-gray-700\"></span>\r\n           <div class=\"error-message\" id=\"opportunityFileError\">\r\n             This field is required.\r\n           </div>\r\n         </div>\r\n@@ -385,9 +370,9 @@\n         } else {\r\n           valid = field.value.trim() !== \"\";\r\n         }\r\n         if (valid) {\r\n-          if(field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")) {\r\n+          if (field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")) {\r\n             document.getElementById(\"fileDropAreaOpportunity\").classList.remove(\"border-red-500\");\r\n           }\r\n           field.classList.remove(\"error\");\r\n           if (errorDiv) errorDiv.style.display = \"none\";\r\n@@ -426,9 +411,9 @@\n         const field = document.getElementById(id);\r\n         if (field) addValidationListener(field);\r\n       });\r\n       \r\n-      // استدعاء جميع عناصر select لإضافة الكلاس \"float\" عند وجود قيمة، وحذفه في حالة عدم وجودها\r\n+      // استدعاء جميع عناصر select لإضافة الكلاس \"float\" عند وجود قيمة\r\n       document.querySelectorAll(\"select\").forEach((select) => {\r\n         select.addEventListener(\"change\", function () {\r\n           if (this.value !== \"\") {\r\n             this.classList.add(\"float\");\r\n@@ -585,8 +570,23 @@\n       document.addEventListener(\"DOMContentLoaded\", function () {\r\n         if (document.getElementById(\"competitorsContainer\").children.length === 0) {\r\n           addCompetitor();\r\n         }\r\n+        \r\n+        // إضافة مستمع للأزرار الخاصة بحقول الأرقام المخصصة\r\n+        document.querySelectorAll(\".custom-number-input\").forEach(wrapper => {\r\n+          const input = wrapper.querySelector('input[type=\"number\"]');\r\n+          const incBtn = wrapper.querySelector(\".number-increment\");\r\n+          const decBtn = wrapper.querySelector(\".number-decrement\");\r\n+          incBtn.addEventListener(\"click\", () => {\r\n+            input.value = parseInt(input.value || 0) + 1;\r\n+            input.dispatchEvent(new Event(\"change\"));\r\n+          });\r\n+          decBtn.addEventListener(\"click\", () => {\r\n+            input.value = parseInt(input.value || 0) - 1;\r\n+            input.dispatchEvent(new Event(\"change\"));\r\n+          });\r\n+        });\r\n       });\r\n       \r\n       // معالجة إرسال النموذج مع إعادة فهرسة بيانات المنافسين\r\n       document.getElementById(\"opportunityForm\").addEventListener(\"submit\", function (event) {\r\n"
                },
                {
                    "date": 1741579938048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,20 +6,36 @@\n     <title>Opportunity Form - Update</title>\r\n     <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n     <script src=\"https://cdn.tailwindcss.com\"></script>\r\n     <style>\r\n-      /* استبدال أيقونة select الافتراضية بـ SVG مخصص */\r\n-      select {\r\n+      /* حاوية الـ select لتعيين أيقونة مخصصة */\r\n+      .select-container {\r\n+        position: relative;\r\n+      }\r\n+      .select-container select {\r\n         -webkit-appearance: none;\r\n         -moz-appearance: none;\r\n         appearance: none;\r\n+        width: 100%;\r\n+      }\r\n+      .select-container::after {\r\n+        content: '';\r\n+        position: absolute;\r\n+        right: 10px;\r\n+        top: 50%;\r\n+        transform: translateY(-50%);\r\n+        width: 16px;\r\n+        height: 10px;\r\n         background-image: url(\"data:image/svg+xml,%3Csvg%20width%3D%2216%22%20height%3D%2210%22%20viewBox%3D%220%200%2016%2010%22%20fill%3D%22none%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M0.615384%201.87495L8.30769%209.56726L16%201.87495L14.9038%200.79803L8.30769%207.39418L1.71154%200.79803L0.615384%201.87495Z%22%20fill%3D%22black%22/%3E%3C/svg%3E\");\r\n         background-repeat: no-repeat;\r\n-        background-position: right 10px center;\r\n         background-size: 16px 10px;\r\n+        transition: transform 0.3s;\r\n       }\r\n+      .select-container.open::after {\r\n+        transform: translateY(-50%) rotate(180deg);\r\n+      }\r\n       \r\n-      /* إخفاء أيقونات الspinner الافتراضية لحقل الأرقام */\r\n+      /* إخفاء أيقونات spinner الافتراضية في حقول الأرقام */\r\n       input[type=\"number\"]::-webkit-inner-spin-button,\r\n       input[type=\"number\"]::-webkit-outer-spin-button {\r\n         -webkit-appearance: none;\r\n         margin: 0;\r\n@@ -64,16 +80,17 @@\n         transform: translateY(-1rem) scale(0.75);\r\n         color: #bbb6b0;\r\n         font-weight: 600;\r\n       }\r\n-      select:focus ~ .floating-label-select,\r\n-      select.float ~ .floating-label-select {\r\n+      /* لاحظ أن الـ label الخاص بالـ select لم يتغير من حيث الموضع */\r\n+      .select-container:focus-within ~ .floating-label-select,\r\n+      .select-container.select-filled .floating-label-select {\r\n         top: 2px;\r\n         font-size: 10px !important;\r\n         font-weight: 600;\r\n         color: #bbb6b0;\r\n       }\r\n-      select:focus ~ .floating-label-select {\r\n+      .select-container:focus-within .floating-label-select {\r\n         color: #2563eb;\r\n       }\r\n       .error {\r\n         border: 1px solid red !important;\r\n@@ -135,8 +152,12 @@\n         border: none;\r\n         cursor: pointer;\r\n         padding: 0.2rem;\r\n       }\r\n+      .number-controls button svg {\r\n+        width: 12px;\r\n+        height: 8px;\r\n+      }\r\n     </style>\r\n   </head>\r\n   <body class=\"bg-[#EEF5FA]\">\r\n     <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n@@ -145,12 +166,12 @@\n       <form id=\"opportunityForm\" class=\"space-y-6\">\r\n         <!-- Fields Grid -->\r\n         <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n           <!-- Lead (Select) -->\r\n-          <div class=\"relative\">\r\n+          <div class=\"select-container relative\">\r\n             <select\r\n               id=\"lead\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"lead1\">Lead 1</option>\r\n               <option value=\"lead2\">Lead 2</option>\r\n@@ -158,12 +179,12 @@\n             <label for=\"lead\" class=\"floating-label-select\">Lead</label>\r\n             <div class=\"error-message\" id=\"leadError\">This field is required.</div>\r\n           </div>\r\n           <!-- Stage (Select) -->\r\n-          <div class=\"relative\">\r\n+          <div class=\"select-container relative\">\r\n             <select\r\n               id=\"stage\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"stage1\">Stage 1</option>\r\n               <option value=\"stage2\">Stage 2</option>\r\n@@ -178,17 +199,18 @@\n               id=\"expectedValueNumber\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n-            <!-- زر التحكم لزيادة/إنقاص القيمة -->\r\n             <div class=\"number-controls\">\r\n+              <!-- زر الزيادة: نعكس التأثير بحيث يظهر السهم لأعلى -->\r\n               <button type=\"button\" class=\"number-increment\">\r\n-                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n+              <!-- زر النقصان: يظهر السهم طبيعي (لأسفل) -->\r\n               <button type=\"button\" class=\"number-decrement\">\r\n-                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n+                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n             </div>\r\n@@ -208,14 +230,14 @@\n               class=\"floating-input peer\"\r\n             />\r\n             <div class=\"number-controls\">\r\n               <button type=\"button\" class=\"number-increment\">\r\n-                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n               <button type=\"button\" class=\"number-decrement\">\r\n-                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n+                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n             </div>\r\n@@ -241,12 +263,12 @@\n               This field is required.\r\n             </div>\r\n           </div>\r\n           <!-- Assigned To (Select) -->\r\n-          <div class=\"relative\">\r\n+          <div class=\"select-container relative\">\r\n             <select\r\n               id=\"assignedTo\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"user1\">User 1</option>\r\n               <option value=\"user2\">User 2</option>\r\n@@ -318,19 +340,12 @@\n           </div>\r\n         </div>\r\n         <!-- Submit Buttons -->\r\n         <div class=\"flex gap-3 flex-wrap\">\r\n-          <button\r\n-            type=\"submit\"\r\n-            id=\"submitButton\"\r\n-            class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\"\r\n-          >\r\n+          <button type=\"submit\" id=\"submitButton\" class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\">\r\n             Create Opportunity\r\n           </button>\r\n-          <a\r\n-            href=\"dashboard.html\"\r\n-            class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\"\r\n-          >\r\n+          <a href=\"dashboard.html\" class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\">\r\n             Cancel\r\n           </a>\r\n         </div>\r\n       </form>\r\n@@ -351,11 +366,9 @@\n             const file = field.files[0];\r\n             if (file.size > 2 * 1024 * 1024) {\r\n               valid = false;\r\n               if (errorDiv) errorDiv.innerText = \"File must be less than 2MB.\";\r\n-            } else if (\r\n-              ![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)\r\n-            ) {\r\n+            } else if (![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)) {\r\n               valid = false;\r\n               if (errorDiv)\r\n                 errorDiv.innerText = \"File must be a PDF or JPG/PNG.\";\r\n             } else {\r\n@@ -380,13 +393,9 @@\n         return valid;\r\n       }\r\n       \r\n       function addValidationListener(field) {\r\n-        if (\r\n-          field.tagName.toLowerCase() === \"select\" ||\r\n-          field.type === \"file\" ||\r\n-          field.type === \"date\"\r\n-        ) {\r\n+        if (field.tagName.toLowerCase() === \"select\" || field.type === \"file\" || field.type === \"date\") {\r\n           field.addEventListener(\"change\", () => validateField(field));\r\n         } else {\r\n           field.addEventListener(\"input\", () => validateField(field));\r\n         }\r\n@@ -411,10 +420,17 @@\n         const field = document.getElementById(id);\r\n         if (field) addValidationListener(field);\r\n       });\r\n       \r\n-      // استدعاء جميع عناصر select لإضافة الكلاس \"float\" عند وجود قيمة\r\n-      document.querySelectorAll(\"select\").forEach((select) => {\r\n+      // إضافة حدث لتحويل الحاوية الخاصة بالـ select عند focus و blur\r\n+      document.querySelectorAll(\".select-container select\").forEach((select) => {\r\n+        select.addEventListener(\"focus\", function () {\r\n+          this.parentElement.classList.add(\"open\");\r\n+        });\r\n+        select.addEventListener(\"blur\", function () {\r\n+          this.parentElement.classList.remove(\"open\");\r\n+        });\r\n+        // كما نقوم بإضافة/إزالة كلاس float عند تغيير القيمة\r\n         select.addEventListener(\"change\", function () {\r\n           if (this.value !== \"\") {\r\n             this.classList.add(\"float\");\r\n           } else {\r\n@@ -610,9 +626,9 @@\n         fieldIds.forEach((id) => {\r\n           const field = document.getElementById(id);\r\n           if (field && !validateField(field)) {\r\n             field.classList.add(\"error\");\r\n-            if(field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")){\r\n+            if (field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")) {\r\n               document.getElementById(\"fileDropAreaOpportunity\").classList.add(\"border-red-500\");\r\n             }\r\n             const errorDiv = document.getElementById(id + \"Error\");\r\n             if (errorDiv) errorDiv.style.display = \"block\";\r\n"
                },
                {
                    "date": 1741580082619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,36 +6,20 @@\n     <title>Opportunity Form - Update</title>\r\n     <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n     <script src=\"https://cdn.tailwindcss.com\"></script>\r\n     <style>\r\n-      /* حاوية الـ select لتعيين أيقونة مخصصة */\r\n-      .select-container {\r\n-        position: relative;\r\n-      }\r\n-      .select-container select {\r\n+      /* استبدال أيقونة select الافتراضية بـ SVG مخصص */\r\n+      select {\r\n         -webkit-appearance: none;\r\n         -moz-appearance: none;\r\n         appearance: none;\r\n-        width: 100%;\r\n-      }\r\n-      .select-container::after {\r\n-        content: '';\r\n-        position: absolute;\r\n-        right: 10px;\r\n-        top: 50%;\r\n-        transform: translateY(-50%);\r\n-        width: 16px;\r\n-        height: 10px;\r\n         background-image: url(\"data:image/svg+xml,%3Csvg%20width%3D%2216%22%20height%3D%2210%22%20viewBox%3D%220%200%2016%2010%22%20fill%3D%22none%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M0.615384%201.87495L8.30769%209.56726L16%201.87495L14.9038%200.79803L8.30769%207.39418L1.71154%200.79803L0.615384%201.87495Z%22%20fill%3D%22black%22/%3E%3C/svg%3E\");\r\n         background-repeat: no-repeat;\r\n+        background-position: right 10px center;\r\n         background-size: 16px 10px;\r\n-        transition: transform 0.3s;\r\n       }\r\n-      .select-container.open::after {\r\n-        transform: translateY(-50%) rotate(180deg);\r\n-      }\r\n       \r\n-      /* إخفاء أيقونات spinner الافتراضية في حقول الأرقام */\r\n+      /* إخفاء أيقونات الspinner الافتراضية لحقل الأرقام */\r\n       input[type=\"number\"]::-webkit-inner-spin-button,\r\n       input[type=\"number\"]::-webkit-outer-spin-button {\r\n         -webkit-appearance: none;\r\n         margin: 0;\r\n@@ -80,17 +64,16 @@\n         transform: translateY(-1rem) scale(0.75);\r\n         color: #bbb6b0;\r\n         font-weight: 600;\r\n       }\r\n-      /* لاحظ أن الـ label الخاص بالـ select لم يتغير من حيث الموضع */\r\n-      .select-container:focus-within ~ .floating-label-select,\r\n-      .select-container.select-filled .floating-label-select {\r\n+      select:focus ~ .floating-label-select,\r\n+      select.float ~ .floating-label-select {\r\n         top: 2px;\r\n         font-size: 10px !important;\r\n         font-weight: 600;\r\n         color: #bbb6b0;\r\n       }\r\n-      .select-container:focus-within .floating-label-select {\r\n+      select:focus ~ .floating-label-select {\r\n         color: #2563eb;\r\n       }\r\n       .error {\r\n         border: 1px solid red !important;\r\n@@ -152,12 +135,8 @@\n         border: none;\r\n         cursor: pointer;\r\n         padding: 0.2rem;\r\n       }\r\n-      .number-controls button svg {\r\n-        width: 12px;\r\n-        height: 8px;\r\n-      }\r\n     </style>\r\n   </head>\r\n   <body class=\"bg-[#EEF5FA]\">\r\n     <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n@@ -166,12 +145,12 @@\n       <form id=\"opportunityForm\" class=\"space-y-6\">\r\n         <!-- Fields Grid -->\r\n         <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n           <!-- Lead (Select) -->\r\n-          <div class=\"select-container relative\">\r\n+          <div class=\"relative\">\r\n             <select\r\n               id=\"lead\"\r\n-              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"lead1\">Lead 1</option>\r\n               <option value=\"lead2\">Lead 2</option>\r\n@@ -179,12 +158,12 @@\n             <label for=\"lead\" class=\"floating-label-select\">Lead</label>\r\n             <div class=\"error-message\" id=\"leadError\">This field is required.</div>\r\n           </div>\r\n           <!-- Stage (Select) -->\r\n-          <div class=\"select-container relative\">\r\n+          <div class=\"relative\">\r\n             <select\r\n               id=\"stage\"\r\n-              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"stage1\">Stage 1</option>\r\n               <option value=\"stage2\">Stage 2</option>\r\n@@ -199,18 +178,17 @@\n               id=\"expectedValueNumber\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n+            <!-- زر التحكم لزيادة/إنقاص القيمة -->\r\n             <div class=\"number-controls\">\r\n-              <!-- زر الزيادة: نعكس التأثير بحيث يظهر السهم لأعلى -->\r\n               <button type=\"button\" class=\"number-increment\">\r\n-                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n+                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n-              <!-- زر النقصان: يظهر السهم طبيعي (لأسفل) -->\r\n               <button type=\"button\" class=\"number-decrement\">\r\n-                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n             </div>\r\n@@ -230,14 +208,14 @@\n               class=\"floating-input peer\"\r\n             />\r\n             <div class=\"number-controls\">\r\n               <button type=\"button\" class=\"number-increment\">\r\n-                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n+                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n               <button type=\"button\" class=\"number-decrement\">\r\n-                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n             </div>\r\n@@ -263,12 +241,12 @@\n               This field is required.\r\n             </div>\r\n           </div>\r\n           <!-- Assigned To (Select) -->\r\n-          <div class=\"select-container relative\">\r\n+          <div class=\"relative\">\r\n             <select\r\n               id=\"assignedTo\"\r\n-              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"user1\">User 1</option>\r\n               <option value=\"user2\">User 2</option>\r\n@@ -340,12 +318,19 @@\n           </div>\r\n         </div>\r\n         <!-- Submit Buttons -->\r\n         <div class=\"flex gap-3 flex-wrap\">\r\n-          <button type=\"submit\" id=\"submitButton\" class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\">\r\n+          <button\r\n+            type=\"submit\"\r\n+            id=\"submitButton\"\r\n+            class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\"\r\n+          >\r\n             Create Opportunity\r\n           </button>\r\n-          <a href=\"dashboard.html\" class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\">\r\n+          <a\r\n+            href=\"dashboard.html\"\r\n+            class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\"\r\n+          >\r\n             Cancel\r\n           </a>\r\n         </div>\r\n       </form>\r\n@@ -366,9 +351,11 @@\n             const file = field.files[0];\r\n             if (file.size > 2 * 1024 * 1024) {\r\n               valid = false;\r\n               if (errorDiv) errorDiv.innerText = \"File must be less than 2MB.\";\r\n-            } else if (![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)) {\r\n+            } else if (\r\n+              ![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)\r\n+            ) {\r\n               valid = false;\r\n               if (errorDiv)\r\n                 errorDiv.innerText = \"File must be a PDF or JPG/PNG.\";\r\n             } else {\r\n@@ -393,9 +380,13 @@\n         return valid;\r\n       }\r\n       \r\n       function addValidationListener(field) {\r\n-        if (field.tagName.toLowerCase() === \"select\" || field.type === \"file\" || field.type === \"date\") {\r\n+        if (\r\n+          field.tagName.toLowerCase() === \"select\" ||\r\n+          field.type === \"file\" ||\r\n+          field.type === \"date\"\r\n+        ) {\r\n           field.addEventListener(\"change\", () => validateField(field));\r\n         } else {\r\n           field.addEventListener(\"input\", () => validateField(field));\r\n         }\r\n@@ -420,17 +411,10 @@\n         const field = document.getElementById(id);\r\n         if (field) addValidationListener(field);\r\n       });\r\n       \r\n-      // إضافة حدث لتحويل الحاوية الخاصة بالـ select عند focus و blur\r\n-      document.querySelectorAll(\".select-container select\").forEach((select) => {\r\n-        select.addEventListener(\"focus\", function () {\r\n-          this.parentElement.classList.add(\"open\");\r\n-        });\r\n-        select.addEventListener(\"blur\", function () {\r\n-          this.parentElement.classList.remove(\"open\");\r\n-        });\r\n-        // كما نقوم بإضافة/إزالة كلاس float عند تغيير القيمة\r\n+      // استدعاء جميع عناصر select لإضافة الكلاس \"float\" عند وجود قيمة\r\n+      document.querySelectorAll(\"select\").forEach((select) => {\r\n         select.addEventListener(\"change\", function () {\r\n           if (this.value !== \"\") {\r\n             this.classList.add(\"float\");\r\n           } else {\r\n@@ -626,9 +610,9 @@\n         fieldIds.forEach((id) => {\r\n           const field = document.getElementById(id);\r\n           if (field && !validateField(field)) {\r\n             field.classList.add(\"error\");\r\n-            if (field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")) {\r\n+            if(field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")){\r\n               document.getElementById(\"fileDropAreaOpportunity\").classList.add(\"border-red-500\");\r\n             }\r\n             const errorDiv = document.getElementById(id + \"Error\");\r\n             if (errorDiv) errorDiv.style.display = \"block\";\r\n"
                },
                {
                    "date": 1741580143114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,20 +6,43 @@\n     <title>Opportunity Form - Update</title>\r\n     <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n     <script src=\"https://cdn.tailwindcss.com\"></script>\r\n     <style>\r\n-      /* استبدال أيقونة select الافتراضية بـ SVG مخصص */\r\n-      select {\r\n+      /* حاوية الـ select لتعيين أيقونة مخصصة */\r\n+      .select-container {\r\n+        position: relative;\r\n+      }\r\n+      select:focus ~ .floating-label-select,\r\n+      select.float ~ .floating-label-select {\r\n+        top: 2px;\r\n+        font-size: 10px !important;\r\n+        font-weight: 600;\r\n+        color: #bbb6b0;\r\n+      }\r\n+      .select-container select {\r\n         -webkit-appearance: none;\r\n         -moz-appearance: none;\r\n         appearance: none;\r\n+        width: 100%;\r\n+      }\r\n+      .select-container::after {\r\n+        content: '';\r\n+        position: absolute;\r\n+        right: 10px;\r\n+        top: 50%;\r\n+        transform: translateY(-50%);\r\n+        width: 16px;\r\n+        height: 10px;\r\n         background-image: url(\"data:image/svg+xml,%3Csvg%20width%3D%2216%22%20height%3D%2210%22%20viewBox%3D%220%200%2016%2010%22%20fill%3D%22none%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cpath%20d%3D%22M0.615384%201.87495L8.30769%209.56726L16%201.87495L14.9038%200.79803L8.30769%207.39418L1.71154%200.79803L0.615384%201.87495Z%22%20fill%3D%22black%22/%3E%3C/svg%3E\");\r\n         background-repeat: no-repeat;\r\n-        background-position: right 10px center;\r\n         background-size: 16px 10px;\r\n+        transition: transform 0.3s;\r\n       }\r\n+      .select-container.open::after {\r\n+        transform: translateY(-50%) rotate(180deg);\r\n+      }\r\n       \r\n-      /* إخفاء أيقونات الspinner الافتراضية لحقل الأرقام */\r\n+      /* إخفاء أيقونات spinner الافتراضية في حقول الأرقام */\r\n       input[type=\"number\"]::-webkit-inner-spin-button,\r\n       input[type=\"number\"]::-webkit-outer-spin-button {\r\n         -webkit-appearance: none;\r\n         margin: 0;\r\n@@ -64,16 +87,17 @@\n         transform: translateY(-1rem) scale(0.75);\r\n         color: #bbb6b0;\r\n         font-weight: 600;\r\n       }\r\n-      select:focus ~ .floating-label-select,\r\n-      select.float ~ .floating-label-select {\r\n+      /* لاحظ أن الـ label الخاص بالـ select لم يتغير من حيث الموضع */\r\n+      .select-container:focus-within ~ .floating-label-select,\r\n+      .select-container.select-filled .floating-label-select {\r\n         top: 2px;\r\n         font-size: 10px !important;\r\n         font-weight: 600;\r\n         color: #bbb6b0;\r\n       }\r\n-      select:focus ~ .floating-label-select {\r\n+      .select-container:focus-within .floating-label-select {\r\n         color: #2563eb;\r\n       }\r\n       .error {\r\n         border: 1px solid red !important;\r\n@@ -135,8 +159,12 @@\n         border: none;\r\n         cursor: pointer;\r\n         padding: 0.2rem;\r\n       }\r\n+      .number-controls button svg {\r\n+        width: 12px;\r\n+        height: 8px;\r\n+      }\r\n     </style>\r\n   </head>\r\n   <body class=\"bg-[#EEF5FA]\">\r\n     <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n@@ -145,12 +173,12 @@\n       <form id=\"opportunityForm\" class=\"space-y-6\">\r\n         <!-- Fields Grid -->\r\n         <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n           <!-- Lead (Select) -->\r\n-          <div class=\"relative\">\r\n+          <div class=\"select-container relative\">\r\n             <select\r\n               id=\"lead\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"lead1\">Lead 1</option>\r\n               <option value=\"lead2\">Lead 2</option>\r\n@@ -158,12 +186,12 @@\n             <label for=\"lead\" class=\"floating-label-select\">Lead</label>\r\n             <div class=\"error-message\" id=\"leadError\">This field is required.</div>\r\n           </div>\r\n           <!-- Stage (Select) -->\r\n-          <div class=\"relative\">\r\n+          <div class=\"select-container relative\">\r\n             <select\r\n               id=\"stage\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"stage1\">Stage 1</option>\r\n               <option value=\"stage2\">Stage 2</option>\r\n@@ -178,17 +206,18 @@\n               id=\"expectedValueNumber\"\r\n               placeholder=\" \"\r\n               class=\"floating-input peer\"\r\n             />\r\n-            <!-- زر التحكم لزيادة/إنقاص القيمة -->\r\n             <div class=\"number-controls\">\r\n+              <!-- زر الزيادة: نعكس التأثير بحيث يظهر السهم لأعلى -->\r\n               <button type=\"button\" class=\"number-increment\">\r\n-                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n+              <!-- زر النقصان: يظهر السهم طبيعي (لأسفل) -->\r\n               <button type=\"button\" class=\"number-decrement\">\r\n-                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n+                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n             </div>\r\n@@ -208,14 +237,14 @@\n               class=\"floating-input peer\"\r\n             />\r\n             <div class=\"number-controls\">\r\n               <button type=\"button\" class=\"number-increment\">\r\n-                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n+                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n               <button type=\"button\" class=\"number-decrement\">\r\n-                <svg width=\"16\" height=\"10\" viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\r\n+                <svg viewBox=\"0 0 16 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                   <path d=\"M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z\" fill=\"black\"/>\r\n                 </svg>\r\n               </button>\r\n             </div>\r\n@@ -241,12 +270,12 @@\n               This field is required.\r\n             </div>\r\n           </div>\r\n           <!-- Assigned To (Select) -->\r\n-          <div class=\"relative\">\r\n+          <div class=\"select-container relative\">\r\n             <select\r\n               id=\"assignedTo\"\r\n-              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n+              class=\"block w-full rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n             >\r\n               <option value=\"\" selected disabled hidden></option>\r\n               <option value=\"user1\">User 1</option>\r\n               <option value=\"user2\">User 2</option>\r\n@@ -318,19 +347,12 @@\n           </div>\r\n         </div>\r\n         <!-- Submit Buttons -->\r\n         <div class=\"flex gap-3 flex-wrap\">\r\n-          <button\r\n-            type=\"submit\"\r\n-            id=\"submitButton\"\r\n-            class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\"\r\n-          >\r\n+          <button type=\"submit\" id=\"submitButton\" class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\">\r\n             Create Opportunity\r\n           </button>\r\n-          <a\r\n-            href=\"dashboard.html\"\r\n-            class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\"\r\n-          >\r\n+          <a href=\"dashboard.html\" class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\">\r\n             Cancel\r\n           </a>\r\n         </div>\r\n       </form>\r\n@@ -351,11 +373,9 @@\n             const file = field.files[0];\r\n             if (file.size > 2 * 1024 * 1024) {\r\n               valid = false;\r\n               if (errorDiv) errorDiv.innerText = \"File must be less than 2MB.\";\r\n-            } else if (\r\n-              ![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)\r\n-            ) {\r\n+            } else if (![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)) {\r\n               valid = false;\r\n               if (errorDiv)\r\n                 errorDiv.innerText = \"File must be a PDF or JPG/PNG.\";\r\n             } else {\r\n@@ -380,13 +400,9 @@\n         return valid;\r\n       }\r\n       \r\n       function addValidationListener(field) {\r\n-        if (\r\n-          field.tagName.toLowerCase() === \"select\" ||\r\n-          field.type === \"file\" ||\r\n-          field.type === \"date\"\r\n-        ) {\r\n+        if (field.tagName.toLowerCase() === \"select\" || field.type === \"file\" || field.type === \"date\") {\r\n           field.addEventListener(\"change\", () => validateField(field));\r\n         } else {\r\n           field.addEventListener(\"input\", () => validateField(field));\r\n         }\r\n@@ -411,10 +427,17 @@\n         const field = document.getElementById(id);\r\n         if (field) addValidationListener(field);\r\n       });\r\n       \r\n-      // استدعاء جميع عناصر select لإضافة الكلاس \"float\" عند وجود قيمة\r\n-      document.querySelectorAll(\"select\").forEach((select) => {\r\n+      // إضافة حدث لتحويل الحاوية الخاصة بالـ select عند focus و blur\r\n+      document.querySelectorAll(\".select-container select\").forEach((select) => {\r\n+        select.addEventListener(\"focus\", function () {\r\n+          this.parentElement.classList.add(\"open\");\r\n+        });\r\n+        select.addEventListener(\"blur\", function () {\r\n+          this.parentElement.classList.remove(\"open\");\r\n+        });\r\n+        // كما نقوم بإضافة/إزالة كلاس float عند تغيير القيمة\r\n         select.addEventListener(\"change\", function () {\r\n           if (this.value !== \"\") {\r\n             this.classList.add(\"float\");\r\n           } else {\r\n@@ -610,9 +633,9 @@\n         fieldIds.forEach((id) => {\r\n           const field = document.getElementById(id);\r\n           if (field && !validateField(field)) {\r\n             field.classList.add(\"error\");\r\n-            if(field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")){\r\n+            if (field.type === \"file\" && document.getElementById(\"fileDropAreaOpportunity\")) {\r\n               document.getElementById(\"fileDropAreaOpportunity\").classList.add(\"border-red-500\");\r\n             }\r\n             const errorDiv = document.getElementById(id + \"Error\");\r\n             if (errorDiv) errorDiv.style.display = \"block\";\r\n"
                }
            ],
            "date": 1741542126345,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n  <head>\r\n    <meta charset=\"UTF-8\" />\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n    <title>Opportunity Form - Update</title>\r\n    <link rel=\"stylesheet\" href=\"./assets/css/style.css\" />\r\n    <script src=\"https://cdn.tailwindcss.com\"></script>\r\n    <style>\r\n      /* Floating label & error styles (adapted from your code) */\r\n      .floating-input {\r\n        display: block;\r\n        border: 1px solid #cae0f0;\r\n        border-radius: 12px;\r\n        padding: 1rem 0.625rem 0.2rem;\r\n        width: 100%;\r\n        font-size: 16px;\r\n        color: #000;\r\n        font-weight: 400;\r\n        appearance: none;\r\n        outline: none;\r\n        transition: border-color 0.3s;\r\n      }\r\n      .floating-input:focus {\r\n        border-color: #2563eb;\r\n      }\r\n      .floating-input::placeholder {\r\n        color: transparent;\r\n      }\r\n      .floating-label,\r\n      .floating-label-select {\r\n        position: absolute;\r\n        left: 0.625rem;\r\n        top: 1rem;\r\n        font-size: 12px;\r\n        color: #bbb6b0;\r\n        pointer-events: none;\r\n        transition: transform 0.3s, color 0.3s;\r\n        transform-origin: 0;\r\n      }\r\n      .floating-input:focus ~ .floating-label,\r\n      .floating-input:not(:placeholder-shown) ~ .floating-label {\r\n        transform: translateY(-1rem) scale(0.75);\r\n        color: #bbb6b0;\r\n        font-weight: 600;\r\n      }\r\n      select:focus ~ .floating-label-select,\r\n      select.float ~ .floating-label-select {\r\n        top: 2px;\r\n        font-size: 10px !important;\r\n        font-weight: 600;\r\n        color: #bbb6b0;\r\n      }\r\n      select:focus ~ .floating-label-select {\r\n        color: #2563eb;\r\n      }\r\n      .error {\r\n        border: 1px solid red !important;\r\n      }\r\n      .error-message {\r\n        color: red;\r\n        font-size: 12px;\r\n        display: none;\r\n      }\r\n      button[disabled] {\r\n        opacity: 0.6;\r\n      }\r\n      /* Drag & drop file area style */\r\n      .file-drop-area {\r\n        margin-top: 1rem;\r\n        border: 2px dashed #3b82f6;\r\n        border-radius: 8px;\r\n        padding: 2rem;\r\n        text-align: center;\r\n        background: #eef5fa;\r\n        cursor: pointer;\r\n        transition: background 0.3s;\r\n      }\r\n      .file-drop-area:hover {\r\n        background: #dbeafe;\r\n      }\r\n    </style>\r\n  </head>\r\n  <body class=\"bg-[#EEF5FA]\">\r\n    <div class=\"container bg-white p-6 rounded-2xl shadow mb-8\">\r\n      <h1 class=\"text-2xl font-semibold text-[#0D0D0C]\">Create Opportunity</h1>\r\n      <hr class=\"my-4\" />\r\n      <form id=\"opportunityForm\" class=\"space-y-6\">\r\n        <!-- Grid of select, number, text, date, etc. fields -->\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <!-- Lead (Select) -->\r\n          <div class=\"relative\">\r\n            <select\r\n              id=\"lead\"\r\n              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n            >\r\n              <option value=\"\" selected disabled hidden></option>\r\n              <option value=\"lead1\">Lead 1</option>\r\n              <option value=\"lead2\">Lead 2</option>\r\n            </select>\r\n            <label for=\"lead\" class=\"floating-label-select\">Lead</label>\r\n            <div class=\"error-message\" id=\"leadError\">This field is required.</div>\r\n          </div>\r\n          <!-- Stage (Select) -->\r\n          <div class=\"relative\">\r\n            <select\r\n              id=\"stage\"\r\n              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n            >\r\n              <option value=\"\" selected disabled hidden></option>\r\n              <option value=\"stage1\">Stage 1</option>\r\n              <option value=\"stage2\">Stage 2</option>\r\n            </select>\r\n            <label for=\"stage\" class=\"floating-label-select\">Stage</label>\r\n            <div class=\"error-message\" id=\"stageError\">This field is required.</div>\r\n          </div>\r\n          <!-- Expected Value (Number) -->\r\n          <div class=\"relative\">\r\n            <input\r\n              type=\"number\"\r\n              id=\"expectedValueNumber\"\r\n              placeholder=\" \"\r\n              class=\"floating-input peer\"\r\n            />\r\n            <label for=\"expectedValueNumber\" class=\"floating-label\">Expected Value (Number)</label>\r\n            <div class=\"error-message\" id=\"expectedValueNumberError\">This field is required.</div>\r\n          </div>\r\n          <!-- Expected Value (Text) -->\r\n          <div class=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              id=\"expectedValueText\"\r\n              placeholder=\" \"\r\n              class=\"floating-input peer\"\r\n            />\r\n            <label for=\"expectedValueText\" class=\"floating-label\">Expected Value (Text)</label>\r\n            <div class=\"error-message\" id=\"expectedValueTextError\">This field is required.</div>\r\n          </div>\r\n          <!-- Status (Select) -->\r\n          <div class=\"relative\">\r\n            <select\r\n              id=\"status\"\r\n              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n            >\r\n              <option value=\"\" selected disabled hidden></option>\r\n              <option value=\"open\">Open</option>\r\n              <option value=\"closed\">Closed</option>\r\n            </select>\r\n            <label for=\"status\" class=\"floating-label-select\">Status</label>\r\n            <div class=\"error-message\" id=\"statusError\">This field is required.</div>\r\n          </div>\r\n          <!-- Priority (Select) -->\r\n          <div class=\"relative\">\r\n            <select\r\n              id=\"priority\"\r\n              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n            >\r\n              <option value=\"\" selected disabled hidden></option>\r\n              <option value=\"low\">Low</option>\r\n              <option value=\"medium\">Medium</option>\r\n              <option value=\"high\">High</option>\r\n            </select>\r\n            <label for=\"priority\" class=\"floating-label-select\">Priority</label>\r\n            <div class=\"error-message\" id=\"priorityError\">This field is required.</div>\r\n          </div>\r\n          <!-- Closure Date (Date) -->\r\n          <div class=\"relative\">\r\n            <input\r\n              type=\"date\"\r\n              id=\"closureDate\"\r\n              placeholder=\" \"\r\n              class=\"floating-input peer\"\r\n            />\r\n            <label for=\"closureDate\" class=\"floating-label\">Closure Date</label>\r\n            <div class=\"error-message\" id=\"closureDateError\">This field is required.</div>\r\n          </div>\r\n          <!-- Actual Value (Number) -->\r\n          <div class=\"relative\">\r\n            <input\r\n              type=\"number\"\r\n              id=\"actualValue\"\r\n              placeholder=\" \"\r\n              class=\"floating-input peer\"\r\n            />\r\n            <label for=\"actualValue\" class=\"floating-label\">Actual Value</label>\r\n            <div class=\"error-message\" id=\"actualValueError\">This field is required.</div>\r\n          </div>\r\n          <!-- Loss Reason (Text) -->\r\n          <div class=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              id=\"lossReason\"\r\n              placeholder=\" \"\r\n              class=\"floating-input peer\"\r\n            />\r\n            <label for=\"lossReason\" class=\"floating-label\">Loss Reason</label>\r\n            <div class=\"error-message\" id=\"lossReasonError\">This field is required.</div>\r\n          </div>\r\n          <!-- Assigned To (Select) -->\r\n          <div class=\"relative\">\r\n            <select\r\n              id=\"assignedTo\"\r\n              class=\"block w-full appearance-none rounded-lg floating-input text-base text-black border border-[#CAE0F0] focus:outline-none\"\r\n            >\r\n              <option value=\"\" selected disabled hidden></option>\r\n              <option value=\"user1\">User 1</option>\r\n              <option value=\"user2\">User 2</option>\r\n            </select>\r\n            <label for=\"assignedTo\" class=\"floating-label-select\">Assigned To</label>\r\n            <div class=\"error-message\" id=\"assignedToError\">This field is required.</div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Competitors Section (Dynamic Array) -->\r\n        <div id=\"competitorsSection\">\r\n          <h2 class=\"text-xl font-semibold mt-4\">Competitors</h2>\r\n          <div id=\"competitorsContainer\" class=\"space-y-4\">\r\n            <!-- Competitor entries will be added here dynamically -->\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            class=\"mt-2 bg-blue-500 text-white px-4 py-2 rounded\"\r\n            onclick=\"addCompetitor()\"\r\n          >\r\n            Add Competitor\r\n          </button>\r\n        </div>\r\n\r\n        <!-- File Upload: Drag & Drop -->\r\n        <div>\r\n          <div\r\n            id=\"fileDropAreaOpportunity\"\r\n            class=\"file-drop-area\"\r\n          >\r\n            <input type=\"file\" id=\"opportunityFile\" class=\"hidden\" />\r\n            <div class=\"flex flex-col justify-center items-center gap-4\">\r\n              <span\r\n                class=\"text-[#559BD0] font-bold text-xl\"\r\n                id=\"fileInputLabelOpportunity\"\r\n              >\r\n                Drag & Drop your file or Browse\r\n              </span>\r\n              <div id=\"fileDropAreaImageOpportunity\">\r\n                <!-- Insert your default SVG icon here if desired -->\r\n                <svg width=\"103\" height=\"102\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <rect width=\"103\" height=\"102\" rx=\"12\" fill=\"#cae0f0\"/>\r\n                </svg>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <span id=\"currentFileNameSpanOpportunity\" class=\"mt-2 block text-sm text-gray-700\"></span>\r\n          <div class=\"error-message\" id=\"fileOpportunityError\">This field is required.</div>\r\n        </div>\r\n\r\n        <!-- Notes (Textarea) -->\r\n        <div class=\"relative\">\r\n          <textarea\r\n            id=\"notes\"\r\n            placeholder=\" \"\r\n            class=\"block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black border border-[#CAE0F0] peer h-32\"\r\n          ></textarea>\r\n          <label for=\"notes\" class=\"floating-label\">Notes</label>\r\n          <div class=\"error-message\" id=\"notesError\">This field is required.</div>\r\n        </div>\r\n\r\n        <!-- Details (Textarea) -->\r\n        <div class=\"relative\">\r\n          <textarea\r\n            id=\"details\"\r\n            placeholder=\" \"\r\n            class=\"block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black border border-[#CAE0F0] peer h-36\"\r\n          ></textarea>\r\n          <label for=\"details\" class=\"floating-label\">Details</label>\r\n          <div class=\"error-message\" id=\"detailsError\">This field is required.</div>\r\n        </div>\r\n\r\n        <!-- Submit Buttons -->\r\n        <div class=\"flex gap-3 flex-wrap\">\r\n          <button\r\n            type=\"submit\"\r\n            id=\"submitButton\"\r\n            class=\"flex-grow bg-[#559BD0] text-white px-4 py-2 rounded font-bold\"\r\n          >\r\n            Create Opportunity\r\n          </button>\r\n          <a\r\n            href=\"dashboard.html\"\r\n            class=\"flex-grow border border-[#559BD0] text-[#559BD0] px-4 py-2 rounded text-center font-bold\"\r\n          >\r\n            Cancel\r\n          </a>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <script>\r\n      // Global variables for file name and competitor counter\r\n      let currentFileNameOpportunity = \"\";\r\n      let competitorCounter = 1;\r\n\r\n      // Validate a given field (supports select, file, and text/number inputs)\r\n      function validateField(field) {\r\n        const errorDiv = document.getElementById(field.id + \"Error\");\r\n        let valid = true;\r\n        if (field.tagName.toLowerCase() === \"select\") {\r\n          valid = field.value !== \"\";\r\n        } else if (field.type === \"file\") {\r\n          if (field.files && field.files.length > 0) {\r\n            const file = field.files[0];\r\n            if (file.size > 2 * 1024 * 1024) {\r\n              valid = false;\r\n              if (errorDiv) errorDiv.innerText = \"File must be less than 2MB.\";\r\n            } else if (\r\n              ![\"application/pdf\", \"image/jpeg\", \"image/png\"].includes(file.type)\r\n            ) {\r\n              valid = false;\r\n              if (errorDiv)\r\n                errorDiv.innerText = \"File must be a PDF or JPG/PNG.\";\r\n            } else {\r\n              valid = true;\r\n              if (errorDiv) errorDiv.innerText = \"\";\r\n            }\r\n          } else {\r\n            valid = currentFileNameOpportunity !== \"\";\r\n            if (!valid && errorDiv)\r\n              errorDiv.innerText = \"This field is required.\";\r\n          }\r\n        } else {\r\n          valid = field.value.trim() !== \"\";\r\n        }\r\n        if (valid) {\r\n          field.classList.remove(\"error\");\r\n          if (errorDiv) errorDiv.style.display = \"none\";\r\n        }\r\n        return valid;\r\n      }\r\n\r\n      // Attach validation event listener to a field\r\n      function addValidationListener(field) {\r\n        if (\r\n          field.tagName.toLowerCase() === \"select\" ||\r\n          field.type === \"file\" ||\r\n          field.type === \"date\"\r\n        ) {\r\n          field.addEventListener(\"change\", () => validateField(field));\r\n        } else {\r\n          field.addEventListener(\"input\", () => validateField(field));\r\n        }\r\n      }\r\n\r\n      // Attach validation to standard fields\r\n      [\r\n        \"lead\",\r\n        \"stage\",\r\n        \"expectedValueNumber\",\r\n        \"expectedValueText\",\r\n        \"status\",\r\n        \"priority\",\r\n        \"closureDate\",\r\n        \"actualValue\",\r\n        \"lossReason\",\r\n        \"assignedTo\",\r\n        \"opportunityFile\",\r\n        \"notes\",\r\n        \"details\"\r\n      ].forEach((id) => {\r\n        const field = document.getElementById(id);\r\n        if (field) addValidationListener(field);\r\n      });\r\n\r\n      // Drag & Drop File Upload Logic for Opportunity File\r\n      const opportunityFileInput = document.getElementById(\"opportunityFile\");\r\n      const fileDropAreaOpportunity = document.getElementById(\"fileDropAreaOpportunity\");\r\n      const fileInputLabelOpportunity = document.getElementById(\"fileInputLabelOpportunity\");\r\n\r\n      fileDropAreaOpportunity.addEventListener(\"click\", () => opportunityFileInput.click());\r\n      fileDropAreaOpportunity.addEventListener(\"dragover\", (e) => {\r\n        e.preventDefault();\r\n        fileDropAreaOpportunity.classList.add(\"bg-blue-100\");\r\n      });\r\n      fileDropAreaOpportunity.addEventListener(\"dragleave\", (e) => {\r\n        e.preventDefault();\r\n        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n      });\r\n      fileDropAreaOpportunity.addEventListener(\"drop\", (e) => {\r\n        e.preventDefault();\r\n        fileDropAreaOpportunity.classList.remove(\"bg-blue-100\");\r\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n          opportunityFileInput.files = e.dataTransfer.files;\r\n          handleOpportunityFileChange();\r\n        }\r\n      });\r\n\r\n      opportunityFileInput.addEventListener(\"change\", handleOpportunityFileChange);\r\n\r\n      function handleOpportunityFileChange() {\r\n        if (opportunityFileInput.files && opportunityFileInput.files.length > 0) {\r\n          const file = opportunityFileInput.files[0];\r\n          currentFileNameOpportunity = file.name;\r\n          fileInputLabelOpportunity.textContent = \"Selected File: \" + currentFileNameOpportunity;\r\n          if (file.type.startsWith(\"image/\")) {\r\n            const reader = new FileReader();\r\n            reader.onload = function (e) {\r\n              document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n                `<img src=\"${e.target.result}\" alt=\"Image Preview\" class=\"max-w-full max-h-48\" />`;\r\n            };\r\n            reader.readAsDataURL(file);\r\n          } else if (file.type === \"application/pdf\") {\r\n            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n              `<svg width=\"100\" height=\"100\">\r\n                <rect width=\"100\" height=\"100\" rx=\"15\" fill=\"#E53E3E\"/>\r\n                <text x=\"50\" y=\"60\" text-anchor=\"middle\" fill=\"white\" font-size=\"40\" font-family=\"Arial\" font-weight=\"bold\">PDF</text>\r\n              </svg>`;\r\n          } else {\r\n            document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n              `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n                <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n              </svg>`;\r\n          }\r\n        } else {\r\n          currentFileNameOpportunity = \"\";\r\n          fileInputLabelOpportunity.textContent = \"Drag & Drop your file or Browse\";\r\n          document.getElementById(\"fileDropAreaImageOpportunity\").innerHTML =\r\n            `<svg width=\"103\" height=\"102\" fill=\"#cae0f0\">\r\n              <rect width=\"103\" height=\"102\" rx=\"12\"/>\r\n            </svg>`;\r\n        }\r\n        validateField(opportunityFileInput);\r\n      }\r\n\r\n      // Competitors dynamic field logic\r\n      function addCompetitor() {\r\n        const container = document.getElementById(\"competitorsContainer\");\r\n        const competitorDiv = document.createElement(\"div\");\r\n        competitorDiv.className = \"competitor-entry border p-4 rounded relative\";\r\n        competitorDiv.id = \"competitor_\" + competitorCounter;\r\n\r\n        // Competitor Name Input\r\n        const nameDiv = document.createElement(\"div\");\r\n        nameDiv.className = \"relative mb-4\";\r\n        const nameInput = document.createElement(\"input\");\r\n        nameInput.type = \"text\";\r\n        nameInput.id = \"competitorName_\" + competitorCounter;\r\n        nameInput.placeholder = \" \";\r\n        nameInput.className = \"floating-input peer\";\r\n        const nameLabel = document.createElement(\"label\");\r\n        nameLabel.htmlFor = nameInput.id;\r\n        nameLabel.className = \"floating-label\";\r\n        nameLabel.innerText = \"Competitor Name\";\r\n        const nameError = document.createElement(\"div\");\r\n        nameError.className = \"error-message\";\r\n        nameError.id = nameInput.id + \"Error\";\r\n        nameError.innerText = \"This field is required.\";\r\n        nameDiv.appendChild(nameInput);\r\n        nameDiv.appendChild(nameLabel);\r\n        nameDiv.appendChild(nameError);\r\n\r\n        // Competitor Attachment Input\r\n        const fileDiv = document.createElement(\"div\");\r\n        fileDiv.className = \"relative\";\r\n        const fileInput = document.createElement(\"input\");\r\n        fileInput.type = \"file\";\r\n        fileInput.id = \"competitorFile_\" + competitorCounter;\r\n        fileInput.className = \"block\";\r\n        const fileError = document.createElement(\"div\");\r\n        fileError.className = \"error-message\";\r\n        fileError.id = fileInput.id + \"Error\";\r\n        fileError.innerText = \"File is required.\";\r\n        fileDiv.appendChild(fileInput);\r\n        fileDiv.appendChild(fileError);\r\n\r\n        // Delete Button for competitor\r\n        const deleteBtn = document.createElement(\"button\");\r\n        deleteBtn.type = \"button\";\r\n        deleteBtn.className = \"absolute top-0 right-0 bg-red-500 text-white px-2 py-1 rounded\";\r\n        deleteBtn.innerText = \"Delete\";\r\n        deleteBtn.onclick = function () {\r\n          competitorDiv.remove();\r\n        };\r\n\r\n        competitorDiv.appendChild(deleteBtn);\r\n        competitorDiv.appendChild(nameDiv);\r\n        competitorDiv.appendChild(fileDiv);\r\n        container.appendChild(competitorDiv);\r\n\r\n        competitorCounter++;\r\n        addValidationListener(nameInput);\r\n        addValidationListener(fileInput);\r\n      }\r\n\r\n      // Form submission simulation with validations\r\n      document\r\n        .getElementById(\"opportunityForm\")\r\n        .addEventListener(\"submit\", function (event) {\r\n          event.preventDefault();\r\n          let firstError = null;\r\n          const fieldIds = [\r\n            \"lead\",\r\n            \"stage\",\r\n            \"expectedValueNumber\",\r\n            \"expectedValueText\",\r\n            \"status\",\r\n            \"priority\",\r\n            \"closureDate\",\r\n            \"actualValue\",\r\n            \"lossReason\",\r\n            \"assignedTo\",\r\n            \"opportunityFile\",\r\n            \"notes\",\r\n            \"details\"\r\n          ];\r\n          fieldIds.forEach((id) => {\r\n            const field = document.getElementById(id);\r\n            if (field && !validateField(field)) {\r\n              field.classList.add(\"error\");\r\n              const errorDiv = document.getElementById(id + \"Error\");\r\n              if (errorDiv) errorDiv.style.display = \"block\";\r\n              if (!firstError) firstError = field;\r\n            }\r\n          });\r\n\r\n          // Validate each competitor entry\r\n          document.querySelectorAll(\".competitor-entry\").forEach((entry) => {\r\n            const nameInput = entry.querySelector(\"input[type='text']\");\r\n            const fileInput = entry.querySelector(\"input[type='file']\");\r\n            if (nameInput && nameInput.value.trim() === \"\") {\r\n              nameInput.classList.add(\"error\");\r\n              const err = document.getElementById(nameInput.id + \"Error\");\r\n              if (err) err.style.display = \"block\";\r\n              if (!firstError) firstError = nameInput;\r\n            }\r\n            if (fileInput && fileInput.files.length === 0) {\r\n              fileInput.classList.add(\"error\");\r\n              const err = document.getElementById(fileInput.id + \"Error\");\r\n              if (err) err.style.display = \"block\";\r\n              if (!firstError) firstError = fileInput;\r\n            }\r\n          });\r\n\r\n          if (firstError) {\r\n            firstError.focus();\r\n          } else {\r\n            const submitButton = document.getElementById(\"submitButton\");\r\n            submitButton.disabled = true;\r\n            submitButton.innerText = \"Creating...\";\r\n            // Here you can collect the form data and send it to your API.\r\n            // For example:\r\n            const formData = new FormData(document.getElementById(\"opportunityForm\"));\r\n            // Append competitor data\r\n            document.querySelectorAll(\".competitor-entry\").forEach((entry, index) => {\r\n              const nameInput = entry.querySelector(\"input[type='text']\");\r\n              const fileInput = entry.querySelector(\"input[type='file']\");\r\n              formData.append(`competitors[${index}][name]`, nameInput.value);\r\n              if (fileInput.files.length > 0) {\r\n                formData.append(`competitors[${index}][file]`, fileInput.files[0]);\r\n              }\r\n            });\r\n            console.log(\"Form Data Submitted\");\r\n            setTimeout(() => {\r\n              submitButton.disabled = false;\r\n              submitButton.innerText = \"Create Opportunity\";\r\n              alert(\"Opportunity Created Successfully!\");\r\n            }, 2000);\r\n          }\r\n        });\r\n    </script>\r\n  </body>\r\n</html>\r\n"
        }
    ]
}