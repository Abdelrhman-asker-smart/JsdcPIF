<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Form - Update</title>
  <link rel="stylesheet" href="./assets/css/style.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .error {
      border: 1px solid red !important;
    }

    .error-message {
      color: red;
      font-size: 12px;
      display: none;
    }

    button[disabled] {
      opacity: 0.6;
    }



    .floating-input {
      display: block;
      border: 1px solid #cae0f0;
      border-radius: 12px;
      padding: 1rem 0.625rem 0.2rem;
      width: 100%;
      font-size: 16px;
      color: #000;
      font-weight: 400;
      appearance: none;
      outline: none;
      transition: border-color 0.3s;
    }

    .floating-input:focus {
      border-color: #2563eb;
    }

    .floating-input:focus~.floating-label {
      color: #2563eb !important;
    }

    .floating-input::placeholder {
      color: transparent;
    }

    .floating-label,select:focus ~ .floating-label-select {
      position: absolute;
      left: 0.625rem;
      top: 1rem;
      font-size: 12px;
      color: #bbb6b0;

      pointer-events: none;
      transition: transform 0.3s, color 0.3s;
      transform-origin: 0;
    }

    .floating-input:focus~.floating-label,
    .floating-input:not(:placeholder-shown)~.floating-label {
      transform: translateY(-1rem) scale(0.75);
      color: #bbb6b0;
      font-weight: 600;
    }

  select ~  .floating-label-select {
      position: absolute;
      left: 0.625rem;
      padding: 0;
      top: 2rem;
      color: #bbb6b0;
      pointer-events: none;
      transition: transform 0.3s, font-size 0.3s, top 0.3s;
      transform-origin: left top;
    }

    select:focus~.floating-label,
    select:not(:invalid)~.floating-label {
      top: 20px;
      font-size: 12px;
      color: #2563eb;
    }
  </style>
</head>

<body class="bg-[#EEF5FA]">
  <!-- Header Section -->
  <div class="h-[333px] flex items-center relative bg-center rounded-b-[60px] bg-cover"
    style="background-image: url('./assets/images/bgHero.png')">
    <div class="absolute top-0 left-0 w-full h-full rounded-b-[60px]" style="
          background: linear-gradient(
            180deg,
            rgba(28, 107, 165, 0.7) 0%,
            rgba(103, 150, 222, 0.69) 50%
          );
        "></div>
    <img class="absolute bottom-[-104px] right-0" src="./assets/images/bgHero2.svg" alt="Decorative" />
    <div class="container relative z-10">
      <h1 class="text-[32px] text-white font-bold">Crm</h1>
      <h2 class="text-[20px] font-bold text-white">
        home/<span class="text-[#CAE0F0]"> crm</span>
      </h2>
    </div>
  </div>
  <!-- Back Button -->
  <div class="container flex items-center gap-5 my-20">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g clip-path="url(#clip0_318_2435)">
        <path d="M22.5469 12H1.45312" stroke="#050504" stroke-width="3" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M11.2969 21.8438L1.45312 12L11.2969 2.15625" stroke="#050504" stroke-width="3" stroke-linecap="round"
          stroke-linejoin="round" />
      </g>
      <defs>
        <clipPath id="clip0_318_2435">
          <rect width="24" height="24" fill="white" transform="matrix(-1 0 0 1 24 0)" />
        </clipPath>
      </defs>
    </svg>
    <p class="text-[#4E4E4E] font-semibold text-2xl">back to srm</p>
  </div>
  <!-- Form Container -->
  <div class="container bg-white p-6 rounded-2xl shadow">
    <h1 class="text-2xl font-semibold text-[#0D0D0C]">Create Customer</h1>
    <hr class="my-4" />
    <form id="customerForm" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Full Name -->
        <div class="relative">
          <input type="text" id="fullName" placeholder=" " class="floating-input peer " />
          <label for="fullName" class="floating-label">Full Name</label>
          <div class="error-message" id="fullNameError">
            This field is required.
          </div>
        </div>
        <!-- Last Name -->
        <div class="relative">
          <input type="text" id="lastName" placeholder=" " class="floating-input peer " />
          <label for="lastName" class="floating-label">Last Name</label>
          <div class="error-message" id="lastNameError">
            This field is required.
          </div>
        </div>
        <!-- Email -->
        <div class="relative">
          <input type="email" id="email" placeholder=" " class="floating-input peer " />
          <label for="email" class="floating-label">Email</label>
          <div class="error-message" id="emailError">
            Invalid email format.
          </div>
        </div>
        <!-- Website -->
        <div class="relative">
          <input type="url" id="website" placeholder=" " class="floating-input peer " />
          <label for="website" class="floating-label">Website</label>
          <div class="error-message" id="websiteError">
            Invalid URL format.
          </div>
        </div>
        <!-- Address -->
        <div class="relative">
          <input type="text" id="address" placeholder=" " class="floating-input peer " />
          <label for="address" class="floating-label">Address</label>
          <div class="error-message" id="addressError">
            This field is required.
          </div>
        </div>
        <!-- Customer Type -->
        <div class="relative">
          <select id="customerType"
            class="block w-full appearance-none rounded-lg floating-input text-base text-black font-normal border border-[#CAE0F0] focus:outline-none focus:ring-0 focus:border-blue-600 peer">
            <option value="" selected disabled hidden></option>
            <option value="regular">Regular</option>
            <option value="vip">VIP</option>
          </select>
          <div class="error-message" id="customerTypeError">
            This field is required.
          </div>

          <label for="customerType" class="floating-label-select">Customer Type</label>
          <div class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
            <svg width="16" height="10" viewBox="0 0 16 10" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M0.615384 1.87495L8.30769 9.56726L16 1.87495L14.9038 0.79803L8.30769 7.39418L1.71154 0.79803L0.615384 1.87495Z"
                fill="black" />
            </svg>
          </div>
        </div>
      </div>
      <!-- Phone Numbers  -->
      <div id="phoneNumbers" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="phone-group relative">
          <input type="tel" id="phone0" placeholder=" " class="phone floating-input peer " />
          <label for="phone" class="floating-label">Phone Number</label>
          <div class="error-message phone-error">This field is required.</div>
        </div>
        <div class="flex flex-col gap-2 justify-center phone-container">
          <button type="button"
            class="border border-[#559BD0] text-[#559BD0] text-[16px] font-[600] p-[8px] rounded-[8px] flex gap-3 justify-center items-center"
            onclick="addPhoneNumber()">
            <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect y="0.182617" width="24" height="24" rx="4" fill="#559BD0" />
              <path
                d="M17 11.1826H13V7.18262C13 6.9174 12.8946 6.66305 12.7071 6.47551C12.5196 6.28797 12.2652 6.18262 12 6.18262C11.7348 6.18262 11.4804 6.28797 11.2929 6.47551C11.1054 6.66305 11 6.9174 11 7.18262V11.1826H7C6.73478 11.1826 6.48043 11.288 6.29289 11.4755C6.10536 11.663 6 11.9174 6 12.1826C6 12.4478 6.10536 12.7022 6.29289 12.8897C6.48043 13.0773 6.73478 13.1826 7 13.1826H11V17.1826C11 17.4478 11.1054 17.7022 11.2929 17.8897C11.4804 18.0773 11.7348 18.1826 12 18.1826C12.2652 18.1826 12.5196 18.0773 12.7071 17.8897C12.8946 17.7022 13 17.4478 13 17.1826V13.1826H17C17.2652 13.1826 17.5196 13.0773 17.7071 12.8897C17.8946 12.7022 18 12.4478 18 12.1826C18 11.9174 17.8946 11.663 17.7071 11.4755C17.5196 11.288 17.2652 11.1826 17 11.1826Z"
                fill="white" />
            </svg>
            Add to phone number
          </button>
          <p class="text-[12px] font-[600] text-[#BBB6B0] text-center">
            you can add more than phone number
          </p>
        </div>
      </div>

      <div>
        <div id="fileDropArea"
          class="mt-1 border-2 border-dashed border-blue-500 rounded-md p-[35px] text-center bg-[#EEF5FA] cursor-pointer hover:bg-blue-100">
          <input type="file" id="file" class="hidden" />
          <div class="flex flex-col justify-center items-center gap-[20px]">
            <span class="text-[#559BD0] font-[700] text-[20px]">Drag&Drop your file or Browse</span>

            <svg width="103" height="102" viewBox="0 0 103 102" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g opacity="0.2">
                <g clip-path="url(#clip0_318_2422)">
                  <path
                    d="M81.0829 0.182739H21.4211C15.772 0.189455 10.3562 2.41947 6.36167 6.38363C2.36714 10.3478 0.120048 15.7224 0.113281 21.3286L0.113281 80.5369C0.120048 86.1431 2.36714 91.5177 6.36167 95.4818C10.3562 99.446 15.772 101.676 21.4211 101.683H81.0829C86.732 101.676 92.1478 99.446 96.1423 95.4818C100.137 91.5177 102.384 86.1431 102.391 80.5369V21.3286C102.384 15.7224 100.137 10.3478 96.1423 6.38363C92.1478 2.41947 86.732 0.189455 81.0829 0.182739V0.182739ZM21.4211 8.64107H81.0829C84.4736 8.64107 87.7255 9.97779 90.1231 12.3572C92.5207 14.7365 93.8676 17.9636 93.8676 21.3286V80.5369C93.8603 82.4209 93.4232 84.2789 92.5891 85.9714L53.5405 47.2195C51.5618 45.2554 49.2126 43.6973 46.627 42.6343C44.0415 41.5712 41.2702 41.0241 38.4716 41.0241C35.6729 41.0241 32.9017 41.5712 30.3161 42.6343C27.7306 43.6973 25.3814 45.2554 23.4027 47.2195L8.6364 61.8694V21.3286C8.6364 17.9636 9.98336 14.7365 12.3809 12.3572C14.7785 9.97779 18.0304 8.64107 21.4211 8.64107ZM21.4211 93.2244C18.0304 93.2244 14.7785 91.8877 12.3809 89.5083C9.98336 87.129 8.6364 83.9018 8.6364 80.5369V73.8294L29.4243 53.1996C30.6116 52.0206 32.0213 51.0853 33.5729 50.4472C35.1246 49.8091 36.7877 49.4806 38.4673 49.4806C40.1469 49.4806 41.8101 49.8091 43.3617 50.4472C44.9133 51.0853 46.3231 52.0206 47.5104 53.1996L86.559 91.9557C84.8536 92.7834 82.9814 93.2171 81.0829 93.2244H21.4211Z"
                    fill="#374957" />
                  <path
                    d="M68.2983 44.5875C71.2483 44.5875 74.132 43.7193 76.5849 42.0929C79.0377 40.4664 80.9494 38.1546 82.0784 35.4499C83.2073 32.7452 83.5027 29.7689 82.9271 26.8976C82.3516 24.0263 80.9311 21.3888 78.8451 19.3187C76.7591 17.2486 74.1014 15.8388 71.2081 15.2677C68.3148 14.6966 65.3158 14.9897 62.5904 16.11C59.8649 17.2304 57.5355 19.1276 55.8965 21.5618C54.2576 23.996 53.3828 26.8578 53.3828 29.7854C53.3828 33.7111 54.9543 37.4761 57.7515 40.252C60.5486 43.028 64.3424 44.5875 68.2983 44.5875ZM68.2983 23.4416C69.5626 23.4416 70.7985 23.8137 71.8497 24.5107C72.9009 25.2078 73.7202 26.1986 74.204 27.3577C74.6878 28.5169 74.8144 29.7924 74.5678 31.023C74.3211 32.2535 73.7123 33.3839 72.8183 34.2711C71.9244 35.1583 70.7853 35.7624 69.5454 36.0072C68.3054 36.252 67.0201 36.1264 65.852 35.6462C64.684 35.1661 63.6856 34.353 62.9832 33.3098C62.2808 32.2665 61.9059 31.04 61.9059 29.7854C61.9059 28.1029 62.5794 26.4893 63.7782 25.2997C64.977 24.11 66.6029 23.4416 68.2983 23.4416Z"
                    fill="#374957" />
                </g>
              </g>
              <defs>
                <clipPath id="clip0_318_2422">
                  <rect width="102.277" height="101.5" fill="white" transform="translate(0.113281 0.182739)" />
                </clipPath>
              </defs>
            </svg>
            <p id="fileInputLabel"></p>
          </div>
        </div>
        <span id="currentFileNameSpan" class="mt-2 block text-sm text-gray-700"></span>
        <div class="error-message" id="fileError">
          This field is required.
        </div>
      </div>
      <!-- Notes Field  -->
      <div class="relative">
        <textarea id="notes" placeholder=" "
          class="block rounded-lg px-2.5 pb-2 pt-5 floating-input w-full text-base text-black font-normal border border-[#CAE0F0] appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer "></textarea>
        <label for="notes" class="floating-label">Notes</label>
        <div class="error-message" id="notesError">
          This field is required.
        </div>
      </div>
      <!-- Submit Button -->
      <div class="flex gap-3 w-full flex-wrap">
        <button type="submit" id="submitButton"
          class="flex-grow bg-[#559BD0] text-white px-4 py-2 rounded-[8px] font-[700]">
          Create
        </button>
        <button type="submit" id="submitButton"
          class="flex-grow bg-[#559BD0] text-white px-4 py-2 rounded-[8px] font-[700]">
          Create , create another
        </button>
        <a href="./crm.html"
          class="border-[#559BD0] rounded-[8px] flex-grow text-[#559BD0] px-4 py-[8px] border text-center font-[700]">Cancel</a>
      </div>
    </form>
    <!-- API Error Message -->
    <p id="apiError" class="mt-4 text-red-500"></p>
  </div>
  <script>
    let currentFileName = "";
    let phoneCounter = 1;

    // Validate a given field ( except phone numbers)
    function validateField(field) {
      const errorDiv = document.getElementById(field.id + "Error");
      let valid = true;

      if (field.tagName.toLowerCase() === "select") {
        valid = field.value !== "";
      } else if (field.type === "email") {
        valid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(field.value);
      } else if (field.type === "url") {
        valid = /^https?:\/\/.+\..+/.test(field.value);
      } else if (field.type === "file") {
        if (field.files && field.files.length > 0) {
          const file = field.files[0];
          if (file.size > 2 * 1024 * 1024) {
            valid = false;
            if (errorDiv) errorDiv.innerText = "File must be less than 2MB.";
          } else if (
            !["application/pdf", "image/jpeg", "image/png"].includes(
              file.type
            )
          ) {
            valid = false;
            if (errorDiv)
              errorDiv.innerText = "File must be a PDF or JPG/PNG.";
          } else {
            valid = true;
            if (errorDiv) errorDiv.innerText = "";
          }
        } else {
          valid = currentFileName !== "";
          if (!valid && errorDiv)
            errorDiv.innerText = "This field is required.";
        }
      } else {
        valid = field.value.trim() !== "";
      }

      if (valid) {
        field.classList.remove("error");
        if (errorDiv) errorDiv.style.display = "none";
      }
      return valid;
    }
    function addValidationListener(field) {
      if (field.tagName.toLowerCase() === "select" || field.type === "file") {
        field.addEventListener("change", () => validateField(field));
      } else {
        field.addEventListener("input", () => validateField(field));
      }
    }

    // Attach validation for all standard fields
    [
      "fullName",
      "lastName",
      "email",
      "website",
      "address",
      "customerType",
      "file",
      "notes",
    ].forEach((id) => {
      const field = document.getElementById(id);
      addValidationListener(field);
    });

    //  drag & drop file
    const fileInput = document.getElementById("file");
    const fileDropArea = document.getElementById("fileDropArea");
    const fileInputLabel = document.getElementById("fileInputLabel");

    // When clicking on the drop area, trigger file input click
    fileDropArea.addEventListener("click", () => fileInput.click());

    // Handle drag over and drag leave
    fileDropArea.addEventListener("dragover", (e) => {
      e.preventDefault();
      fileDropArea.classList.add("bg-blue-100");
    });
    fileDropArea.addEventListener("dragleave", (e) => {
      e.preventDefault();
      fileDropArea.classList.remove("bg-blue-100");
    });
    // Handle file drop
    fileDropArea.addEventListener("drop", (e) => {
      e.preventDefault();
      fileDropArea.classList.remove("bg-blue-100");
      if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
        fileInput.files = e.dataTransfer.files;
        handleFileChange();
      }
    });

    // When file input changes
    fileInput.addEventListener("change", handleFileChange);

    function handleFileChange() {
      if (fileInput.files && fileInput.files.length > 0) {
        currentFileName = fileInput.files[0].name;
        fileInputLabel.textContent = "Selected File: " + currentFileName;
      } else {
        currentFileName = "";
        fileInputLabel.textContent = "Drag & Drop your file or Browse";
      }
      validateField(fileInput);
    }

    //validation  phone fields
    function attachPhoneValidation(input) {
      input.addEventListener("input", () => {
        const phoneGroup = input.closest(".phone-group");
        const errorDiv = phoneGroup.querySelector(".phone-error");
        if (input.value.trim() !== "") {
          input.classList.remove("error");
          errorDiv.style.display = "none";
        } else {
          input.classList.add("error");
          errorDiv.style.display = "block";
        }
      });
    }
    document.querySelectorAll(".phone").forEach((input) => {
      attachPhoneValidation(input);
    });

    // add a new phone field
    function addPhoneNumber() {
      const phoneContainer = document.getElementById("phoneNumbers");
      if (!phoneContainer) {
        console.error("phoneNumbers container not found");
        return;
      }

      const newDiv = document.createElement("div");
      newDiv.className = "phone-group relative flex flex-col";

      const newInput = document.createElement("input");
      newInput.type = "tel";
      newInput.placeholder = " ";
      newInput.className = "phone floating-input peer ";
      const newId = "phone" + phoneCounter;
      newInput.id = newId;

      const newLabel = document.createElement("label");
      newLabel.htmlFor = newId;
      newLabel.className = "floating-label ";
      newLabel.innerText = "Phone Number";

      const errorDiv = document.createElement("div");
      errorDiv.className = "error-message phone-error mt-1";
      errorDiv.innerText = "This field is required.";

      newDiv.appendChild(newInput);
      newDiv.appendChild(newLabel);
      newDiv.appendChild(errorDiv);

      const iconContainer = document.createElement("div");
      iconContainer.className = "flex items-center justify-between mt-2";

      const deleteDiv = document.createElement("div");
      deleteDiv.className =
        "flex items-center gap-1 deleteBtn cursor-pointer";
      deleteDiv.innerHTML = `
    <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_723_4826)">
<path d="M13.9987 2.84928H11.932C11.7773 2.09689 11.3679 1.42085 10.7729 0.935096C10.1778 0.449344 9.4335 0.183587 8.66536 0.182617L7.33203 0.182617C6.56389 0.183587 5.81958 0.449344 5.22453 0.935096C4.62948 1.42085 4.2201 2.09689 4.06536 2.84928H1.9987C1.82189 2.84928 1.65232 2.91952 1.52729 3.04455C1.40227 3.16957 1.33203 3.33914 1.33203 3.51595C1.33203 3.69276 1.40227 3.86233 1.52729 3.98735C1.65232 4.11238 1.82189 4.18262 1.9987 4.18262H2.66536V12.8493C2.66642 13.733 3.01795 14.5802 3.64284 15.2051C4.26774 15.83 5.11497 16.1816 5.9987 16.1826H9.9987C10.8824 16.1816 11.7297 15.83 12.3546 15.2051C12.9794 14.5802 13.331 13.733 13.332 12.8493V4.18262H13.9987C14.1755 4.18262 14.3451 4.11238 14.4701 3.98735C14.5951 3.86233 14.6654 3.69276 14.6654 3.51595C14.6654 3.33914 14.5951 3.16957 14.4701 3.04455C14.3451 2.91952 14.1755 2.84928 13.9987 2.84928ZM7.33203 1.51595H8.66536C9.07888 1.51646 9.48212 1.64487 9.81977 1.88358C10.1574 2.12229 10.413 2.45961 10.5514 2.84928H5.44603C5.58442 2.45961 5.83996 2.12229 6.17762 1.88358C6.51528 1.64487 6.91851 1.51646 7.33203 1.51595ZM11.9987 12.8493C11.9987 13.3797 11.788 13.8884 11.4129 14.2635C11.0378 14.6386 10.5291 14.8493 9.9987 14.8493H5.9987C5.46826 14.8493 4.95956 14.6386 4.58448 14.2635C4.20941 13.8884 3.9987 13.3797 3.9987 12.8493V4.18262H11.9987V12.8493Z" fill="#E4899C"/>
<path d="M6.66667 12.1822C6.84348 12.1822 7.01304 12.112 7.13807 11.9869C7.26309 11.8619 7.33333 11.6923 7.33333 11.5155V7.51554C7.33333 7.33873 7.26309 7.16916 7.13807 7.04414C7.01304 6.91911 6.84348 6.84888 6.66667 6.84888C6.48985 6.84888 6.32029 6.91911 6.19526 7.04414C6.07024 7.16916 6 7.33873 6 7.51554V11.5155C6 11.6923 6.07024 11.8619 6.19526 11.9869C6.32029 12.112 6.48985 12.1822 6.66667 12.1822Z" fill="#E4899C"/>
<path d="M9.33464 12.1822C9.51145 12.1822 9.68102 12.112 9.80605 11.9869C9.93107 11.8619 10.0013 11.6923 10.0013 11.5155V7.51554C10.0013 7.33873 9.93107 7.16916 9.80605 7.04414C9.68102 6.91911 9.51145 6.84888 9.33464 6.84888C9.15783 6.84888 8.98826 6.91911 8.86323 7.04414C8.73821 7.16916 8.66797 7.33873 8.66797 7.51554V11.5155C8.66797 11.6923 8.73821 11.8619 8.86323 11.9869C8.98826 12.112 9.15783 12.1822 9.33464 12.1822Z" fill="#E4899C"/>
</g>
<defs>
<clipPath id="clip0_723_4826">
<rect width="16" height="16" fill="white" transform="translate(0 0.182617)"/>
</clipPath>
</defs>
</svg>

    <p class='text-[12px] text-[#BBB6B0] font-[600]'>Delete</p>
  `;

      iconContainer.appendChild(deleteDiv);

      newDiv.appendChild(iconContainer);

      deleteDiv.onclick = function () {
        newDiv.remove();
      };

      const addBtnContainer =
        phoneContainer.querySelector(".phone-container");
      if (addBtnContainer) {
        phoneContainer.insertBefore(newDiv, addBtnContainer);
      } else {
        phoneContainer.appendChild(newDiv);
      }

      attachPhoneValidation(newInput);
      phoneCounter++;
      return newInput;
    }
    // Simulate sending FormData to an API
    function sendData(formData) {
      return new Promise((resolve) => {
        setTimeout(() => {
          const errorOccurs = Math.random() < 0.5;
          if (errorOccurs) {
            resolve({ error: "API Error: Unable to update customer data." });
          } else {
            resolve({ success: true });
          }
        }, 500);
      });
    }

    document
      .getElementById("customerForm")
      .addEventListener("submit", function (event) {
        event.preventDefault();
        let firstError = null;
        const fields = [
          "fullName",
          "lastName",
          "email",
          "website",
          "address",
          "customerType",
          "file",
          "notes",
        ];

        fields.forEach((id) => {
          const field = document.getElementById(id);
          if (!validateField(field)) {
            field.classList.add("error");
            const errorDiv = document.getElementById(id + "Error");
            errorDiv.style.display = "block";
            if (!firstError) firstError = field;
          }
        });

        // Validate phone fields
        document.querySelectorAll(".phone").forEach((input) => {
          const phoneGroup = input.closest(".phone-group");
          const errorDiv = phoneGroup.querySelector(".phone-error");
          if (input.value.trim() === "") {
            input.classList.add("error");
            errorDiv.style.display = "block";
            if (!firstError) firstError = input;
          }
        });

        if (firstError) {
          firstError.focus();
        } else {
          const submitButton = document.getElementById("submitButton");
          submitButton.disabled = true;
          submitButton.innerText = "Create...";

          const formData = new FormData();
          formData.append(
            "fullName",
            document.getElementById("fullName").value
          );
          formData.append(
            "lastName",
            document.getElementById("lastName").value
          );
          formData.append("email", document.getElementById("email").value);
          formData.append(
            "website",
            document.getElementById("website").value
          );
          formData.append(
            "address",
            document.getElementById("address").value
          );
          formData.append(
            "customerType",
            document.getElementById("customerType").value
          );
          formData.append("notes", document.getElementById("notes").value);

          if (fileInput.files && fileInput.files.length > 0) {
            formData.append("file", fileInput.files[0]);
          } else {
            formData.append("file", currentFileName);
          }

          document.querySelectorAll(".phone").forEach((input, index) => {
            formData.append(`phoneNumbers[${index}]`, input.value);
          });

          sendData(formData).then((response) => {
            submitButton.disabled = false;
            submitButton.innerText = "Submit";

            if (response.error) {
              document.getElementById("apiError").innerText = response.error;
            } else {
              document.getElementById("apiError").innerText = "";
              console.log("Form Data:");
              for (const [key, value] of formData.entries()) {
                console.log(key + ":", value);
              }
            }
          });
        }
      });

  </script>
</body>

</html>